webpackJsonp([1],{"+Snl":function(t,e){},"/Msj":function(t,e){},"/lWd":function(t,e){},"0Cr6":function(t,e){},"0aVd":function(t,e){},"24bH":function(t,e){},"25fI":function(t,e){},"31F8":function(t,e){},"3LOE":function(t,e){},"3vFU":function(t,e){
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},s=function(){this.data=[]},i=function(t,e,s){this.data=t,this.size=t.length,this.type=e,this.encoding=s},a=s.prototype,n=i.prototype,o=t.FileReaderSync,r=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,u=t.URL||t.webkitURL||t,d=u.createObjectURL,p=u.revokeObjectURL,h=u,f=t.btoa,m=t.atob,g=t.ArrayBuffer,_=t.Uint8Array;for(i.fake=n.fake=!0;c--;)r.prototype[l[c]]=c+1;return u.createObjectURL||(h=t.URL={}),h.createObjectURL=function(t){var e,s=t.type;return null===s&&(s="application/octet-stream"),t instanceof i?(e="data:"+s,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):d?d.call(u,t):void 0},h.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&p&&p.call(u,t)},a.append=function(t){var s=this.data;if(_&&(t instanceof g||t instanceof _)){for(var a="",n=new _(t),l=0,c=n.length;l<c;l++)a+=String.fromCharCode(n[l]);s.push(a)}else if("Blob"===e(t)||"File"===e(t)){if(!o)throw new r("NOT_READABLE_ERR");var u=new o;s.push(u.readAsBinaryString(t))}else t instanceof i?"base64"===t.encoding&&m?s.push(m(t.data)):"URI"===t.encoding?s.push(decodeURIComponent(t.data)):"raw"===t.encoding&&s.push(t.data):("string"!=typeof t&&(t+=""),s.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new i(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},n.slice=function(t,e,s){var a=arguments.length;return a<3&&(s=null),new i(this.data.slice(t,a>1?e:this.data.length),s,this.encoding)},n.toString=function(){return"[object Blob]"},n.close=function(){this.size=this.data.length=0},s}(t);t.Blob=function(t,s){var i=s&&s.type||"",a=new e;if(t)for(var n=0,o=t.length;n<o;n++)a.append(t[n]);return a.getBlob(i)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},"5XlF":function(t,e){},"6+ET":function(t,e){},"6PsS":function(t,e,s){t.exports=s.p+"static/img/logo.aa56384.png"},"7N+y":function(t,e){},"7l0S":function(t,e){},"8bU8":function(t,e){},"8gAi":function(t,e){},"94gv":function(t,e){},CSr1:function(t,e){},D3KZ:function(t,e){},"EWj/":function(t,e){},GSbi:function(t,e){},H15U:function(t,e){},HHdH:function(t,e){},Hd14:function(t,e){},Hgb0:function(t,e){},IT0F:function(t,e,s){t.exports=s.p+"static/img/acmlogo.457e16b.jpg"},"Ihs/":function(t,e){},"J/Ri":function(t,e){},JztD:function(t,e){},KJ2C:function(t,e){},LLqS:function(t,e){},LTAl:function(t,e){},M65j:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};s.d(i,"user",function(){return Ri}),s.d(i,"getHeaderToggle",function(){return Ai}),s.d(i,"getFooterToggle",function(){return Ei});var a=s("7+uW"),n=s("zL8q"),o=s.n(n),r=(s("tvR6"),s("Dd8w")),l=s.n(r),c=s("mvHQ"),u=s.n(c),d=s("//Fk"),p=s.n(d),h=s("mtWM"),f=s.n(h),m=s("/ocq"),g=s("Xxa5"),_=s.n(g),v=s("exGp"),b=s.n(v),y={props:{carousels:{type:Array}},data:function(){return{second:"4500",timer:null,host:Bi,isActiveOfIndex:0,acmLogo:"../../static/image/acmlogo.jpg"}},computed:{getMarginLeft:function(){return this.carousels.length&&"-"+(43*this.carousels.length+9*(this.carousels.length-1))/2+"px"}},methods:{autoPlay:function(){this.isActiveOfIndex++,this.isActiveOfIndex>this.carousels.length-1&&(this.isActiveOfIndex=0)},play:function(){this.timer=setInterval(this.autoPlay,this.second)},change:function(t){this.isActiveOfIndex=t},stop:function(){clearInterval(this.timer),this.timer=null},move:function(){this.timer=setInterval(this.autoPlay,this.second)},toLink:function(t){""!==t&&void 0!==t&&(window.location.href="#"===t?Bi:Bi+"/"+t)}},created:function(){var t=this;this.$nextTick(function(){t.timer=setInterval(function(){t.autoPlay()},t.second)})}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"carousel"},[s("transition-group",{attrs:{tag:"ul",name:"image"}},t._l(t.carousels,function(e,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:i===t.isActiveOfIndex,expression:"index===isActiveOfIndex"}],key:e.id,on:{mouseenter:t.stop,mouseleave:t.move}},[s("img",{staticClass:"carousel-img",attrs:{src:e.image?t.host+"/"+e.image:""},on:{click:function(s){t.toLink(e.url)}}}),t._v(" "),s("div",{staticClass:"desc-area"},[s("p",{staticClass:"title",on:{click:function(s){t.toLink(e.url)}}},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.sub_title))])]),t._v(" "),e.attachment?s("img",{staticClass:"attachment",attrs:{src:e.attachment,alt:""}}):t._e()])})),t._v(" "),s("div",{staticClass:"carousel-index",style:{marginLeft:t.getMarginLeft}},t._l(t.carousels,function(e,i){return s("i",{key:i,class:t.isActiveOfIndex===i?"active":"",on:{mouseover:function(e){t.change(i)}}})})),t._v(" "),s("img",{staticClass:"acm-logo",attrs:{src:t.acmLogo,alt:""}})],1)},staticRenderFns:[]};var C=s("VU/8")(y,w,!1,function(t){s("XMfH")},"data-v-34648984",null).exports;var k={getRankList:function(t,e){return ji(t,{count:e}).then(function(t){return p.a.resolve(t.data)})},getBannerList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getNewsList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getProList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getUserInfo:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getPostsList:function(t,e){return ji(t,{type:e.type,search:e.search,page:e.page,pagesize:e.pageSize}).then(function(t){return p.a.resolve(t.data)})},postFeedback:function(t,e){return Vi(t,e).then(function(t){return p.a.resolve(t.data)})},getSystemStats:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getPeriodList:function(t,e){return ji(t,{type:e.type,date:e.date}).then(function(t){return p.a.resolve(t.data)})},updateUserInfo:function(t,e){return Ji(t,e).then(function(t){return p.a.resolve(t.data)})},checkQuizStatus:function(t){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})}},T=s("XLwt"),S=s.n(T),x={name:"systemStats",props:{showStatsBox:{type:Boolean,default:!0},systemStats:{type:Object}},data:function(){return{initData:{hourData:{type:"本日",nextType:"本周",childType:"",xAxis:["1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","16:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00"],accepted_list:[],submitted_list:[],note:""},dayData:{type:"本周",nextType:"本月",childType:"日",xAxis:["周一","周二","周三","周四","周五","周六","周日"],accepted_list:[],submitted_list:[],note:""},weekData:{type:"本月",nextType:"本年",childType:"周",xAxis:["第一周","第二周","第三周","第四周","第五周"],accepted_list:[],submitted_list:[],note:""},monthData:{type:"本年",nextType:"本日",childType:"月",xAxis:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],accepted_list:[],submitted_list:[],note:""}},echartsStats:{type:"",nextType:"",xAxis:[],accepted_list:[],submitted_list:[],note:""},flagDate:new Date,Note:"",loading:!0}},methods:{updateChart:function(){this.charts.setOption({title:{text:"数据统计",subtext:""===this.echartsStats.note||void 0===this.echartsStats.note?"":"统计范围：<"+this.echartsStats.note+">"},legend:{data:["通过总数","递交总数"]},xAxis:{data:this.echartsStats.xAxis},series:[{name:"通过总数",data:this.echartsStats.accepted_list},{name:"递交总数",data:this.echartsStats.submitted_list}]})},clearChart:function(){this.echartsStats.note="",this.charts.setOption({title:{text:"",subtext:""},legend:{data:[]},xAxis:{data:[]},series:[{name:"通过总数",data:[]},{name:"递交总数",data:[]}]})},drawPie:function(t){var e=this;this.charts=S.a.init(document.getElementById(t));var s={title:{text:"数据统计",subtext:""===e.echartsStats.note||void 0===e.echartsStats.note?"":"统计范围：<"+e.echartsStats.note+">"},tooltip:{trigger:"axis"},legend:{data:["通过总数","递交总数"]},toolbox:{show:!0,feature:{myTool2:{show:!0,title:"回到现在",icon:"path://M186.368 800.768c-65.536-81.92-102.4-182.272-102.4-288.768 0-253.952 206.848-460.8 460.8-460.8s460.8 206.848 460.8 460.8-206.848 460.8-460.8 460.8c-10.24 0-20.48-8.192-20.48-20.48 0-10.24 8.192-20.48 20.48-20.48 231.424 0 419.84-188.416 419.84-421.888s-188.416-421.888-419.84-421.888-419.84 188.416-419.84 421.888c0 98.304 32.768 190.464 94.208 264.192v-151.552c0-10.24 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v196.608c0 6.144-2.048 10.24-6.144 14.336-4.096 4.096-8.192 6.144-14.336 6.144h-196.608c-10.24 0-20.48-8.192-20.48-20.48 0-10.24 8.192-20.48 20.48-20.48h143.36z",onclick:function(){e.flagDate=new Date,e.clearChart(),e.getPeriodList("本日",!1)}},myTool3:{show:!0,title:"切换为日范围",icon:'path d="M12 308 c-14 -14 -17 -275 -4 -296 6 -9 37 -12 118 -10 l109 3 3 149\nc2 113 -1 151 -10 158 -21 13 -202 10 -216 -4z m206 -80 l3 -58 -96 0 -95 0 0\n60 0 61 93 -3 92 -3 3 -57z m2 -143 l0 -55 -95 0 -95 0 0 55 0 55 95 0 95 0 0\n-55z',onclick:function(){e.clearChart(),e.getPeriodList("本日",!1)}},myTool4:{show:!0,title:"切换为周范围",icon:'path d="M17 284 c13 -20 18 -57 22 -153 l6 -126 125 0 125 0 3 130 c4 166 1\n175 -43 175 -18 0 -37 -4 -40 -10 -4 -6 7 -10 24 -10 l31 0 0 -77 0 -78 -91 3\nc-56 2 -96 -1 -102 -7 -8 -8 1 -11 31 -11 31 0 42 -4 42 -15 0 -10 -10 -15\n-29 -15 -17 0 -33 -4 -36 -10 -4 -6 8 -10 28 -10 27 0 36 -5 40 -21 6 -23 27\n-17 27 7 0 10 12 14 41 14 24 0 38 4 34 10 -3 6 -22 10 -41 10 -24 0 -34 5\n-34 15 0 11 12 15 45 15 l45 0 0 -50 0 -51 -102 3 -103 3 -6 115 c-5 116 -20\n170 -46 170 -10 0 -10 -6 4 -26z"/>\n<path d="M107 254 c-4 -4 -7 -27 -7 -51 l0 -43 66 0 65 0 -3 48 -3 47 -55 3\nc-31 2 -59 0 -63 -4z m103 -49 c0 -23 -4 -25 -45 -25 -41 0 -45 2 -45 25 0 23\n4 25 45 25 41 0 45 -2 45 -25z',onclick:function(){e.clearChart(),e.getPeriodList("本周",!1)}},myTool5:{show:!0,title:"切换为月范围",icon:'path d="M10 324 c0 -3 9 -18 20 -33 27 -38 39 -101 40 -197 0 -96 -3 -94 111\n-94 122 0 119 -3 119 151 0 72 -5 139 -10 150 -8 15 -22 19 -60 19 -28 0 -50\n-4 -50 -10 0 -5 20 -10 45 -10 l45 0 0 -55 0 -55 -88 0 -88 0 -11 43 c-12 44\n-47 97 -64 97 -5 0 -9 -3 -9 -6z m260 -184 l0 -30 -90 0 -90 0 0 30 0 30 90 0\n90 0 0 -30z m0 -80 l0 -30 -90 0 -90 0 0 30 0 30 90 0 90 0 0 -30z',onclick:function(){e.clearChart(),e.getPeriodList("本月",!1)}},myTool6:{show:!0,title:"切换为年范围",icon:'path d="M166 323 c-3 -3 -6 -26 -6 -50 l0 -43 -64 0 c-35 0 -71 -3 -80 -6\n-24 -9 -9 -24 25 -24 27 0 29 -2 29 -40 l0 -40 45 0 c41 0 45 -2 45 -25 0 -22\n-4 -25 -32 -25 -26 0 -37 6 -50 30 -17 30 -44 48 -54 37 -3 -3 4 -15 15 -26\n11 -11 30 -39 43 -63 15 -30 23 -38 26 -26 3 15 18 18 95 20 100 3 127 21 40\n26 -49 3 -53 5 -53 28 0 22 4 24 50 24 28 0 50 5 50 10 0 6 -22 10 -50 10 -49\n0 -50 1 -50 30 0 29 1 29 63 32 34 2 62 8 62 13 0 6 -28 11 -62 13 l-63 3 0\n44 c0 42 -10 62 -24 48z m-6 -153 c0 -28 -3 -30 -35 -30 -32 0 -35 2 -35 30 0\n28 3 30 35 30 32 0 35 -2 35 -30z',onclick:function(){e.clearChart(),e.getPeriodList("本年",!1)}},magicType:{type:["line","bar"]},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value} "}},series:[{name:"通过总数",type:"line",data:[],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"递交总数",type:"line",data:[],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};this.charts.setOption(s),this.clearChart(),this.charts.on("click",{seriesName:"通过总数"},function(t){e.gotoOtherDate(t.dataIndex)}),this.charts.on("click",{seriesName:"递交总数"},function(t){e.gotoOtherDate(t.dataIndex)})},gotoOtherDate:function(t){if(""!==this.echartsStats.childType&&void 0!==this.echartsStats.childType){switch(this.echartsStats.childType){case"日":this.flagDate.setDate(0===this.flagDate.getDay()?this.flagDate.getDate()-7+t+1:this.flagDate.getDate()-this.flagDate.getDay()+t+1),this.flagDate=new Date(this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+" 23:59:59"),this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在当天";break;case"周":var e=Math.ceil((this.flagDate.getDate()+6-this.flagDate.getDay())/7);this.flagDate.setDate(this.flagDate.getDate()-7*e+7*(t+1)),this.flagDate.setDate(0===this.flagDate.getDay()?this.flagDate.getDate():this.flagDate.getDate()+(7-this.flagDate.getDay())),this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在周";break;case"月":this.flagDate=new Date(this.flagDate.getFullYear()+"-"+(t+1+1)+"-1 23:59:59"),this.flagDate.setDate(this.flagDate.getDate()-1),this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在月";break;default:this.Note=""}this.clearChart(),this.getPeriodList("本"+this.echartsStats.childType,!0)}},Format:function(t,e){var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?s[i]:("00"+s[i]).substr((""+s[i]).length)));return e},getPeriodList:function(t,e){var s=this,i="hour",a=new Date,n=0;switch(t){case"本周":i="day",(n=Math.floor((a.getTime()-this.flagDate.getTime())/864e5))>0&&!e&&(n>7?this.flagDate.setDate(0===this.flagDate.getDay()?this.flagDate:this.flagDate.getDate()+(7-this.flagDate.getDay())):this.flagDate.setDate(0===this.flagDate.getDay()?this.flagDate:this.flagDate.getDate()+n)),this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在周";break;case"本月":if(i="week",(n=Math.ceil((a.getTime()-this.flagDate.getTime())/864e5*7))>0&&!e)Math.ceil((this.flagDate.getDate()+6-this.flagDate.getDay())/7)+n>4?(this.flagDate=new Date(this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1+1)+"-1 23:59:59"),this.flagDate.setDate(this.flagDate.getDate()-1)):this.flagDate.setDate(this.flagDate.getDate()+7*n);this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在月";break;case"本年":i="month",(n=12*(a.getFullYear()-this.flagDate.getFullYear())+(a.getMonth()-this.flagDate.getMonth()))>0&&!e&&(this.flagDate.getMonth()+1+n>12?(this.flagDate=new Date(this.flagDate.getFullYear()+1+"-1-1 23:59:59"),this.flagDate.setDate(this.flagDate.getDate()-1)):this.flagDate=new Date(this.flagDate.getFullYear()+"-"+(a.getMonth()+1)+"-1 23:59:59")),this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在年";break;case"本日":i="hour",this.flagDate=this.flagDate>new Date?new Date:this.flagDate,this.Note=this.flagDate.getFullYear()+"-"+(this.flagDate.getMonth()+1)+"-"+this.flagDate.getDate()+"所在日"}this.loading=!0,k.getPeriodList("/feedbacks/period",{type:i,date:s.Format(this.flagDate,"yyyy-MM-dd hh:mm:ss")}).then(function(e){var i="本周"===t?"dayData":"本月"===t?"weekData":"本年"===t?"monthData":"hourData";s.echartsStats=s.initData[i],s.echartsStats.accepted_list=e.data.per_accepted,s.echartsStats.submitted_list=e.data.per_submitted,s.echartsStats.note=s.Note,s.echartsStats.xAxis.splice(s.echartsStats.accepted_list.length-1,s.echartsStats.accepted_list.xAxis-s.echartsStats.accepted_list.length),s.updateChart(),s.loading=!1})}},mounted:function(){this.$nextTick(function(){this.drawPie("statsMain")})},created:function(){this.getPeriodList("本日",!1)}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.showStatsBox?"systemStats-show":"systemStats-hide",attrs:{id:"systemStats"}},[s("div",{staticClass:"SystemStatsBox"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"box-content"},[s("table",{staticClass:"content-left"},[s("tr",[s("td",[t._v("普通用户")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.user_counts))]),t._v(" "),s("td",[t._v("考试总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.quiz_counts))])]),t._v(" "),s("tr",[s("td",[t._v("学生总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.student_counts))]),t._v(" "),s("td",[t._v("题目总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.problem_counts))])]),t._v(" "),s("tr",[s("td",[t._v("教师总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.teacher_counts))]),t._v(" "),s("td",[t._v("竞赛总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.contest_counts))])]),t._v(" "),s("tr",[s("td",[t._v("班级总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.class_counts))]),t._v(" "),s("td",[t._v("系统总提交数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.submited_counts))])]),t._v(" "),s("tr",[s("td",[t._v("课程总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.course_counts))]),t._v(" "),s("td",[t._v("系统总通过数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.accepted_counts))])]),t._v(" "),s("tr",[s("td",[t._v("测验总数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.exam_counts))]),t._v(" "),s("td",[t._v("活跃人数")]),t._v(" "),s("td",[t._v(t._s(t.systemStats.online_counts))])])]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-right"},[s("div",{attrs:{id:"statsMain"}})])])])],1)])},staticRenderFns:[]};var q=s("VU/8")(x,D,!1,function(t){s("eB4M")},"data-v-d442e58e",null).exports,I={props:{rankTitle:{type:String,default:"总榜"},titleEn:{type:String,default:"total"},float:{type:String,default:"none"},rankData:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{toLookMore:function(t){this.$emit("toRank",t)},getUserInfo:function(t){this.$emit("getUserInfo",t)},getPassRate:function(t,e){return e?(100*(t/e).toFixed(2)).toFixed(0)+"%":0}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rankBox",style:{float:t.float}},[s("div",{staticClass:"title"},[s("p",{staticClass:"title-cn"},[t._v(t._s(t.rankTitle))]),t._v(" "),s("p",{staticClass:"title-en"},[t._v(t._s(t.titleEn)),s("span",{staticStyle:{color:"#f48118"}},[t._v("list")])])]),t._v(" "),s("table",{directives:[{name:"loading",rawName:"v-loading",value:0===t.rankData.length,expression:"rankData.length === 0"}],staticClass:"rank-table"},[t._m(0),t._v(" "),s("tbody",{staticClass:"t-body"},[t._l(t.rankData,function(e,i){return e.submit>0?s("tr",{key:i,staticClass:"row"},[s("td",{staticClass:"rank-num"},[s("span",{staticStyle:{width:"70px"}},[t._v(t._s(i+1))])]),t._v(" "),s("td",{staticClass:"nick"},[s("span",{staticClass:"overflow-text",staticStyle:{width:"200px",display:"block"},attrs:{title:e.nick},on:{click:function(s){t.getUserInfo(e.uid)}}},[t._v(t._s(e.nick))])]),t._v(" "),s("td",{staticClass:"rate-num"},[s("span",{staticStyle:{width:"80px"}},[t._v(t._s(t.getPassRate(e.accept,e.submit)))])]),t._v(" "),s("td",{staticClass:"pass-num"},[s("span",{staticStyle:{width:"70px"}},[t._v(t._s(e.accept))])])]):t._e()}),t._v(" "),t._l(8,function(e,i){return 0===t.rankData.length?s("tr",{key:i,staticClass:"row"},[0===i?s("td",{staticStyle:{"text-align":"center",color:"#808080"},attrs:{colspan:"4"}},[t._v("暂无数据")]):s("td",{attrs:{colspan:"4"}})]):t._e()}),t._v(" "),t._l(t.rankData,function(e,i){return 0===e.submit?s("tr",{key:i,staticClass:"row"},[0===i?s("td",{staticStyle:{"text-align":"center",color:"#808080"},attrs:{colspan:"4"}},[t._v("暂无数据")]):s("td",{attrs:{colspan:"4"}})]):t._e()})],2)]),t._v(" "),s("div",{staticClass:"bottom"},[s("button",{staticClass:"look-more",attrs:{"data-ranktype":t.titleEn},on:{click:t.toLookMore}},[t._v("查看更多")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"t-head"},[e("tr",[e("td",[this._v("名次")]),this._v(" "),e("td",[this._v("昵称")]),this._v(" "),e("td",[this._v("通过率")]),this._v(" "),e("td",[this._v("通过数")])])])}]};var L=s("VU/8")(I,z,!1,function(t){s("kh3Z")},"data-v-510f30c4",null).exports,P={props:{item:{type:Object,default:function(){return{}}},ths:{type:Array,default:function(){return[]}},float:{type:String,default:"left"}},data:function(){return{}},methods:{toDetail:function(t){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t}}).href;window.open(e,"_blank")}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"problem-rank-card",style:{float:t.float}},[t.item.title?s("p",{staticClass:"title"},[t._v("\n    "+t._s(t.item.title)+"\n  ")]):t._e(),t._v(" "),s("table",{staticClass:"table"},[s("thead",{staticClass:"thead"},[s("tr",t._l(t.ths,function(e,i){return s("th",{key:i,staticClass:"th",style:{textAlign:e.textAlign}},[t._v(t._s(e.title))])}))]),t._v(" "),s("tbody",{staticClass:"tbody"},t._l(t.item.list,function(e,i){return s("tr",{key:i,staticClass:"row",on:{click:function(s){t.toDetail(e.problem_id)}}},[s("td",{staticClass:"name"},[s("span",{staticClass:"overflow-text",staticStyle:{width:"185px"},attrs:{title:e.title}},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"problem-num center"},[s("span",{staticClass:"overflow-text",staticStyle:{width:"90px"}},[t._v(t._s(e.problem_id))])]),t._v(" "),s("td",{staticClass:"pass-rate center"},[s("span",{staticClass:"overflow-text",staticStyle:{width:"150px","text-align":"center"}},[t._v(t._s(100*e.accept_rate+"%"))])]),t._v(" "),s("td",{staticClass:"submit-num"},[s("span",{staticClass:"overflow-text",staticStyle:{width:"90px","text-align":"center"}},[t._v(t._s(e.submit))])])])}))]),t._v(" "),s("div",{staticClass:"bottom"},[s("router-link",{staticClass:"look-more",attrs:{to:"/library",tag:"button"}},[t._v("查看更多")])],1)])},staticRenderFns:[]};var A=s("VU/8")(P,R,!1,function(t){s("ggZH")},"data-v-17e3ac75",null).exports,E={props:{newsData:{type:Array},title:{type:String}},methods:{toPost:function(t){this.$router.push({name:"postDetail",params:{id:t}})}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news-template"},[s("h5",[t._v(t._s(t.title))]),t._v(" "),s("ul",t._l(t.newsData,function(e,i){return s("li",{key:i,on:{click:function(s){t.toPost(e.post_id)}}},[s("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.title))]),t._v(" "),s("span",[t._v(t._s(e.author.nick))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(e.publish_date.split("T")[0]))])])}))])},staticRenderFns:[]};var $=s("VU/8")(E,F,!1,function(t){s("qbE4")},"data-v-75b54154",null).exports,O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"footer-top"},t._l(t.menuList,function(e,i){return s("div",{key:i,staticClass:"footer-top_menuItem"},[e.center?[t._m(0,!0)]:[s("h4",{staticClass:"footer-top_menuItem_title"},[t._v(t._s(e.title))]),t._v(" "),s("h5",{staticClass:"footer-top_menuItem_subTitle"},[t._v(t._s(e.subTitle))]),t._v(" "),t._l(e.children,function(e,i){return s("ul",{key:i,staticClass:"footer-top_menuItem_childMenu"},[s("li",{on:{click:function(s){t.toUrl(e)}}},[t._v(t._s(e.title))])])})]],2)})),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"footer-top_menu_middle"},[i("div",{staticClass:"footer-top_menu_middle_title"},[i("img",{staticClass:"logo",attrs:{src:s("6PsS"),alt:""}}),t._v(" "),i("div",{staticClass:"footer-top_menu_middle_titleRight"},[i("h4",[t._v("开放，自由的学习平台")]),t._v(" "),i("h5",[t._v("DI Studio")])]),t._v(" "),i("span",{staticClass:"centerSpan"})]),t._v(" "),i("div",{staticClass:"footer-top_menu_middle_content"},[i("p",[t._v('"我热爱算法，虽然没有达到狂热的程度，但注定我已经离不开它，它就像有生命似的，改变了我、我的生活，而我也坚信，算法能改变人们、人们的生活以及全世界。所以我高傲地称自己为ACM达人，而你就是下一个,WELCOME！GO！GO！GO！" ')]),t._v(" "),i("br"),t._v(" "),i("span",[t._v("—— DI Studio")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer-bottom"},[e("p",[e("a",{staticStyle:{color:"white"},attrs:{href:"http://www.miitbeian.gov.cn",target:"_blank"}},[this._v("@copyright www.gpnuacm.com 粤ICP备18111867号")])])])}]};var N=s("VU/8")({data:function(){return{menuList:[{title:"关于我们",subTitle:"Know",children:[{title:"往期公告",url:"/postSearch",query:{},params:{type:3}},{title:"团队信息",url:"/about",query:{},params:{}},{title:"加入我们",url:""}]},{title:"帮助中心",subTitle:"Assist",children:[{title:"新手指南",url:"/postDetail",query:{},params:{id:78}},{title:"教师指南",url:"/postDetail",query:{},params:{id:55}},{title:"操作详解",url:"/postDetail",query:{},params:{id:77}}]},{center:!0},{title:"关注我们",subTitle:"Follow",children:[{title:"新浪微博",url:""},{title:"官方微信",url:""},{title:"公众号",url:""}]},{title:"联系我们",subTitle:"Contact",children:[{title:"联系我们",url:""},{title:"电子邮箱",url:""},{title:"反馈意见",url:"FUNCTION:callFeedback"}]}]}},methods:{toUrl:function(t){var e=t.url,s=t.query,i=t.params;if(e.indexOf("FUNCTION")>=0)this[e.split(":")[1]]();else if(e){for(var a in i)e+="/"+i[a];this.$router.push({path:e,query:s})}else this.$message("敬请期待")},callFeedback:function(){this.$emit("callFeedback")}}},O,!1,function(t){s("qH5x")},"data-v-25f3ffc6",null).exports;var M={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})}},B=void 0,j={props:{information:{type:Number}},computed:{getAvatarUrl:function(){return this.userForm.avatarurl?this.userForm.avatarurl:this.defaultImage}},data:function(){return{userForm:{avatarurl:"",email:"",identity:"",login_time:"",nick:"",qq:"",signature:"",sex:"",school_name:""},showAvatar:!1,done_list:[],not_done_list:[],identify:-1,defaultImage:s("IT0F")}},methods:{startLoading:function(){B=n.Loading.service({lock:!0,text:"加载中……",background:"rgb(255, 255, 255, 0.7)",fullscreen:!1,target:this.$refs.information})},endLoading:function(){B.close()},getinfo:function(t){var e=this;this.showAvatar=!1,e.startLoading(),M.getInfoList("/users/detail",t).then(function(t){e.userForm=t.data.user_info;var s;s=t.data.user_info.login_time.split("T"),e.userForm.login_time=s[0]+" "+s[1],e.done_list=t.data.problem_info.done_list,e.not_done_list=t.data.problem_info.not_done_list,e.identify=t.data.user_info.identity,e.endLoading(),setTimeout(function(){e.showAvatar=!0},400)})},toDetail:function(t){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t}}).href;window.open(e,"_blank")}},watch:{information:function(t,e){this.getinfo(t)}},created:function(){this.getinfo(this.information)}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"information",staticClass:"information"},[s("div",{staticClass:"Info-head"},[s("span",{staticClass:"Infotitle"},[t._v(t._s(t.userForm.nick)+"的公开信息")]),t._v(" "),1==t.identify?s("el-tag",[t._v("学生用户")]):t._e(),t._v(" "),2==t.identify?s("el-tag",{attrs:{type:"danger"}},[t._v("教师")]):t._e(),t._v(" "),0==t.identify?s("el-tag",{attrs:{type:"warning"}},[t._v("普通用户")]):t._e()],1),t._v(" "),t.showAvatar?s("img",{staticClass:"user-avatar",attrs:{src:t.getAvatarUrl,alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"Info-middle"},[s("div",{staticClass:"line-class"},[s("span",{staticClass:"Info"},[t._v("学校:")]),t._v(" "),s("span",[t._v(t._s(t.userForm.school_name))])]),t._v(" "),s("div",{staticClass:"line-class"},[s("span",{staticClass:"Info"},[t._v("电子邮箱:")]),t._v(" "),s("span",[t._v(t._s(t.userForm.email))])]),t._v(" "),s("div",{staticClass:"line-class"},[s("span",{staticClass:"Info"},[t._v("QQ:")]),t._v(" "),s("span",[t._v(t._s(t.userForm.qq))])]),t._v(" "),s("div",{staticClass:"line-class"},[s("span",{staticClass:"Info"},[t._v("签名:")]),t._v(" "),s("span",[t._v(t._s(t.userForm.signature))])]),t._v(" "),s("div",{staticClass:"line-class"},[s("span",{staticClass:"Info"},[t._v("上次登录:")]),t._v(" "),s("span",[t._v(t._s(t.userForm.login_time))])])]),t._v(" "),s("div",{staticClass:"Info-bottom"},[s("el-alert",{attrs:{title:"已完成题目",type:"success",closable:!1}}),t._v(" "),s("div",{staticClass:"success-topic passList"},t._l(t.done_list,function(e,i){return s("div",{key:i,staticClass:"inline"},[s("span",{staticClass:"topic",on:{click:function(s){t.toDetail(e.problem_id)}}},[t._v(t._s(e.problem_id))]),t._v(" "),s("span",{staticClass:"Num"},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))])])})),t._v(" "),s("el-alert",{attrs:{title:"未完成的题目",type:"error",closable:!1}}),t._v(" "),s("div",{staticClass:"success-topic"},t._l(t.not_done_list,function(e,i){return s("div",{key:i,staticClass:"inline"},[s("span",{staticClass:"topic",on:{click:function(s){t.toDetail(e.problem_id)}}},[t._v(t._s(e.problem_id))]),t._v(" "),s("span",{staticClass:"Num"},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))])])}))],1)])},staticRenderFns:[]};var H=s("VU/8")(j,U,!1,function(t){s("/lWd")},"data-v-bd0e38aa",null).exports,Q={name:"change-uname",computed:{getLabelStyle:function(){return{backgroundColor:this.isAllow?"#7ab441":"#f48118"}}},props:{info:{type:Object,default:function(){return{}}}},data:function(){return{isAllow:!1,username:"",copyInfo:{}}},methods:{updateInfo:function(){this.copyInfo.nick=this.username,this.$emit("changeUname",this.copyInfo)}},watch:{username:function(){var t=0===this.username.indexOf("GPNU_")?/^[-\w\u4e00-\u9fa5]{2,20}$/:/^[-\w\u4e00-\u9fa5]{2,14}$/;this.isAllow=t.test(this.username)}},created:function(){this.copyInfo=JSON.parse(u()(this.info))}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"change-uname"},[s("div",{staticClass:"container"},[s("h5",{staticClass:"change-uname_title"},[t._v("公告")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"change-uname_changeName"},[s("label",{style:t.getLabelStyle,attrs:{for:"username"}},[t._v("修改昵称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",type:"text",placeholder:"请输入符合规格的用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("span",{staticClass:"tip"},[t._v("*  当“修改昵称”标签变为绿色时即表示符合规范")]),t._v(" "),s("span",{staticClass:"tip"},[t._v("*  昵称可以由2-14个中文/字母/数字/减号/下划线组成")])]),t._v(" "),t.isAllow?s("div",{staticStyle:{"text-align":"right"}},[s("div",{staticClass:"change-uname_submit"},[s("span",{staticClass:"tips"},[t._v("确定修改且进入愉快玩耍")]),t._v(" "),s("span",{staticClass:"btn",on:{click:t.updateInfo}},[s("i",{staticClass:"icon-tijiao1"})])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-uname_notice"},[e("p",[this._v("由于平台内个别用户的昵称过于随意，导致页面某些功能无法完整使用，所以从今日起(2019/3/31)启用强制改名措施，让平台更加规范。恭喜您中奖啦，快给自己改个更好听的昵称吧~")])])}]};var W={components:{Carousel:C,systemStats:q,rankBox:L,problemRankCard:A,newsCard:$,myFooter:N,Information:H,changeUname:s("VU/8")(Q,V,!1,function(t){s("chP8")},"data-v-e6dbc848",null).exports},data:function(){return{host:Bi,carousels:[],systemStats:{},isShowChangeUname:!1,isShowStatsBox:!1,notices:[],hotpaper:[],newpaper:[],ths:[{title:"题目名",textAlign:"left"},{title:"题目号",textAlign:"center"},{title:"通过率",textAlign:"center"},{title:"用户提交数",textAlign:"left"}],highOfProblemRank:{title:"通过率最高的题目",list:[]},lowOfProblemRank:{title:"通过率最低的题目",list:[]},totalRankData:[],monthRankData:[],weekRankData:[],dayRankData:[],dialogVisible:!1,userDialog:!1,newsContent:{title:"",time:"",content:"",nick:""},infoUid:"",feedbackDialog:!1,feedbackType:[{label:"用户体验",value:1},{label:"用户界面",value:2},{label:"题库",value:3},{label:"后台效率",value:4},{label:"发现BUG",value:5},{label:"新功能",value:6},{label:"其他",value:7}],feedbackForm:{title:"",content:"",type:1},feedbackRule:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]},User:{}}},methods:{toRank:function(t){var e=t.target.dataset.ranktype;this.$router.push({path:"/rank",query:{rankType:e}})},getTotalList:function(){var t=this;k.getRankList("/ranks",8).then(function(e){t.totalRankData=t.initRankData(e.data.all_list),t.monthRankData=t.initRankData(e.data.month_list),t.weekRankData=t.initRankData(e.data.week_list),t.dayRankData=t.initRankData(e.data.day_list)})},initRankData:function(t){if(t.length<8){for(var e=8-t.length,s=0;s<e;s++){t.push({uid:-1,nick:"",accept:0,submit:0})}return t}return t},getNews:function(){var t=this;k.getPostsList("/forum/posts",{type:3,page:1,pageSize:6}).then(function(e){t.notices=e.data.post_list})},showNewsContent:function(t){this.$router.push({name:"postDetail",params:{id:t}})},getHighPro:function(){var t=this;k.getProList("/problems?page=1&pagesize=5&sort=desc&defunct=N").then(function(e){t.$delete(t.highOfProblemRank,"list"),t.$set(t.highOfProblemRank,"list",e.data)})},getLowPro:function(){var t=this;k.getProList("/problems?page=1&pagesize=5&sort=asc&defunct=N").then(function(e){t.$delete(t.lowOfProblemRank,"list"),t.$set(t.lowOfProblemRank,"list",e.data)})},getUserInfo:function(t){this.userDialog=!0,this.infoUid=t},getPostsList:function(){var t=this;k.getPostsList("/forum/posts",{type:2,page:1,pageSize:4}).then(function(e){t.hotpaper=e.data.post_list}),k.getPostsList("/forum/posts",{type:1,page:1,pageSize:4}).then(function(e){t.newpaper=e.data.post_list})},callFeedback:function(){this.getUserStore(),this.User.uid?this.feedbackDialog=!0:this.$message.error("请登录账号之后再进行建议反馈")},sendFeedback:function(){var t=this;t.$refs.form.validate(function(e){if(!e)return!1;k.postFeedback("/feedbacks",t.feedbackForm).then(function(e){"true"===e.success?(t.$message({message:"反馈成功，我们会及时处理您的建议",type:"success"}),t.feedbackDialog=!1):(t.$message.error("反馈上传失败，请稍候再试"),t.feedbackDialog=!1)})})},getUserStore:function(){var t=window.sessionStorage.getItem("userInfo");if("undefined"!==t&&null!==t&&void 0!==t){var e=JSON.parse(t);this.User=e}else this.User={}},getSystemStats:function(){var t=this;k.getSystemStats("/stats",{}).then(function(e){t.systemStats=e.data})},getBannerList:function(){var t=this;k.getBannerList("/banners",{}).then(function(e){t.carousels=e.data.banner_list})},checkUserName:function(){(this.getUserStore(),this.User.uid)&&((0===this.User.nick.indexOf("GPNU_")?/^[-\w\u4e00-\u9fa5]{2,20}$/:/^[-\w\u4e00-\u9fa5]{2,14}$/).test(this.User.nick)?"1"===this.User.identity&&this.checkQuizStatus():this.isShowChangeUname=!0)},checkQuizStatus:function(){var t=this;return b()(_.a.mark(function e(){var s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.checkQuizStatus("/quiz/student/find_quiz_by_time");case 2:if("false"!==(s=e.sent).success){e.next=5;break}return e.abrupt("return");case 5:s.data.quiz_list.forEach(function(e,s){var i=(new Date).getTime(),a=new Date(e.start_time).getTime(),n=a>i&&a-i<=6e5?"有考试即将开始":"有考试正在进行";t.$notify.info({title:n,dangerouslyUseHTMLString:!0,message:'<p style="font-size: 13px;">您'+n+",该考试为“"+e.title+'”,请点击<a style="cursor: pointer; color: #ff9900;" href="'+t.host+"#/quizStart/"+e.quiz_id+'">此处</a>跳转至开考页。</p>',offset:60+100*s,duration:3e3})});case 7:case"end":return e.stop()}},e,t)}))()},updateInfo:function(t){var e=this;k.updateUserInfo("/users",t).then(function(s){"true"===s.success?(e.$message({message:"修改信息成功",type:"success"}),window.sessionStorage.setItem("userInfo",u()(t)),e.isShowChangeUname=!1):e.$message({message:"修改失败，请稍候再试",type:"warning"})})}},created:function(){this.getBannerList(),this.getTotalList(),this.getNews(),this.getHighPro(),this.getLowPro(),this.getPostsList(),this.getSystemStats(),this.checkUserName()}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index"},[s("carousel",{attrs:{carousels:t.carousels}}),t._v(" "),s("systemStats",{attrs:{showStatsBox:t.isShowStatsBox,systemStats:t.systemStats}}),t._v(" "),s("div",{staticClass:"carousel-data"},[s("ul",[s("li",[s("i",{staticClass:"iconfont icon-timu"}),t._v(" 题目总数: "),s("strong",[t._v(t._s(t.systemStats.problem_counts))])]),t._v(" "),s("li",[s("i",{staticClass:"iconfont icon-yonghu"}),t._v(" 活跃人数: "),s("strong",{staticClass:"color-orange"},[t._v(t._s(t.systemStats.online_counts))])]),t._v(" "),s("li",[s("i",{staticClass:"iconfont icon-tijiao"}),t._v(" 今日提交总数: "),s("strong",{staticClass:"color-green"},[t._v(t._s(t.systemStats.today_submitted))])]),t._v(" "),s("li",[s("i",{staticClass:"iconfont icon-kaihuxiangguan"}),t._v(" 用户总数: "),s("strong",[t._v(t._s(t.systemStats.user_counts))])]),t._v(" "),s("li",[s("i",{staticClass:"iconfont icon-btn_userx"}),t._v(" 学生总数: "),s("strong",[t._v(t._s(t.systemStats.student_counts))])]),t._v(" "),s("li",{class:t.isShowStatsBox?"statsBox-btn statsBox-show":"statsBox-btn statsBox-hide",on:{click:function(e){t.isShowStatsBox=!t.isShowStatsBox}}},[s("i",{staticClass:"iconfont icon-tongji"}),t._v(" 统计详情")])])]),t._v(" "),s("div",{staticClass:"rank-box"},[s("div",{staticClass:"container"},[s("el-row",{attrs:{type:"flex",justify:"space-center"}},[s("el-col",[s("rank-box",{attrs:{rankTitle:"今日",titleEn:"day",float:"right",rankData:t.dayRankData},on:{getUserInfo:t.getUserInfo,toRank:t.toRank}})],1),t._v(" "),s("el-col",[s("rank-box",{attrs:{rankTitle:"本周",titleEn:"week",float:"right",rankData:t.weekRankData},on:{getUserInfo:t.getUserInfo,toRank:t.toRank}})],1)],1),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-center"}},[s("el-col",[s("rank-box",{attrs:{rankTitle:"本月",titleEn:"month",rankData:t.monthRankData,float:"right"},on:{toRank:t.toRank,getUserInfo:t.getUserInfo}})],1),t._v(" "),s("el-col",[s("rank-box",{attrs:{float:"right",rankData:t.totalRankData},on:{toRank:t.toRank,getUserInfo:t.getUserInfo}})],1)],1)],1)]),t._v(" "),s("div",{staticClass:"news-card-all"},[s("div",{staticClass:"news-card-container"},[s("div",{staticClass:"new-right"},[t._m(0),t._v(" "),s("div",{staticClass:"new-Rbottom"},[s("ul",t._l(t.notices,function(e,i){return s("li",{key:i},[s("a",{on:{click:function(s){t.showNewsContent(e.post_id)}}},[t._v(t._s(e.title))]),t._v(" "),s("span",[t._v(t._s(e.publish_date.split("T")[0]))])])}))])]),t._v(" "),s("div",{staticClass:"new-left"},[s("news-card",{attrs:{title:"精华帖子",newsData:t.hotpaper}}),t._v(" "),s("div",{staticClass:"inline"}),t._v(" "),s("news-card",{attrs:{title:"最新帖子",newsData:t.newpaper}})],1)])]),t._v(" "),s("div",{staticClass:"problem-rank-area"},[s("div",{staticClass:"container"},[s("el-row",{staticStyle:{overflow:"hidden"}},[s("el-col",{attrs:{span:12}},[t.highOfProblemRank.list.length?s("problem-rank-card",{attrs:{ths:t.ths,item:t.highOfProblemRank}}):t._e()],1),t._v(" "),s("el-col",{attrs:{span:12}},[t.lowOfProblemRank.list.length?s("problem-rank-card",{attrs:{ths:t.ths,item:t.lowOfProblemRank,float:"right"}}):t._e()],1)],1)],1)]),t._v(" "),s("el-dialog",{attrs:{title:"用户信息",visible:t.userDialog,width:"60%"},on:{"update:visible":function(e){t.userDialog=e}}},[s("Information",{attrs:{information:t.infoUid}})],1),t._v(" "),s("my-footer",{on:{callFeedback:t.callFeedback}}),t._v(" "),s("el-dialog",{attrs:{title:"反馈意见",visible:t.feedbackDialog,width:"60%"},on:{"update:visible":function(e){t.feedbackDialog=e}}},[s("el-form",{ref:"form",attrs:{rules:t.feedbackRule,model:t.feedbackForm,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.feedbackForm.title,callback:function(e){t.$set(t.feedbackForm,"title",e)},expression:"feedbackForm.title"}})],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"反馈类型"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-select",{attrs:{placeholder:"请选择反馈类型"},model:{value:t.feedbackForm.type,callback:function(e){t.$set(t.feedbackForm,"type",e)},expression:"feedbackForm.type"}},t._l(t.feedbackType,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"反馈内容",prop:"content"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容",resize:"none"},model:{value:t.feedbackForm.content,callback:function(e){t.$set(t.feedbackForm,"content",e)},expression:"feedbackForm.content"}})],1)],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.feedbackDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sendFeedback}},[t._v("提交我的建议")])],1)],1),t._v(" "),t.isShowChangeUname?s("change-uname",{attrs:{info:t.User},on:{changeUname:t.updateInfo}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"new-Rhaed"},[e("img",{attrs:{src:"static/image/logo.png",alt:""}}),this._v(" "),e("h5",[this._v("通知公告")]),this._v(" "),e("span",[this._v("Announcements")]),this._v(" "),e("div",{staticStyle:{width:"137px",height:"1px","background-color":"#ffb400",margin:"8px auto 0"}})])}]};var K=s("VU/8")(W,J,!1,function(t){s("0aVd")},"data-v-6c9e858c",null).exports;var G={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getRankList:function(t,e){return ji(t,{params:e}).then(function(t){return p.a.resolve(t.data)})},getAllRankList:function(t,e,s){return ji(t,{page:e,pagesize:s}).then(function(t){return p.a.resolve(t.data)})},getSomeoneRank:function(t,e,s,i,a,n){return ji(t,{page:e,pagesize:s,nick:i,type:a,class_id:n}).then(function(t){return p.a.resolve(t.data)})}},Y={components:{Information:H},data:function(){return{info:{},dialogVisible:!1,total:0,Page:1,Pagesize:20,rankTypeActive:"总榜",rankTypes:["总榜","月榜","周榜","日榜"],rankTypesOfClick:[],rankRangeActive:"全范围",rankRanges:[],currentPage:1,ajaxTableData:[],tableData:[],searchInput:"",infoData:"",rankType:"all",rankRange:null,tableLoading:!1,defaultImage:s("IT0F")}},methods:{handleSizeChange:function(t){this.Pagesize=t,this.getSearchList(this.Page,t,null,this.rankType,this.rankRange)},handleCurrentChange:function(t){this.Page=t,this.getSearchList(t,this.Pagesize,null,this.rankType,this.rankRange)},rankTypeChange:function(t){var e;1!==this.Page&&(this.Page=1),e="周榜"===t?"week":"月榜"===t?"month":"日榜"===t?"day":"all",this.rankType=e,this.getSearchList(1,20,this.searchInput,this.rankType,this.rankRange),this.rankTypeActive=t},rankRangeChange:function(t){var e;if(1!==this.Page&&(this.Page=1),"班级榜"===t)e=this.info.code.slice(0,this.info.code.length-2);else{if("年级榜"===t)return this.$message({message:"暂无此筛选范围，敬请期待",type:"warning",duration:1e3,showClose:!0}),void(e=null);if("学校榜"===t)return this.$message({message:"暂无此筛选范围，敬请期待",type:"warning",showClose:!0,duration:1e3}),void(e=null);e=null}this.rankRange=e,this.getSearchList(1,20,this.searchInput,this.rankType,this.rankRange),this.rankRangeActive=t},filterTableDateList:function(t){for(var e=[],s=0;s<t.length;s++){var i={};i.submit=t[s].submit,i.pass=t[s].solved,i.uid=t[s].uid,i.nick=t[s].nick,i.signature=t[s].signature,i.passRate=(t[s].solved/t[s].submit*100).toFixed(2),i.userImage=t[s].avatarUrl?t[s].avatarUrl:this.defaultImage,e.push(i)}return e},obtainData:function(){G.getRankList("/ranks").then(function(t){}).catch(function(t){})},getAllList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=this;G.getAllRankList("/rank_all",t,e).then(function(i){s.total=i.total,s.ajaxTableData=i.data,s.tableData=s.filterTableDateList(s.ajaxTableData);for(var a=0;a<i.data.length;a++)s.tableData[a].ranking=e*(t-1)+a+1})},getSearchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.searchInput,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments[4],n=this;n.tableLoading=!0,G.getSomeoneRank("/rank_all",t,e,s,i,a).then(function(s){n.total=s.total,n.ajaxTableData=s.data,n.tableData=n.filterTableDateList(n.ajaxTableData);for(var i=0;i<s.data.length;i++)n.tableData[i].ranking=e*(t-1)+i+1;n.tableLoading=!1})},getinfo:function(t){this.infoData=null,this.dialogVisible=!0,this.infoData=t.uid},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;G.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.limitRangeChoose()})}},limitRangeChoose:function(){"2"===this.info.identity?this.rankRanges=["全范围","学校榜"]:"1"===this.info.identity?this.rankRanges=["全范围","班级榜","年级榜","学校榜"]:this.rankRanges=[]}},created:function(){this.getListInfo(),this.rankType=this.$route.query.rankType,void 0!==this.rankType?this.getSearchList(1,20,null,this.rankType,null):this.getSearchList(1,20,null,null,null),this.rankTypeActive=null==this.rankType?"总榜":"all"===this.rankType?"总榜":"month"===this.rankType?"月榜":"week"===this.rankType?"周榜":"日榜"}},X={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"rank"},[s("div",{staticClass:"rank-search"},[s("el-row",{attrs:{gutter:100}},[s("el-col",{attrs:{span:0!==t.rankRanges.length?2:4}},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.rankTypeChange}},[s("el-button",{attrs:{size:"small"}},[t._v("\n                  "+t._s(t.rankTypeActive)+"    "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.rankTypes,function(e,i){return e!==t.rankTypeActive?s("el-dropdown-item",{key:i,attrs:{command:e}},[t._v("   "+t._s(e)+"    ")]):t._e()}))],1)],1),t._v(" "),0!==t.rankRanges.length?s("el-col",{attrs:{span:2}},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.rankRangeChange}},[s("el-button",{attrs:{size:"small"}},[t._v("\n                  "+t._s(t.rankRangeActive)+"    "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.rankRanges,function(e,i){return e!==t.rankRangeActive?s("el-dropdown-item",{key:i,attrs:{command:e}},[t._v("   "+t._s(e)+"    ")]):t._e()}))],1)],1):t._e(),t._v(" "),s("el-col",{attrs:{span:7,offset:13}},[s("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"用户昵称/姓名搜索"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getSearchList(1,20)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.getSearchList(1,20)}},slot:"append"})],1)],1)],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{label:"名次",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.ranking?s("span",{staticStyle:{color:"rgb(248, 208, 28)"}},[s("i",{staticClass:"icon-diyi"})]):2==e.row.ranking?s("span",{staticStyle:{color:"rgb(190, 197, 204)"}},[s("i",{staticClass:"icon-dier"})]):3==e.row.ranking?s("span",{staticStyle:{color:"rgb(208, 153, 106)"}},[s("i",{staticClass:"icon-disan"})]):s("span",[t._v(t._s(e.row.ranking))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"昵称",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"rankUserName",staticStyle:{cursor:"pointer"},on:{click:function(s){t.getinfo(e.row)}}},[s("img",{staticClass:"userImage",attrs:{src:e.row.userImage}}),t._v("\n            "+t._s(e.row.nick)+"\n          ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"signature","show-overflow-tooltip":"",label:"签名",width:"550px",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{property:"pass",label:"解决"}}),t._v(" "),s("el-table-column",{attrs:{property:"submit",label:"提交"}}),t._v(" "),s("el-table-column",{attrs:{label:"通过率"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.passRate>=80?"green":e.row.passRate>=40?"blue":"red"},[t._v(t._s(e.row.passRate)+"%")])]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:"学生信息",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("Information",{attrs:{information:t.infoData}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{"current-page":t.Page,"page-sizes":[10,20,50,100],"page-size":20,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var Z=s("VU/8")(Y,X,!1,function(t){s("ROCT")},"data-v-4ae7a94c",null).exports,tt=s("BO1k"),et=s.n(tt),st={props:{imgSize:{type:String,default:"150px"},marginTop:{type:String,default:"10px"},user:{type:Object}},data:function(){return{}},mounted:function(){this.user.avatarurl=Bi+"/"+this.user.avatarurl}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-card"},[s("img",{staticClass:"img",style:{width:t.imgSize,height:t.imgSize},attrs:{src:t.user.avatarurl,alt:""}}),t._v(" "),s("div",{staticClass:"badge-area"},t._l(t.user.job,function(e,i){return s("span",{key:i,staticClass:"item blue",class:{green:0===i}},[t._v(t._s(e))])})),t._v(" "),s("div",{staticClass:"desc-area",style:{marginTop:t.marginTop}},[s("span",{staticClass:"name"},[t._v(t._s(t.user.name))]),t._v(" "),s("span",{staticClass:"desc"},[t._v(t._s(t.user.description))])])])},staticRenderFns:[]};var at={getUsList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})}},nt={components:{userCard:s("VU/8")(st,it,!1,function(t){s("tSUP")},"data-v-07c13722",null).exports},data:function(){return{boss:{image:"",name:"",desc:"",badges:[]},users:[],grade2012:[],grade2013:[],grade2014:[],grade2015:[],grade2016:[],grade2018:[],activeIndex:["1","2","3","4","5","6"]}},methods:{getUsList:function(){var t=this;at.getUsList("/about_us?pagesize=100").then(function(e){t.boss=e.data[0],e.data.shift(),e.data.sort(function(t,e){return t.grade-e.grade}),t.users=e.data;for(var s=0;s<e.data.length;s++)t["grade"+e.data[s].grade].push(e.data[s]);t.sort("2016",["刘欢进","卢丽莎","谢嘉慧","林凯","唐富"],["李豪"]),t.sort("2018",["陈惠香"])})},sort:function(t,e,s){var i=this,a=[],n=[],o=function(e){a.push(i["grade"+t].find(function(t){return t.name===e}))},r=!0,l=!1,c=void 0;try{for(var u,d=et()(e);!(r=(u=d.next()).done);r=!0){o(u.value)}}catch(t){l=!0,c=t}finally{try{!r&&d.return&&d.return()}finally{if(l)throw c}}var p=function(e){n.unshift(i["grade"+t].find(function(t){return t.name===e}))},h=!0,f=!1,m=void 0;try{for(var g,_=et()(s);!(h=(g=_.next()).done);h=!0){p(g.value)}}catch(t){f=!0,m=t}finally{try{!h&&_.return&&_.return()}finally{if(f)throw m}}this["grade"+t].forEach(function(t){[].concat(a,n).indexOf(t)<0&&a.push(t)}),this["grade"+t]=[].concat(a,n)}},created:function(){this.getUsList()}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about-us"},[s("el-row",[s("el-col",[t.boss.id?s("user-card",{attrs:{imgSize:"200px",marginTop:"20px",user:t.boss}}):t._e()],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[s("el-collapse",{model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[0!==t.grade2012.length?s("el-collapse-item",{attrs:{name:"1"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2012级")])]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-around"}},t._l(t.grade2012,function(e,i){return s("el-col",{key:i,attrs:{xs:24,sm:12,md:6,lg:6}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e(),t._v(" "),0!==t.grade2013.length?s("el-collapse-item",{attrs:{name:"2"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2013级")])]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-around"}},t._l(t.grade2013,function(e,i){return s("el-col",{key:i,attrs:{xs:24,sm:12,md:6,lg:6}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e(),t._v(" "),0!==t.grade2014.length?s("el-collapse-item",{attrs:{name:"3"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2014级")])]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-around"}},t._l(t.grade2014,function(e,i){return s("el-col",{key:i,attrs:{xs:24,sm:12,md:6,lg:6}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e(),t._v(" "),0!==t.grade2015.length?s("el-collapse-item",{attrs:{name:"4"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2015级")])]),t._v(" "),s("el-row",{attrs:{type:"flex",justify:"space-around"}},t._l(t.grade2015,function(e,i){return s("el-col",{key:i,attrs:{xs:24,sm:12,md:6,lg:6}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e(),t._v(" "),0!==t.grade2016.length?s("el-collapse-item",{attrs:{name:"5"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2016级")])]),t._v(" "),s("el-row",{staticStyle:{"text-align":"center"}},t._l(t.grade2016,function(e,i){return s("div",{key:i,staticStyle:{display:"inline-block",width:"20%"}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e(),t._v(" "),0!==t.grade2018.length?s("el-collapse-item",{attrs:{name:"6"}},[s("template",{slot:"title"},[s("p",{staticStyle:{"text-align":"center"}},[t._v("2018级")])]),t._v(" "),s("el-row",{staticStyle:{"text-align":"center"}},t._l(t.grade2018,function(e,i){return s("div",{key:i,staticStyle:{display:"inline-block",width:"20%"}},[e.id?s("user-card",{attrs:{user:e}}):t._e()],1)}))],2):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var rt=s("VU/8")(nt,ot,!1,function(t){s("LTAl")},"data-v-d65ceb24",null).exports;var lt={getStatusList:function(t,e,s,i,a,n){return ji(t,{page:e,pagesize:s,problem_id:a,nick:i,result:n}).then(function(t){return p.a.resolve(t.data)})},getPersonCode:function(t,e){return ji(t,{solution_id:e}).then(function(t){return p.a.resolve(t.data)})}};var ct={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getQuestionDetail:function(t,e){return ji(t,{problem_id:e.problem_id,language:e.language}).then(function(t){return p.a.resolve(t.data)})},postAnswer:function(t,e){return Qi(t,e).then(function(t){return p.a.resolve(t.data)})},getQuestionResult:function(t,e){return ji(t,{problem_id:e}).then(function(t){return p.a.resolve(t.data)})},getOtherQuestion:function(t,e){return ji(t,e).then(function(t){return p.a.resolve(t.data)})},getStatusHistoryList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize,problem_id:e.problem_id,status:e.status,language:e.language}).then(function(t){return p.a.resolve(t.data)})},getStatusRankList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize,problem_id:e.problem_id,status:e.status,language:e.language,rank:e.rank}).then(function(t){return p.a.resolve(t.data)})},getSolutionsList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize,problem_id:e.problem_id}).then(function(t){return p.a.resolve(t.data)})},shareMyCode:function(t,e){return Vi(t,{solution_id:e.solution_id,content:e.content}).then(function(t){return p.a.resolve(t.data)})},cancelShareMyCode:function(t,e){return Wi(t,{forum_solution_id:e}).then(function(t){return p.a.resolve(t.data)})},setLike:function(t,e){return Vi(t,{forum_solution_id:e}).then(function(t){return p.a.resolve(t.data)})},cancelLike:function(t,e){return Wi(t,{forum_solution_id:e}).then(function(t){return p.a.resolve(t.data)})},getMySolutions:function(t,e){return ji(t,{problem_id:e.problem_id,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})}},ut={components:{Information:H},data:function(){return{total:0,page:1,size:20,questionNum:"",userName:"",status:"",dialogVisible:!1,tableData:[],infoData:"",statusOptions:[{label:"全部状态",value:null},{label:"Waiting...",value:1},{label:"Compiling...",value:2},{label:"Running",value:3},{label:"Accept",value:4},{label:"Presenting Error",value:5},{label:"Wrong Answer",value:6},{label:"Time Limit Exceed",value:7},{label:"memory Limit Exceed",value:8},{label:"Output Limit Exceed",value:9},{label:"Runtime Error",value:10},{label:"Compile Error",value:11}],currentQuestion:{},sessionInfo:{uid:""},tableLoading:!1,ifShowCode:!1,myCode:""}},methods:{toDetailInfo:function(t){var e=this;t.uid===this.sessionInfo.uid&&(this.ifShowCode=!0,lt.getPersonCode("/states/code",t.solution_id).then(function(t){e.myCode=t.data}))},copyText:function(){document.getElementById("codeBox").select(),document.execCommand("copy"),this.$message({message:"复制成功",type:"success"}),"getSelection"in window?window.getSelection().removeAllRanges():document.selection.empty()},toProblemDetail:function(t){if(1===t.protype)this.getQuestionData(t.problem_id,t.protype);else if(2===t.protype)this.getQuestionData(t.problem_id,t.protype);else if(3===t.protype)if("N"===t.defunct){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t.problem_id}}).href;window.open(e,"_blank")}else this.$message("该题目为竞赛题"),this.$router.push({path:"/competition",name:"competition",params:{competitionId:1091}});else 4===t.protype?this.getQuestionData(t.problem_id,t.protype):5===t.protype&&this.getQuestionData(t.problem_id,t.protype)},getQuestionData:function(t,e){var s=this;ct.getQuestionDetail("/problems/detail",t).then(function(i){s.setCurrentQuestion(t,e,i.data),s.showDoPlan=!0})},setCurrentQuestion:function(t,e,s){var i={};if(i.questionTitle=s.info.description,i.title=s.info.title,i.belongType=e,i.PID=t,1===e)void 0!==s.code&&(i.questionAnswer=s.sample_output,i.userAnswer=s.code);else if(2===e){i.answers=[];["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].forEach(function(t){s.info["option"+t]&&i.answers.push(s.info["option"+t])}),void 0!==s.code&&(i.questionAnswer=s.sample_output,i.userAnswer=s.code)}else 4===e||5===e&&(i.answers=["True","False"],void 0!==s.code&&(i.questionAnswer=parseInt(s.sample_output),i.userAnswer=parseInt(s.code)));this.currentQuestion=i},sreachList:function(){1!==this.page&&(this.page=1),this.getList(this.page,this.size,this.userName,this.questionNum,this.status)},getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=this;n.tableLoading=!0,lt.getStatusList("/states",t,e,s,i,a).then(function(t){n.total=t.total,n.tableData=t.data;for(var e=[],s=0;s<t.data.length;s++)e=t.data[s].in_date.split("T"),n.tableData[s].in_date=e[0]+" "+e[1];n.tableLoading=!1})},getinfo:function(t){this.infoData=null,this.dialogVisible=!0,this.infoData=t.uid},handleSizeChange:function(t){this.size=t,this.getList(this.page,t,this.userName,this.questionNum,this.status)},handleCurrentChange:function(t){this.page=t,this.getList(t,this.size,this.userName,this.questionNum,this.status)}},created:function(){this.sessionInfo=JSON.parse(window.sessionStorage.getItem("userInfo")),null!==this.sessionInfo&&void 0!==this.sessionInfo||(this.sessionInfo=[{uid:""}]),this.getList()}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"status"},[s("div",{staticClass:"status-search"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:4}},[s("el-input",{attrs:{size:"small",placeholder:"请输入题号"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.sreachList(e):null}},model:{value:t.questionNum,callback:function(e){t.questionNum=e},expression:"questionNum"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"small",placeholder:"请输入用户昵称/姓名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.sreachList(e):null}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{size:"small",placeholder:"--可以选择不同的状态"},on:{change:t.sreachList},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"statusButton"},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.sreachList}},[t._v("搜索")])],1)])],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{align:"center",label:"题号",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"statusProblemTitle",on:{click:function(s){t.toProblemDetail(e.row)}}},[t._v(t._s(e.row.problem_id))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"statusUserName",staticStyle:{cursor:"pointer"},on:{click:function(s){t.getinfo(e.row)}}},[t._v(t._s(e.row.nick))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"结果",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.result?s("span",{},[t._v("Waiting...")]):t._e(),t._v(" "),2===e.row.result?s("span",{},[t._v("Compiling...")]):t._e(),t._v(" "),3===e.row.result?s("span",{},[t._v("Running")]):t._e(),t._v(" "),4===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#67C23A",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Accept")]):t._e(),t._v(" "),5===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#F56C6C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Presenting Error")]):t._e(),t._v(" "),6===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#F56C6C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Wrong Answer")]):t._e(),t._v(" "),7===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#E6A23C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Time Limit Exceed")]):t._e(),t._v(" "),8===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#E6A23C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("memory Limit Exceed")]):t._e(),t._v(" "),9===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#E6A23C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Output Limit Exceed")]):t._e(),t._v(" "),10===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#F56C6C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Runtime Error")]):t._e(),t._v(" "),11===e.row.result?s("span",{class:t.sessionInfo.uid===e.row.uid?"isSelf":"noSelf",staticStyle:{color:"#F56C6C",transition:"all 0.4s"},on:{click:function(s){t.toDetailInfo(e.row)}}},[t._v("Compile Error")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"耗时"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.time)+"ms")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"内存"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.memory)+"KB")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"语言"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.language?s("span",{staticClass:"language cColor"},[t._v("C")]):t._e(),t._v(" "),1===e.row.language?s("span",{staticClass:"language cpColor"},[t._v("C++")]):t._e(),t._v(" "),3===e.row.language?s("span",{staticClass:"language javaColor"},[t._v("Java")]):t._e(),t._v(" "),6===e.row.language?s("span",{staticClass:"language pyColor"},[t._v("Python")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"代码长度"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.code_length)+"B")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"in_date",label:"时间",align:"center",width:"180"}})],1),t._v(" "),s("el-dialog",{attrs:{title:"用户信息",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("Information",{attrs:{information:t.infoData}})],1),t._v(" "),s("div",{staticClass:"status-pagination"},[s("el-pagination",{attrs:{"page-size":20,"current-page":t.page,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),s("div",{staticClass:"showCode"},[s("el-dialog",{attrs:{title:"答题代码",visible:t.ifShowCode,"show-close":"",width:"55%"},on:{"update:visible":function(e){t.ifShowCode=e}}},[s("textarea",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"codeBox",readonly:"true"},domProps:{innerHTML:t._s(t.myCode)}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"Info"},on:{click:t.copyText}},[t._v("复 制")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.ifShowCode=!1}}},[t._v("确 定")])],1)])],1)])},staticRenderFns:[]};var pt=s("VU/8")(ut,dt,!1,function(t){s("Wfb/")},"data-v-39f95168",null).exports,ht=s("NYxO");var ft={PostLoginData:function(t,e,s){return Vi(t,{username:e,password:s}).then(function(t){return p.a.resolve(t.data)})},postRegistData:function(t,e,s,i,a){return Vi(t,{username:e,password:s,nickname:i,captchacode:a}).then(function(t){return p.a.resolve(t.data)})},getCodepic:function(t){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},logout:function(t){return ji(t).then(function(t){return p.a.resolve(t.data)})}},mt={data:function(){return{src:"",maxNameLen:20,loginFrom:{user:"",password:"",checkCode:""},registFrom:{username:"",password:"",rePassword:"",nick:"",captchacode:""},loginShow:!0}},methods:l()({},Object(ht.c)(["TOGGLE_HEADER","TOGGLE_FOOTER","SET_USER"]),{showRegister:function(){this.loginShow=!1,this.getCode()},showLogin:function(){this.loginShow=!0},keyDownLogin:function(){this.Login()},Login:function(){var t=this;return t.loginFrom.user?t.loginFrom.password?void ft.PostLoginData("/users/login/",t.loginFrom.user,t.loginFrom.password).then(function(e){var s=e.data;"true"===e.success&&10002===e.status?(t.$message({type:"success",message:"登陆成功",showClose:!0}),setTimeout(function(){t.$message.closeAll()},1e3),t.getUserData(s.user_info),t.SET_USER(s.user_info),t.$route.query.redirect?t.$router.push({path:t.$route.query.redirect}):t.$router.push({path:"/index",name:"index",params:{dataObj:s}})):t.$message({type:"error",message:e.msg,showClose:!0})}):(t.$alert("请输入密码","提示"),!1):(t.$message("请输入账号","提示"),!1)},register:function(){var t=this,e=t.checkRegister();if(!e.flag)return t.$alert(e.msg,"提示"),!1;ft.postRegistData("/users/register/",t.registFrom.username,t.registFrom.password,t.registFrom.nick,t.registFrom.captchacode).then(function(e){"false"===e.data.success?(t.$alert(e.msg,"提示"),t.getCode()):t.$confirm(e.msg,"欢迎",{confirmButtonText:"确定"}).then(function(){t.$router.push({path:"/login"})})})},checkRegister:function(){return this.registFrom.username?this.registFrom.nick?(0===this.registFrom.nick.indexOf("GPNU_")?/^[-\w\u4e00-\u9fa5]{2,20}$/:/^[-\w\u4e00-\u9fa5]{2,14}$/).test(this.registFrom.nick)?this.registFrom.password?this.registFrom.rePassword!==this.registFrom.password?{flag:!1,msg:"两次输入的密码不相同"}:this.registFrom.captchacode?{flag:!0}:{flag:!1,msg:"请输入验证码"}:{flag:!1,msg:"请填写密码"}:{flag:!1,msg:"昵称不符合规格"}:{flag:!1,msg:"请填写用户昵称"}:{flag:!1,msg:"请填写账号"}},getCode:function(){this.src=Bi+"/captcha?_t="+(new Date).getTime()},getUserData:function(t){if(this.SET_USER(t||{}),!window.sessionStorage)return alert("浏览器不支持localstorage"),!1;var e=window.sessionStorage,s=u()(t);e.setItem("userInfo",s)}}),mounted:function(){this.TOGGLE_HEADER(!1),this.TOGGLE_FOOTER(!1)},beforeDestroy:function(){this.TOGGLE_HEADER(!0),this.TOGGLE_FOOTER(!0)},created:function(){-1===this.$route.query.show&&this.showRegister()}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[t._m(0),t._v(" "),i("div",{staticClass:"form-pad"},[i("router-link",{staticClass:"back",attrs:{to:"/",tag:"a"}},[t._v("返回首页")]),t._v(" "),i("img",{staticClass:"login-bg",attrs:{src:s("uxEE")}}),t._v(" "),i("transition",{attrs:{name:"fade",mode:"in-out"}},[t.loginShow?i("div",{staticClass:"login-pad"},[i("p",{staticClass:"login-title"},[t._v("登录，开始")]),t._v(" "),i("el-form",{staticClass:"login-from",attrs:{model:t.loginFrom}},[i("el-form-item",[i("el-input",{attrs:{"prefix-icon":"icon-name",placeholder:"请输入账号"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keyDownLogin(e):null}},model:{value:t.loginFrom.user,callback:function(e){t.$set(t.loginFrom,"user",e)},expression:"loginFrom.user"}})],1),t._v(" "),i("el-form-item",[i("el-input",{attrs:{type:"password","prefix-icon":"icon-password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.keyDownLogin(e):null}},model:{value:t.loginFrom.password,callback:function(e){t.$set(t.loginFrom,"password",e)},expression:"loginFrom.password"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.Login}},[t._v("立即登录")])],1)],1),t._v(" "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("还没有账号? "),i("a",{staticStyle:{cursor:"pointer",color:"#228899"},on:{click:t.showRegister}},[t._v("立即注册")])])],1):i("div",{staticClass:"register-pad"},[i("p",{staticClass:"login-title"},[t._v("开始您的算法之旅")]),t._v(" "),i("el-form",{staticClass:"login-from",attrs:{model:t.registFrom}},[i("el-form-item",[i("el-input",{attrs:{"prefix-icon":"icon-email",placeholder:"请输入邮箱，该邮箱将作为你的登录账号"},model:{value:t.registFrom.username,callback:function(e){t.$set(t.registFrom,"username",e)},expression:"registFrom.username"}})],1),t._v(" "),i("el-form-item",[i("el-input",{attrs:{"prefix-icon":"icon-name",placeholder:"请输入昵称"},model:{value:t.registFrom.nick,callback:function(e){t.$set(t.registFrom,"nick",e)},expression:"registFrom.nick"}})],1),t._v(" "),i("el-form-item",[i("el-input",{attrs:{type:"password","prefix-icon":"icon-password",placeholder:"请输入密码"},model:{value:t.registFrom.password,callback:function(e){t.$set(t.registFrom,"password",e)},expression:"registFrom.password"}})],1),t._v(" "),i("el-form-item",[i("el-input",{attrs:{type:"password","prefix-icon":"icon-password",placeholder:"再次输入密码"},model:{value:t.registFrom.rePassword,callback:function(e){t.$set(t.registFrom,"rePassword",e)},expression:"registFrom.rePassword"}})],1),t._v(" "),i("el-form-item",[i("el-col",{attrs:{span:12}},[i("el-input",{attrs:{type:"text","prefix-icon":"icon-password",placeholder:"输入验证码"},model:{value:t.registFrom.captchacode,callback:function(e){t.$set(t.registFrom,"captchacode",e)},expression:"registFrom.captchacode"}})],1),t._v(" "),i("el-col",{attrs:{span:2}}),t._v(" "),i("el-col",{attrs:{span:10}},[i("img",{staticStyle:{height:"40px","margin-left":"50px"},attrs:{src:t.src},on:{click:t.getCode}})])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("注册")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success"},on:{click:t.showLogin}},[t._v("登录")])],1)],1)],1)])],1),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticStyle:{width:"1170px",margin:"0 auto"}},[e("span",[this._v("您好，欢迎来到本平台")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("ul",[e("li",[e("i",{staticClass:"el-icon-success"},[this._v("在线判题")])]),this._v(" "),e("li",[e("i",{staticClass:"el-icon-document"},[this._v("线上学习")])]),this._v(" "),e("li",[e("i",{staticClass:"el-icon-star-on"},[this._v("关于我们")])])]),this._v(" "),e("span",[e("a",{attrs:{href:"http://www.miitbeian.gov.cn",target:"_blank"}},[this._v("@copyright www.gpnuacm.com 粤ICP备18111867号")])])])}]};var _t=s("VU/8")(mt,gt,!1,function(t){s("Ihs/")},"data-v-6f2b1b62",null).exports,vt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"library"},[e("transition",{attrs:{name:"fade"}},[e("router-view")],1)],1)},staticRenderFns:[]};var bt=s("VU/8")({data:function(){return{}}},vt,!1,function(t){s("31F8")},"data-v-1d8a1ead",null).exports;var yt={getQuestionList:function(t,e){return ji(t,{params:e}).then(function(t){return p.a.resolve(t.data)})},getQuestionDetail:function(t,e){return ji(t,{problem_id:e}).then(function(t){return p.a.resolve(t.data)})},getProblemsList:function(t,e,s,i,a,n){return void 0!==i?ji(t,{page:e,pagesize:s,title:i.title,problem_type:i.type,problem_id:i.problemId,accept_rate:i.acceptRate,tagid:a,courses_id:n,defunct:"N"}).then(function(t){return p.a.resolve(t.data)}):ji(t,{page:e,pagesize:s,courses_id:n}).then(function(t){return p.a.resolve(t.data)})},postAnswer:function(t,e){return Qi(t,e).then(function(t){return p.a.resolve(t.data)})}},wt={data:function(){return{showDoPlan:!1}},methods:{disabledMouseWheel:function(){this.showDoPlan&&(document.addEventListener("DOMMouseScroll",this.scrollFunc,!1),document.addEventListener("mousewheel",this.scrollFunc,!1))},cancelDisMouseWheel:function(){document.removeEventListener("DOMMouseScroll",this.scrollFunc,!1),document.removeEventListener("mousewheel",this.scrollFunc,!1)},scrollFunc:function(t){return(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1),!1}},beforeDestroy:function(){this.cancelDisMouseWheel()},watch:{showDoPlan:function(t){t?this.disabledMouseWheel():this.cancelDisMouseWheel()}}},Ct={data:function(){return{activeName:"1",tagTree:[],activeTitleIndex:-1,activeItemIndex:-1,defaultProps:{children:"children",label:"label"},treeData:[]}},methods:{handleClickTag:function(t,e,s){this.activeTitleIndex=t,this.activeItemIndex=e,this.$emit("changeTagId",s)},recursiveData:function(t,e,s,i){for(var a in t){var n={value:a,label:s[a],isFather:i,children:[]};if(e.push(n),t[a]==={})break;this.recursiveData(t[a],e,s,a)}return e},initTagTree1:function(){var t=this,e=[],s=[],i=[],a=[];yt.getQuestionList("/tags").then(function(n){e=n.data.tag_dict,s=n.data.tag_tree,t.recursiveData(s,i,e,"0");for(var o=0;o<i.length;o++)for(var r=0;r<i.length;r++)i[o].value===i[r].isFather&&i[o].children.push(i[r]);for(var l=0;l<i.length;l++)"0"===i[l].isFather&&a.push(i[l]);t.treeData=a})},handleNodeClick:function(t){0===t.children.length&&this.$emit("changeTagId",parseInt(t.value))},initTagTree:function(){var t=this,e=[],s=[];yt.getQuestionList("/tags").then(function(i){for(var a in e=i.data.tag_dict,s=i.data.tag_tree){var n={key:a,label:e[a],children:t.initTree(e,s[a])};t.tagTree.push(n)}})},objEmpty:function(t){for(var e in t)return!1;return!0},initTree:function(t,e){if(this.objEmpty(e))return[];var s=[];for(var i in e){var a={id:i,label:t[i]};s.push(a)}return s},getSubscript:function(){}},created:function(){this.initTagTree(),this.initTagTree1();var t=window.document.body;window.document.body.onmouseover=function(e){"el-tree-node__label"===(t=e.target).className&&!t.classList.contains("label-over-height")&&t.clientWidth>120&&t.classList.add("label-over-height")}},watch:{}},kt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left-frame"},[s("div",{staticClass:"frame-head",class:{"tag-active":-1===t.activeTitleIndex},on:{click:function(e){e.stopPropagation(),t.handleClickTag(-1,-1,null)}}},[t._v("全部题目")]),t._v(" "),s("el-tree",{attrs:{data:t.treeData,props:t.defaultProps},on:{"node-click":t.handleNodeClick}})],1)},staticRenderFns:[]};var Tt=s("VU/8")(Ct,kt,!1,function(t){s("M65j")},"data-v-6edf9fa6",null).exports,St={props:{question:{type:Object},isExamPaper:{type:Boolean,default:!1},isBrowse:{type:Boolean,default:!1},maxHeight:{type:Boolean,default:!1}},computed:{getActiveIndex:function(){return this.activeIndex}},data:function(){return{activeIndex:-1}},methods:{handleMouseEnter:function(){this.$emit("enter")},handleMouseLeave:function(){this.$emit("leave")},convert:function(t){return String.fromCharCode(t+65)},toNumber:function(t){return t.toUpperCase().charCodeAt(0)-64},selectAnswer:function(t){void 0===this.question.questionAnswer&&(this.activeIndex=t)},setUserAnswer:function(t){t?this.activeIndex=-1:void 0!==this.question.userAnswer&&(this.activeIndex=this.question.userAnswer.toUpperCase().charCodeAt(0)-65)}},mounted:function(){this.question.userAnswer&&(this.activeIndex=this.question.userAnswer.toUpperCase().charCodeAt(0)-65)}},xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"choice-question",class:{"max-height":t.maxHeight},on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[t.isExamPaper?s("p",{staticClass:"current-question"},[t._v(t._s(t.question.belongTypeTitle)+t._s(t.question.questionNum)+" ("+t._s(t.question.questionBonus)+"分)")]):t._e(),t._v(" "),s("p",{staticClass:"question-title",class:{"preview-title":t.isBrowse},domProps:{innerHTML:t._s(t.question.questionTitle)}}),t._v(" "),s("div",{staticClass:"answer-area"},t._l(t.question.answers,function(e,i){return s("div",{key:i,staticClass:"option",class:{active:void 0===t.question.questionAnswer&&t.activeIndex===i,pass:void 0!==t.question.questionAnswer&&t.toNumber(t.question.questionAnswer)-1===i,error:void 0!==t.question.questionAnswer&&void 0!==t.question.userAnswer&&t.question.questionAnswer!==t.question.userAnswer&&t.toNumber(t.question.userAnswer)-1===i},on:{click:function(e){t.selectAnswer(i)}}},[s("span",{staticClass:"label"},[t._v(t._s(t.convert(i))+":")]),t._v(" "),s("p",{staticClass:"data",domProps:{innerHTML:t._s(e)}})])}))])},staticRenderFns:[]};var Dt=s("VU/8")(St,xt,!1,function(t){s("zyEe")},"data-v-70f86f56",null).exports,qt={props:{question:{type:Object},isExamPaper:{type:Boolean,default:!1},isBrowse:{type:Boolean,default:!1}},computed:{getQuestionAnswer:function(){return this.question.questionAnswer},getUserAnswer:function(){return this.answer}},data:function(){return{answer:""}},methods:{setUserAnswer:function(t){t?this.answer="":void 0!==this.question.userAnswer&&(this.answer=this.question.userAnswer)}},mounted:function(){this.answer=this.question.userAnswer?this.question.userAnswer:this.question.questionAnswer?this.question.questionAnswer:""}},It={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"analyze-question"},[t.isExamPaper?s("p",{staticClass:"current-question"},[t._v(t._s(t.question.belongTypeTitle)+t._s(t.question.questionNum))]):t._e(),t._v(" "),s("p",{staticClass:"question-title",class:{"preview-title":t.isBrowse},domProps:{innerHTML:t._s(t.question.questionTitle)}}),t._v(" "),s("div",{staticClass:"answer-area"},[t.isBrowse?t._e():s("el-input",{attrs:{type:"textarea",autosize:{minRows:15},placeholder:"请输入内容"},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}}),t._v(" "),void 0!==t.question.questionAnswer&&(void 0!==t.question.userAnswer&&t.question.questionAnswer===t.question.userAnswer||void 0===t.question.userAnswer)?s("p",{staticClass:"answer pass",domProps:{innerHTML:t._s(t.answer)}}):t._e(),t._v(" "),void 0!==t.question.questionAnswer&&void 0!==t.question.userAnswer&&t.question.questionAnswer!==t.question.userAnswer?s("p",{staticClass:"answer error",domProps:{innerHTML:t._s(t.question.userAnswer)}}):t._e()],1),t._v(" "),void 0!==t.question.questionAnswer&&void 0!==t.question.userAnswer&&t.question.questionAnswer!==t.question.userAnswer?s("div",{staticClass:"answer-area-error"},[t.isBrowse?t._e():s("span",[t._v("很抱歉，您做错了！")]),t._v(" "),s("span",{staticClass:"question-answer"},[t._v("正确答案是："+t._s(t.getQuestionAnswer))])]):t._e()])},staticRenderFns:[]};var zt=s("VU/8")(qt,It,!1,function(t){s("fA9g")},"data-v-3c503110",null).exports,Lt={props:{question:{type:Object},isExamPaper:{type:Boolean,default:!1},isBrowse:{type:Boolean,default:!1},maxHeight:{type:Boolean,default:!1}},computed:{getActiveIndex:function(){return this.activeIndex}},data:function(){return{activeIndex:-1}},methods:{handleMouseEnter:function(){this.$emit("enter")},handleMouseLeave:function(){this.$emit("leave")},convert:function(t){return String.fromCharCode(t+65)},selectAnswer:function(t){void 0===this.question.questionAnswer&&(this.activeIndex=t)},setUserAnswer:function(t){t?this.activeIndex=-1:void 0!==this.question.userAnswer&&(this.activeIndex=this.question.userAnswer?0:1)}},mounted:function(){void 0!==this.question.userAnswer&&(this.activeIndex=this.question.userAnswer?0:1)}},Pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"judgment-question",class:{"max-height":t.maxHeight},on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[t.isExamPaper?s("p",{staticClass:"current-question"},[t._v(t._s(t.question.belongTypeTitle)+t._s(t.question.questionNum)+" ("+t._s(t.question.questionBonus)+"分)")]):t._e(),t._v(" "),s("p",{staticClass:"question-title",class:{"preview-title":t.isBrowse},domProps:{innerHTML:t._s(t.question.questionTitle)}}),t._v(" "),s("div",{staticClass:"answer-area"},t._l(t.question.answers,function(e,i){return s("div",{key:i,staticClass:"option",class:{active:void 0===t.question.questionAnswer&&t.activeIndex===i,pass:void 0!==t.question.questionAnswer&&(t.question.questionAnswer-1===i||t.question.questionAnswer+1===i),error:void 0!==t.question.questionAnswer&&t.question.questionAnswer!==t.question.userAnswer&&(t.question.userAnswer-1===i||t.question.userAnswer+1===i)},on:{click:function(e){t.selectAnswer(i)}}},[s("span",{staticClass:"label"},[t._v(t._s(t.convert(i))+":")]),t._v(" "),s("p",{staticClass:"data"},[t._v(t._s(e))])])}))])},staticRenderFns:[]};var Rt=s("VU/8")(Lt,Pt,!1,function(t){s("OHpe")},"data-v-242e36e4",null).exports;function At(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(t[s]instanceof Array&&e[s]instanceof Array){if(!this.judgTwoArrayIsEqual(t[s],e[s]))return!1}else if(t[s]!==e[s])return!1;return!0}var Et={props:{question:{type:Object},isExamPaper:{type:Boolean,default:!1},isBrowse:{type:Boolean,default:!1},maxHeight:{type:Boolean,default:!1}},data:function(){return{}},computed:{getQuestionAnswer:function(){for(var t="",e=0;e<this.question.questionAnswer.length;e++)e===this.question.questionAnswer.length-1?t+=this.question.questionAnswer[e]:t+=this.question.questionAnswer[e]+"、";return t},judgIsTrue:function(){return At(this.question.questionAnswer,this.question.userAnswer)}},methods:{handleMouseEnter:function(){this.$emit("enter")},handleMouseLeave:function(){this.$emit("leave")},getInputValue:function(){for(var t=[],e=this.$refs.fillBlank.getElementsByClassName("fillblank"),s=0;s<e.length;s++)t.push(e[s].value);return t},setInputValue:function(t){t="string"==typeof t?t.split(","):t;for(var e=this.$refs.fillBlank.getElementsByClassName("fillblank"),s=0;s<t.length;s++)e[s].value=t[s]},setUserAnswer:function(t){if(t)for(var e=this.$refs.fillBlank.getElementsByClassName("fillblank"),s=0;s<e.length;s++)e[s].value="";else void 0!==this.question.userAnswer&&this.setInputValue(this.question.userAnswer)}},mounted:function(){if(this.isBrowse)for(var t=this.$refs.fillBlank.getElementsByClassName("fillblank"),e=0;e<t.length;e++)t[e].setAttribute("disabled","true"),this.question.userAnswer?(this.setInputValue(this.question.userAnswer),this.question.userAnswer[e]===this.question.questionAnswer[e]?t[e].setAttribute("class",t[e].getAttribute("class")+" pass"):t[e].setAttribute("class",t[e].getAttribute("class")+" error")):(this.setInputValue(this.question.questionAnswer),t[e].setAttribute("class",t[e].getAttribute("class")+" pass"));else if(this.question.userAnswer&&!this.question.questionAnswer)this.setInputValue(this.question.userAnswer);else if(this.question.questionAnswer)for(var s=this.$refs.fillBlank.getElementsByClassName("fillblank"),i="string"==typeof this.question.userAnswer?this.question.userAnswer.split(","):this.question.userAnswer,a="string"==typeof this.question.questionAnswer?this.question.questionAnswer.split(","):this.question.questionAnswer,n=0;n<s.length;n++)s[n].setAttribute("disabled","true"),s[n].value=i[n],i[n]===a[n]?s[n].setAttribute("class",s[n].getAttribute("class")+" pass"):s[n].setAttribute("class",s[n].getAttribute("class")+" error")},watch:{question:{handler:function(t){var e=this;this.$nextTick(function(){if(!e.isBrowse&&t.questionAnswer)for(var s=e.$refs.fillBlank.getElementsByClassName("fillblank"),i="string"==typeof t.userAnswer?t.userAnswer.split(","):t.userAnswer,a="string"==typeof t.questionAnswer?t.questionAnswer.split(","):t.questionAnswer,n=0;n<s.length;n++)s[n].setAttribute("disabled","true"),s[n].value=i[n],i[n]===a[n]?s[n].setAttribute("class",s[n].getAttribute("class")+" pass"):s[n].setAttribute("class",s[n].getAttribute("class")+" error")})},deep:!0,immediate:!0}}},Ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"fillBlank",staticClass:"fill-blank-question",on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave}},[t.isExamPaper?s("p",{staticClass:"current-question"},[t._v(t._s(t.question.belongTypeTitle)+t._s(t.question.questionNum)+" ("+t._s(t.question.questionBonus)+"分)")]):t._e(),t._v(" "),t.question.questionTitle?s("p",{staticClass:"question-title",class:{"max-height":t.maxHeight,"preview-title":t.isBrowse},domProps:{innerHTML:t._s(t.question.questionTitle)}}):t._e(),t._v(" "),void 0===t.question.questionAnswer||void 0===t.question.userAnswer||t.judgIsTrue?t._e():s("div",{staticClass:"answer-area-error"},[t.isBrowse?t._e():s("span",[t._v("很抱歉，您做错了！")]),t._v(" "),s("span",{staticClass:"question-answer"},[t._v("正确答案是："+t._s(t.getQuestionAnswer))])]),t._v(" "),!t.isBrowse&&t.judgIsTrue?s("div",{staticClass:"answer-area-pass"},[s("span",[t._v("恭喜，您答对了！")])]):t._e()])},staticRenderFns:[]};var $t={mixins:[wt],components:{leftFrame:Tt,choiceQuestion:Dt,analyzeQuestion:zt,judgmentQuestion:Rt,fillBlankQuestion:s("VU/8")(Et,Ft,!1,function(t){s("PqjM")},"data-v-36189a96",null).exports},data:function(){return{onlineUser:{},selectObj:{title:"",type:"",problemId:"",acceptRate:"",defunct:"N"},searchSize:10,total:0,problemTypes:[{value:1,label:"填空题"},{value:2,label:"选择题"},{value:3,label:"编程题"},{value:5,label:"判断题"},{label:"全部类型"}],passRates:[{value:1,label:"80%以上"},{value:2,label:"60%~80%"},{value:3,label:"40%~60%"},{value:4,label:"40%以下"},{label:"全部通过率"}],problemType:"",problemId:"",problemTitle:"",passRate:"",checked:"",tableData:[],isExamPaper:!1,showPlanTypeId:0,currentQuestion:{},userAnswer:"",tagId:null,questionPage:1,tableLoading:!1}},methods:{getTypeInProblemTypes:function(t){for(var e=0;e<this.problemTypes.length;e++)if(this.problemTypes[e].value===t)return this.problemTypes[e].label},checkTypeChange:function(){this.questionPage=1,this.selectType()},checkRateChange:function(){this.questionPage=1,this.selectType()},checkChange:function(){this.selectObj.type=this.problemType,this.selectObj.acceptRate=this.passRate,this.selectObj.title=this.problemTitle,this.selectObj.problemId=this.problemId},selectType:function(t){this.checkChange(),6===this.selectObj.type&&(this.selectObj.type=""),""!==this.problemType&&null!==this.problemType?this.getProblems(this.selectObj,t,this.tagId):""!==this.problemId&&null!==this.problemId?this.getProblems(this.selectObj,t,this.tagId):""!==this.problemTitle&&null!==this.problemTitle?this.getProblems(this.selectObj,t,this.tagId):(""!==this.passRate&&this.passRate,this.getProblems(this.selectObj,t,this.tagId))},changeTagId:function(t){this.questionPage=1,this.tagId=t,this.getProblems(this.selectObj,1,t)},toDetail:function(t){var e=t.PID,s=t.type;this.currentQuestion={};for(var i=0;i<this.problemTypes.length;i++)if(this.problemTypes[i].label===s){this.showPlanTypeId=this.problemTypes[i].value;break}if(1===this.showPlanTypeId)this.getQuestionData(e,this.showPlanTypeId);else if(2===this.showPlanTypeId)this.getQuestionData(e,this.showPlanTypeId);else if(3===this.showPlanTypeId){var a=this.$router.resolve({path:"/library/questionDetail",query:{PID:e}}).href;window.open(a,"_blank")}else 4===this.showPlanTypeId?this.getQuestionData(e,this.showPlanTypeId):5===this.showPlanTypeId&&this.getQuestionData(e,this.showPlanTypeId)},handleSubmit:function(){if(this.onlineUser.uid){var t=this;if(void 0!==this.currentQuestion.userAnswer)this.showDoPlan=!1;else{var e=[],s=!1;if(1===this.showPlanTypeId){e=this.$refs.fillBlankQuestion.getInputValue();for(var i=0;i<e.length;i++){if(!e[i]){s=!1;break}i===e.length-1&&(s=!0)}}else 2===this.showPlanTypeId?-1===(e=this.$refs.choiceQuestion.getActiveIndex)?s=!1:(e=String.fromCharCode(parseInt(e)+97),s=!0):4===this.showPlanTypeId||5===this.showPlanTypeId&&(-1===(e=this.$refs.judgmentQuestion.getActiveIndex)?s=!1:(s=!0,e=e?0:1));if(s){var a={problem_id:this.currentQuestion.PID,protype:this.currentQuestion.belongType,source:e,language:0};yt.postAnswer("/problems/submit",a).then(function(e){e.data.success&&t.getQuestionData(t.currentQuestion.PID,t.currentQuestion.belongType)})}}}else this.$message({showClose:!0,type:"error",message:"请先登录再做题哦！",duration:"2000"})},changeCurrentPage:function(t){this.questionPage=t,this.getProblems(this.selectObj,t,this.tagId)},getProblems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;i.tableLoading=!0,yt.getProblemsList("/problems",e,i.searchSize,t,s).then(function(t){i.total=t.total,i.tableData=i.filterTableDateList(t.data),i.tableLoading=!1})},getQuestionData:function(t,e){var s=this;ct.getQuestionDetail("/problems/detail",t).then(function(i){s.setCurrentQuestion(t,e,i.data),s.showDoPlan=!0})},setCurrentQuestion:function(t,e,s){var i={};if(i.questionTitle=s.info.description,i.title=s.info.title,i.belongType=e,i.PID=t,1===e)void 0!==s.code&&(i.questionAnswer=s.sample_output,i.userAnswer=s.code);else if(2===e){i.answers=[];["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].forEach(function(t){s.info["option"+t]&&i.answers.push(s.info["option"+t])}),void 0!==s.code&&(i.questionAnswer=s.sample_output,i.userAnswer=s.code)}else 4===e||5===e&&(i.answers=["True","False"],void 0!==s.code&&(i.questionAnswer=parseInt(s.sample_output),i.userAnswer=parseInt(s.code)));this.currentQuestion=i},filterTableDateList:function(t){for(var e=[],s=0;s<t.length;s++){var i={};i.PID=t[s].problem_id,i.title=t[s].title,i.label=t[s].tagnames,i.passRate=t[s].submit?(t[s].accepted/t[s].submit*100).toFixed(2):"0.00",i.passAsubmit=t[s].accepted+"/"+t[s].submit,i.type=this.getTypeInProblemTypes(t[s].problem_type),i.finished=t[s].finished,e.push(i)}return e}},created:function(){var t=window.sessionStorage.getItem("userInfo");this.onlineUser="undefined"!==t&&"string"==typeof t?JSON.parse(t):t||{},this.getProblems(this.selectObj)}},Ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"questionBank"},[s("div",{staticClass:"leftF"},[s("left-frame",{on:{changeTagId:t.changeTagId}})],1),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"search-area"},[s("span",{staticClass:"title"},[t._v("题目列表")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"select-area"},[s("i",{staticClass:"icon-sanjiaoxing-down"}),t._v(" "),s("el-select",{attrs:{placeholder:"全部类型"},on:{change:t.checkTypeChange},model:{value:t.problemType,callback:function(e){t.problemType=e},expression:"problemType"}},t._l(t.problemTypes,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",{staticClass:"input"},[s("i",{staticClass:"icon-sousuo"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.problemId,expression:"problemId"}],attrs:{type:"text",placeholder:"输入题目编号搜索"},domProps:{value:t.problemId},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.selectType(e):null},input:function(e){e.target.composing||(t.problemId=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input"},[s("i",{staticClass:"icon-sousuo"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.problemTitle,expression:"problemTitle"}],attrs:{type:"text",placeholder:"输入题目标题搜索"},domProps:{value:t.problemTitle},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.selectType(e):null},input:function(e){e.target.composing||(t.problemTitle=e.target.value)}}})]),t._v(" "),s("span",{staticClass:"select",on:{click:t.selectType}},[t._v("筛选")])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"select-area"},[s("i",{staticClass:"icon-sanjiaoxing-down"}),t._v(" "),s("el-select",{attrs:{placeholder:"通过率"},on:{change:t.checkRateChange},model:{value:t.passRate,callback:function(e){t.passRate=e},expression:"passRate"}},t._l(t.passRates,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])]),t._v(" "),s("div",{staticClass:"table-area question-bank-table-area"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""},on:{"row-click":t.toDetail}},[s("el-table-column",{attrs:{label:"",width:"30px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.onlineUser.uid&&e.row.finished?s("i",{staticClass:"icon-success",staticStyle:{color:"#075f60"}}):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"PID",label:"PID",width:"136px",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{label:"标签",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.label,function(e,i){return s("span",{key:i,staticClass:"type"},[t._v(t._s(e))])})}}])}),t._v(" "),s("el-table-column",{attrs:{property:"title","show-overflow-tooltip":"",label:"题目标题",width:"220px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"problem-title",domProps:{innerHTML:t._s(e.row.title)}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"通过率",width:"104px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.passRate>=80?"green":e.row.passRate>=40?"blue":"red"},[t._v(t._s(e.row.passRate)+"%")])]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"passAsubmit",label:"通过/提交",width:"140px",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{label:"题目类型",property:"type",align:"center"}})],1),t._v(" "),s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{"current-page":t.questionPage,layout:"prev, pager, next",background:"","page-size":10,total:t.total},on:{"current-change":t.changeCurrentPage,"update:currentPage":function(e){t.questionPage=e}}})],1)],1)]),t._v(" "),t.showDoPlan&&t.currentQuestion.PID?s("div",{staticClass:"showPlan",on:{click:function(e){t.showDoPlan=!1}}},[s("div",{staticClass:"show-plan-container",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"plan-header"},[s("span",{staticClass:"plan-pid"},[t._v(t._s(t.currentQuestion.PID))]),t._v(" "),s("span",{staticClass:"plan-title"},[t._v(t._s(t.currentQuestion.title))]),t._v(" "),s("span",{staticClass:"plan-close",on:{click:function(e){t.showDoPlan=!1}}},[s("i",{staticClass:"icon-guanbi"})])]),t._v(" "),1===t.showPlanTypeId?s("fill-blank-question",{ref:"fillBlankQuestion",attrs:{isExamPaper:t.isExamPaper,question:t.currentQuestion,maxHeight:!0},on:{"update:question":function(e){t.currentQuestion=e},enter:t.cancelDisMouseWheel,leave:t.disabledMouseWheel}}):t._e(),t._v(" "),2===t.showPlanTypeId?s("choice-question",{ref:"choiceQuestion",attrs:{isExamPaper:t.isExamPaper,question:t.currentQuestion,maxHeight:!0},on:{"update:question":function(e){t.currentQuestion=e},enter:t.cancelDisMouseWheel,leave:t.disabledMouseWheel}}):t._e(),t._v(" "),4===t.showPlanTypeId?s("analyze-question",{ref:"analyzeQuestion",attrs:{isExamPaper:t.isExamPaper,question:t.currentQuestion},on:{"update:question":function(e){t.currentQuestion=e},enter:t.cancelDisMouseWheel,leave:t.disabledMouseWheel}}):t._e(),t._v(" "),5===t.showPlanTypeId?s("judgment-question",{ref:"judgmentQuestion",attrs:{isExamPaper:t.isExamPaper,question:t.currentQuestion,maxHeight:!0},on:{"update:question":function(e){t.currentQuestion=e},enter:t.cancelDisMouseWheel,leave:t.disabledMouseWheel}}):t._e(),t._v(" "),1===t.showPlanTypeId&&(t.currentQuestion.questionAnswer!==t.currentQuestion.userAnswer||t.currentQuestion.questionAnswer&&t.currentQuestion.questionAnswer===t.currentQuestion.userAnswer)?t._e():s("div",{staticClass:"plan-footer"},[s("span",{staticClass:"plan-submit",on:{click:t.handleSubmit}},[t._v("确定")])])],1)]):t._e()])},staticRenderFns:[]};var Nt=s("VU/8")($t,Ot,!1,function(t){s("GSbi")},"data-v-4a8f74ce",null).exports,Mt={name:"submitDate",props:{problemId:{type:Number},dataType:{type:Number,default:1}},data:function(){return{loading:!0,HisSubObj:{},Page:1,count:"",showList:[],hisSub:{},languageType:"",statusType:"",pageSize:20,isShowSlef:!1,CN:"",CPlusN:"",JavaN:"",Python3N:"",statusTypes:[{value:4,label:"Accept"},{value:1,label:"Waiting"},{value:2,label:"Compiling"},{value:3,label:"Running"},{value:5,label:"Presenting Error"},{value:6,label:"Wrong Answer"},{value:7,label:"Time Limit Exceed"},{value:8,label:"memory Limit Exceed"},{value:9,label:"Output Limit Exceed"},{value:10,label:"Runtime Error"},{value:11,label:"Compile Error"},{label:"所有状态"}],languageTypes:[{value:1,label:"C++"},{value:0,label:"C"},{value:6,label:"Python3"},{value:3,label:"Java"},{label:"所有语言"}]}},methods:{checkTypeChange:function(){this.getStatusHistory(this.problemId)},getStatusHistory:function(t){var e=this;this.loading=!0,!1===e.isShowSlef?ct.getStatusHistoryList("/states/history",{problem_id:t,status:e.statusType,language:e.languageType,page:e.Page,pagesize:this.pageSize}).then(function(t){e.HisSubObj=t.data,e.showList=e.HisSubObj.history_list,e.count=e.HisSubObj.count,e.CN=e.HisSubObj.languageObj.C,e.CPlusN=e.HisSubObj.languageObj.C++,e.JavaN=e.HisSubObj.languageObj.Java,e.Python3N=e.HisSubObj.languageObj.Python3,e.updateEcharts(),e.loading=!1}):ct.getStatusHistoryList("/states/history",{problem_id:e.problemId,status:this.statusType,language:this.languageType,page:this.Page,pagesize:this.pageSize}).then(function(t){e.HisSubObj=t.data,e.showList=e.HisSubObj.my_history,e.count=e.HisSubObj.my_count,e.CN=e.HisSubObj.languageObj.C,e.CPlusN=e.HisSubObj.languageObj.C++,e.JavaN=e.HisSubObj.languageObj.Java,e.Python3N=e.HisSubObj.languageObj.Python3,e.updateEcharts(),e.loading=!1})},getStatusRank:function(t){var e=this;this.loading=!0,!1===e.isShowSlef?ct.getStatusRankList("/states/history",{problem_id:t,status:e.statusType,language:e.languageType,page:e.Page,pagesize:this.pageSize,rank:!0}).then(function(t){e.HisSubObj=t.data,e.showList=e.HisSubObj.history_list,e.count=e.HisSubObj.count,e.CN=e.HisSubObj.languageObj.C,e.CPlusN=e.HisSubObj.languageObj.C++,e.JavaN=e.HisSubObj.languageObj.Java,e.Python3N=e.HisSubObj.languageObj.Python3,e.updateEcharts(),e.loading=!1}):ct.getStatusRankList("/states/history",{problem_id:e.problemId,status:this.statusType,language:this.languageType,page:this.Page,pagesize:this.pageSize,rank:!0}).then(function(t){e.HisSubObj=t.data,e.showList=e.HisSubObj.my_history,e.count=e.HisSubObj.my_count,e.CN=e.HisSubObj.languageObj.C,e.CPlusN=e.HisSubObj.languageObj.C++,e.JavaN=e.HisSubObj.languageObj.Java,e.Python3N=e.HisSubObj.languageObj.Python3,e.updateEcharts(),e.loading=!1})},handleSizeChange:function(t){this.pageSize=t,1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)},handleCurrentChange:function(t){this.Page=t,1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)},selectType:function(){1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)},showSelfHis:function(){this.isShowSlef=!0,1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)},drawStatus:function(t){this.echart_status=S.a.init(document.getElementById(t)),this.echart_status.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"right",data:["Accept","Waiting","Compiling","Running","Presenting Error","Wrong Answer","Time Limit Exceed","memory Limit Exceed","Output Limit Exceed","Runtime Error","Compile Error"]},series:[{name:"编程语言",type:"pie",selectedMode:"single",radius:[0,"30%"],label:{normal:{position:"inner"}},labelLine:{normal:{show:!1}},data:[]},{name:"提交状态",type:"pie",radius:["40%","55%"],data:[]}]})},updateEcharts:function(){this.echart_status.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"right",data:["Accept","Waiting","Compiling","Running","Presenting Error","Wrong Answer","Time Limit Exceed","memory Limit Exceed","Output Limit Exceed","Runtime Error","Compile Error"]},series:[{name:"编程语言",type:"pie",selectedMode:"single",radius:[0,"30%"],label:{normal:{position:"inner"}},labelLine:{normal:{show:!1}},data:[{value:this.HisSubObj.languageObj.C,name:"C"},{value:this.HisSubObj.languageObj["C++"],name:"C++"},{value:this.JavaN,name:"Java"},{value:this.Python3N,name:"Python3"}]},{name:"提交状态",type:"pie",radius:["40%","55%"],data:[{value:this.HisSubObj.statusObj.Accept,name:"Accept"},{value:this.HisSubObj.statusObj.Waiting,name:"Waiting"},{value:this.HisSubObj.statusObj.Compiling,name:"Compiling"},{value:this.HisSubObj.statusObj.Running,name:"Running"},{value:this.HisSubObj.statusObj.Presenting_Error,name:"Presenting Error"},{value:this.HisSubObj.statusObj.Wrong_Answer,name:"Wrong Answer"},{value:this.HisSubObj.statusObj.Time_Limit_Exceed,name:"Time Limit Exceed"},{value:this.HisSubObj.statusObj.Memory_Limit_Exceed,name:"Memory Limit Exceed"},{value:this.HisSubObj.statusObj.Output_Limit_Exceed,name:"Output Limit Exceed"},{value:this.HisSubObj.statusObj.Runtime_Error,name:"Runtime Error"},{value:this.HisSubObj.statusObj.Compile_Error,name:"Compile Error"}]}]})}},mounted:function(){this.$nextTick(function(){this.drawStatus("Status")})},created:function(){1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)},watch:{dataType:function(){this.languageType="",this.statusType="",1===this.dataType?this.getStatusHistory(this.problemId):this.getStatusRank(this.problemId)}}},Bt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submitData"},[s("div",{staticClass:"Title"},[s("span",[t._v(t._s(t.HisSubObj.problem_name))])]),t._v(" "),s("div",{staticClass:"show-mid"},[s("div",{staticClass:"showData"},[s("span",{staticClass:"HisTitle"},[t._v(t._s(1===t.dataType?"历史提交记录":"历史提交记录排行榜"))]),t._v(" "),s("span",{staticClass:"subCount"},[t._v("提交总次数："+t._s(t.count))]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"showHisSubList"},t._l(t.showList,function(e,i){return s("div",{key:i,staticClass:"showHisSub"},[1===e.result?s("span",{staticClass:"status"},[t._v("W")]):t._e(),t._v(" "),2===e.result?s("span",{staticClass:"status"},[t._v("C")]):t._e(),t._v(" "),3===e.result?s("span",{staticClass:"status"},[t._v("R")]):t._e(),t._v(" "),4===e.result?s("span",{staticClass:"status",staticStyle:{color:"#67C23A",transition:"all 0.4s"}},[t._v("AC")]):t._e(),t._v(" "),5===e.result?s("span",{staticClass:"status",staticStyle:{color:"#F56C6C",transition:"all 0.4s"}},[t._v("PE")]):t._e(),t._v(" "),6===e.result?s("span",{staticClass:"status",staticStyle:{color:"#F56C6C",transition:"all 0.4s"}},[t._v("WA")]):t._e(),t._v(" "),7===e.result?s("span",{staticClass:"status",staticStyle:{color:"#E6A23C",transition:"all 0.4s"}},[t._v("TLE")]):t._e(),t._v(" "),8===e.result?s("span",{staticClass:"status",staticStyle:{color:"#E6A23C",transition:"all 0.4s"}},[t._v("MLE")]):t._e(),t._v(" "),9===e.result?s("span",{staticClass:"status",staticStyle:{color:"#E6A23C",transition:"all 0.4s"}},[t._v("OLE")]):t._e(),t._v(" "),10===e.result?s("span",{staticClass:"status",staticStyle:{color:"#F56C6C",transition:"all 0.4s"}},[t._v("RE")]):t._e(),t._v(" "),11===e.result?s("span",{staticClass:"status",staticStyle:{color:"#F56C6C",transition:"all 0.4s"}},[t._v("CE")]):t._e(),t._v(" "),s("span",{staticClass:"stuName"},[t._v(t._s(e.student_name))]),t._v(" "),s("span",{staticClass:"subTime"},[t._v("提交时间："+t._s(e.submit_time.replace("T"," ")))]),t._v(" "),s("span",{staticClass:"runTime"},[t._v(t._s(e.run_time))]),t._v(" "),s("span",{staticClass:"Memory"},[t._v(t._s(e.memory))])])}))]),t._v(" "),s("div",{staticClass:"choose-and-status"},[s("div",{staticClass:"choose"},[s("span",{staticClass:"chooseTitle"},[t._v("筛选条件")]),t._v(" "),s("div",{staticClass:"select-area"},[s("i",{staticClass:"icon-sanjiaoxing-down",staticStyle:{position:"absolute",bottom:"9px",left:"15px",width:"16px",height:"16px","z-index":"1",color:"#f48118"}}),t._v(" "),s("el-select",{attrs:{placeholder:"所有状态"},on:{change:t.checkTypeChange},model:{value:t.statusType,callback:function(e){t.statusType=e},expression:"statusType"}},t._l(t.statusTypes,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",{staticClass:"select-area"},[s("i",{staticClass:"icon-sanjiaoxing-down",staticStyle:{position:"absolute",bottom:"9px",left:"15px",width:"16px",height:"16px","z-index":"1",color:"#f48118"}}),t._v(" "),s("el-select",{attrs:{placeholder:"所有语言"},on:{change:t.checkTypeChange},model:{value:t.languageType,callback:function(e){t.languageType=e},expression:"languageType"}},t._l(t.languageTypes,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"hisSubListPage"},[s("el-pagination",{attrs:{"current-page":t.Page,"page-sizes":[5,10,20,50],"page-size":20,background:"","prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t.HisSubObj.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"statusEcharts"},[e("span",{staticClass:"statusEchartsTitle"},[this._v("状态统计数据")]),this._v(" "),e("div",{staticClass:"echart_status ",attrs:{id:"Status"}})])}]};var jt={components:{submitData:s("VU/8")(Mt,Bt,!1,function(t){s("Qt0N")},"data-v-6c36e5c6",null).exports},mixins:[wt],data:function(){return{showSubmitBox:0,submitData:"",showFixTop:!1,showErrorMsg:!0,PID:"",contest_id:-1,languageActive:0,languages:[{title:"C",value:0},{title:"C++",value:1},{title:"Java",value:3},{title:"Python3",value:6}],langsList:[0,1,3,6],showSelectMenu:!1,question:{},status:["Waiting...","Waiting...","Compiling...","Running","Accept","Presenting Error","Wrong Answer","Time Limit Exceed","Memory Limit Exceed","Output Limit Exceed","Runtime Error","Compile Error"],onlineUser:{},isCompile:!1,isPostQuestionLoading:!1,loadingTime:30,timer:null}},computed:{getResultStyle:function(){return 0===this.question.result||1===this.question.result?"#8ecc45":2===this.question.result?"#888":3===this.question.result?"#888":4===this.question.result?"#8ecc45":5===this.question.result?"#f577d0":6===this.question.result?"#d43039":7===this.question.result?"#6495ed":8===this.question.result?"#6495ed":9===this.question.result?"#284cad":10===this.question.result?"#ff6c3f":"#843f10"},getLanguage:function(){return this.languages[this.languageActive].title}},methods:{computePassRate:function(t,e){return t?(100*(e/t).toFixed(2)).toFixed(0)+"%":0},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.showFixTop=t>140},reset:function(){this.question.code="",this.question.result=""},selectLanguage:function(t){this.languageActive=t,this.showSelectMenu=!1,this.question.result="",this.getQuestionData()},PgDn:function(){var t=this,e={problem_id:this.PID,direction:"last"};-1!==this.contest_id&&(e.contest_id=this.contest_id),ct.getOtherQuestion("/problems/get_problem",e).then(function(e){-1!==e.data?(t.PID=e.data,t.getQuestionData()):t.$message({message:"已经是第一道题了",type:"warning"})})},PgUp:function(){var t=this,e={problem_id:this.PID,direction:"next"};-1!==this.contest_id&&(e.contest_id=this.contest_id),ct.getOtherQuestion("/problems/get_problem",e).then(function(e){-1!==e.data?(t.PID=e.data,t.getQuestionData()):t.$message({message:"已经是最后一题了",type:"warning"})})},toQueSolve:function(){this.$router.push({path:"/questionSolve",name:"questionSolve",query:{PID:this.question.PID,Lang:this.languages[this.languageActive].value}})},openAnswerPad:function(){var t=this;t.onlineUser.uid?this.showDoPlan=!0:this.$alert("请先登录再答题","温馨提示",{confirmButtonText:"去登陆",type:"warning"}).then(function(){t.$router.push({path:"/login"})})},getQuestionData:function(){var t=this;ct.getQuestionDetail("/problems/detail",{problem_id:t.PID,language:t.languages[t.languageActive].value}).then(function(e){t.filterQuestionData(e.data)})},postQuestionData:function(){var t=this;if(!this.question.code||this.isCompile||this.isPostQuestionLoading)this.question.code||this.$message.error("答案不能为空！");else{this.isPostQuestionLoading=!0,this.timer=setInterval(function(){--t.loadingTime<1&&(t.isPostQuestionLoading=!1,t.loadingTime=30,clearInterval(t.timer),t.timer=null)},1e3),this.isCompile=!0;var e=void 0;e=this.$route.query.contest_id?{problem_id:t.question.PID,protype:3,source:t.question.code,language:this.languages[this.languageActive].value,contest_id:this.$route.query.contest_id}:{problem_id:t.question.PID,protype:3,source:t.question.code,language:this.languages[this.languageActive].value},ct.postAnswer("/problems/submit",e).then(function(){ct.getQuestionResult("/problems/submit",t.question.PID).then(function(e){t.isCompile=!1,t.$set(t.question,"code",e.data.code),t.$set(t.question,"errorMsg",e.data.error_msg),t.$set(t.question,"language",e.data.language),t.$set(t.question,"result",e.data.result),t.$set(t.question,"solution_id",e.data.solution_id)})})}},filterQuestionData:function(t){var e={};e.PID=t.problem_id,e.title=t.info.title?t.info.title:"",e.label=t.tagnames,e.defunct=t.defunct,e.errorMsg=t.error_msg,e.spaceLimit=t.info.memory_limit,e.timeLimit=t.info.time_limit,e.desc=t.info.description,e.input=t.info.input,e.output=t.info.output,e.accepted=t.accepted,e.source=t.source,e.submit=t.submit||0,e.inputDemo=t.info.sample_input,e.outputDemo=t.info.sample_output,e.acceptedLanguages=t.accepted_languages||[],t.code&&(e.code=t.code,e.result=t.result,e.resultInfo=this.status[t.result]),this.question=e},sumHis:function(){this.showSubmitBox=1},sumRank:function(){this.showSubmitBox=2}},created:function(){var t=window.sessionStorage.getItem("userInfo");this.onlineUser="undefined"!==t&&"string"==typeof t?JSON.parse(t):{};var e=this.$route.query.PID;this.PID=e,this.$route.query.contest_id&&(this.contest_id=this.$route.query.contest_id),this.getQuestionData()},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.timer||(clearInterval(this.timer),this.timer=null)},watch:{"question.code":function(t){}}},Ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.question.PID?s("div",{ref:"detail",staticClass:"question-detail"},["N"===t.question.defunct?s("div",{class:0!==t.showSubmitBox?"submitBox submitBox-show":"submitBox"},[s("div",{staticClass:"container"},[1===t.showSubmitBox?[s("submitData",{attrs:{problemId:t.question.PID,dataType:1}})]:2===t.showSubmitBox?[s("submitData",{attrs:{problemId:t.question.PID,dataType:2}})]:t._e()],2),t._v(" "),s("div",{staticClass:"btn-Box"},[s("button",{class:1===t.showSubmitBox?"btn btn-submit-history btn-current":"btn btn-submit-history",on:{click:function(e){t.sumHis(t.question.PID)}}},[t._v("提交"),s("br"),t._v("历史")]),t._v(" "),s("button",{class:2===t.showSubmitBox?"btn btn-submit-rank btn-current":"btn btn-submit-rank",on:{click:function(e){t.sumRank(t.question.PID)}}},[t._v("提交"),s("br"),t._v("排行")]),t._v(" "),0!==t.showSubmitBox?s("button",{staticClass:"btn btn-back",on:{click:function(e){t.showSubmitBox=0}}},[t._v("返回"),s("br"),t._v("题目")]):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"top"},[s("p",{staticClass:"title"},[t._v(t._s(t.question.title))]),t._v(" "),s("div",{staticClass:"label-area"},[s("span",{staticClass:"label-item pid"},[t._v("第"+t._s(t.question.PID)+" 题")]),t._v(" "),t._l(t.question.label,function(e,i){return s("span",{key:i,staticClass:"label-item label"},[t._v(t._s(e))])}),t._v(" "),t.question.acceptedLanguages.length>0?s("span",{staticClass:"label-item success-tip"},[t._v("\n        已完成["),t._l(t.question.acceptedLanguages,function(e,i){return s("span",{key:i},[t._v("\n          "+t._s(t.languages[t.langsList.indexOf(e)].title)),i!==t.question.acceptedLanguages.length-1?s("span",[t._v(",")]):t._e()])}),t._v("]\n      ")],2):t._e()],2)]),t._v(" "),s("transition",{attrs:{name:"bTtFade"}},[t.showFixTop?s("div",{staticClass:"fix-top"},[s("div",{staticClass:"fix-top-container"},[s("span",{staticClass:"title"},[t._v(t._s(t.question.title))]),t._v(" "),s("span",{staticClass:"label-item pid"},[t._v("第"+t._s(t.question.PID)+" 题")]),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.openAnswerPad(e)}}},[s("i",{staticClass:"icon-xiugai-copy"}),t._v(" 答题")])])]):t._e()]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"limit-area"},[s("div",{staticClass:"space-limit-area"},[t._m(0),t._v(" "),s("span",{staticClass:"space-limit limit-data"},[t._v(t._s(t.question.spaceLimit)+"K")])]),t._v(" "),s("div",{staticClass:"time-limit-area"},[t._m(1),t._v(" "),s("span",{staticClass:"time-limit limit-data"},[t._v(t._s(t.question.timeLimit)+"S")])]),t._v(" "),s("div",{staticClass:"other-info"},[s("span",{staticClass:"submit-label"},[t._v("提交数:")]),t._v(" "),s("span",{staticClass:"submit-count"},[t._v(t._s(t.question.submit))]),t._v(" "),s("span",{staticClass:"submit-label"},[t._v("通过率:")]),t._v(" "),s("span",{staticClass:"submit-count"},[t._v(t._s(t.computePassRate(t.question.submit,t.question.accepted)))]),t._v(" "),s("span",{staticClass:"submit-label"},[t._v("题目来源:")]),t._v(" "),null!=t.question.source&&""!==t.question.source&&void 0!==t.question.source?[s("span",{staticClass:"submit-count"},[t._v(t._s(t.question.source))])]:[s("span",{staticClass:"submit-count"},[t._v("本站")])]],2),t._v(" "),s("div",{staticClass:"switch-area",attrs:{onselectstart:"return false"}},[s("span",{staticClass:"switch-item",on:{click:t.PgDn}},[t._v("<")]),t._v(" "),s("span",{staticClass:"switch-item",on:{click:t.PgUp}},[t._v(">")])]),t._v(" "),s("div",{staticClass:"button-area"},["N"===t.question.defunct&&4===t.question.result?s("button",{staticClass:"solve-button",on:{click:t.toQueSolve}},[s("i",{staticClass:"icon-xiugai-copy"}),t._v(" 题解区")]):t._e(),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.openAnswerPad(e)}}},[s("i",{staticClass:"icon-xiugai-copy"}),t._v(" 答题")])])]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"row-label"},[t._v("题目描述")]),t._v(" "),s("div",{staticClass:"container",domProps:{innerHTML:t._s(t.question.desc)}})]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"row-label"},[t._v("输入描述")]),t._v(" "),s("div",{staticClass:"container",domProps:{innerHTML:t._s(t.question.input)}})]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"row-label"},[t._v("输出描述")]),t._v(" "),s("div",{staticClass:"container",domProps:{innerHTML:t._s(t.question.output)}})]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"row-label"},[t._v("样本输入")]),t._v(" "),s("div",{staticClass:"container",domProps:{innerHTML:t._s(t.question.inputDemo)}})]),t._v(" "),s("div",{staticClass:"row"},[s("p",{staticClass:"row-label"},[t._v("样本输出")]),t._v(" "),s("div",{staticClass:"container",domProps:{innerHTML:t._s(t.question.outputDemo)}})])]),t._v(" "),s("transition",{attrs:{name:"bTtFade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDoPlan,expression:"showDoPlan"}],staticClass:"do-plan-modal",on:{click:function(e){t.showDoPlan=!1},scroll:function(t){t.preventDefault()}}},[s("div",{staticClass:"do-plan",on:{click:function(e){e.stopPropagation(),t.showSelectMenu=!1}}},[s("div",{staticClass:"problem-header"},[s("div",{staticClass:"row do-plan-row"},[s("span",{staticClass:"title"},[t._v(t._s(t.question.title))]),t._v(" "),s("span",{staticClass:"label-item pid"},[t._v("第"+t._s(t.question.PID)+"题")]),t._v(" "),s("div",{staticClass:"select-area"},[s("span",{staticClass:"select",on:{click:function(e){e.stopPropagation(),t.showSelectMenu=!t.showSelectMenu}}},[t._v(t._s(t.getLanguage)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),t.showSelectMenu?s("ul",{staticClass:"select-menu"},t._l(t.languages,function(e,i){return s("li",{key:i,attrs:{"data-item":e},on:{click:function(e){t.selectLanguage(i)}}},[t._v(t._s(e.title))])})):t._e()])]),t._v(" "),s("div",{staticClass:"row do-plan-row"},[s("div",{staticClass:"limit-area"},[s("div",{staticClass:"space-limit-area"},[s("span",{staticClass:"limit-label",staticStyle:{color:"#333"}},[s("i",{staticClass:"icon-project_space"}),t._v(" 空间限制：")]),t._v(" "),s("span",{staticClass:"space-limit limit-data",staticStyle:{color:"#666"}},[t._v(t._s(t.question.spaceLimit)+"K")])]),t._v(" "),s("div",{staticClass:"time-limit-area"},[s("span",{staticClass:"limit-label",staticStyle:{color:"#333"}},[s("i",{staticClass:"icon-shijian"}),t._v(" 时间限制：")]),t._v(" "),s("span",{staticClass:"time-limit limit-data",staticStyle:{color:"#666"}},[t._v(t._s(t.question.timeLimit)+"S")])]),t._v(" "),s("div",{staticClass:"button-area"},["N"===t.question.defunct&&4===t.question.result?s("button",{staticClass:"button solve",on:{click:t.toQueSolve}},[t._v("题解区")]):t._e(),t._v(" "),s("button",{staticClass:"button reset",on:{click:t.reset}},[t._v("重置")]),t._v(" "),t.isPostQuestionLoading?t._e():s("button",{staticClass:"button submit",on:{click:t.postQuestionData}},[t._v("提交")]),t._v(" "),t.isPostQuestionLoading?s("button",{staticClass:"button disable"},[t._v(t._s(t.loadingTime))]):t._e()])])])]),t._v(" "),s("div",{staticClass:"do-plan-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question.code,expression:"question.code"}],staticClass:"input-area",domProps:{value:t.question.code,innerHTML:t._s(t.question.code)},on:{mouseenter:t.cancelDisMouseWheel,mouseleave:t.disabledMouseWheel,input:function(e){e.target.composing||t.$set(t.question,"code",e.target.value)}}}),t._v(" "),t.isCompile||!t.question.result&&0!==t.question.result?t._e():s("span",{staticClass:"result",style:{color:t.getResultStyle}},[t._v(t._s(t.status[t.question.result]))]),t._v(" "),t.isCompile?s("span",{staticClass:"result",style:{color:"#f48118"}},[t._v("编译中...")]):t._e(),t._v(" "),"N"===t.question.defunct&&6===t.question.result&&t.question.errorMsg?s("div",{class:t.showErrorMsg?"error-msg error-msg-open":"error-msg error-msg-close"},[s("span",{staticClass:"error-msg-label",on:{click:function(e){t.showErrorMsg=!t.showErrorMsg}}},[t._v("错误信息  "),s("i",{class:t.showErrorMsg?"el-icon-arrow-down":"el-icon-arrow-up"})]),t._v(" "),s("p",{staticClass:"error-msg-content",domProps:{innerHTML:t._s(t.question.errorMsg.replace(/\n/g,"<br>"))}})]):t._e()])])])])],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"limit-label"},[e("i",{staticClass:"icon-project_space"}),this._v(" 空间限制：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"limit-label"},[e("i",{staticClass:"icon-shijian"}),this._v(" 时间限制：")])}]};var Ht=s("VU/8")(jt,Ut,!1,function(t){s("J/Ri")},"data-v-a44df6a6",null).exports,Qt=s("OEdS"),Vt=s.n(Qt);var Wt={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getInfoData:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getHotTagsList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getPostStats:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getPostsList:function(t,e){return ji(t,{type:e.type,search:e.search,page:e.page,pagesize:e.pageSize}).then(function(t){return p.a.resolve(t.data)})},getTopPostsList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},postGiveLike:function(t,e){return Vi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},delGiveLike:function(t,e){return Wi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},getPostSave:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},publishPost:function(t,e){return Ki(t,{params:{title:e.title,labels:e.labels,content:e.content,type:e.type,if_save:e.if_save,if_epic_post:e.if_epic_post}}).then(function(t){return p.a.resolve(t.data)})},deletePost:function(t,e){return Wi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},getPostDetail:function(t,e){return ji(t,{post_id:e.post_id}).then(function(t){return p.a.resolve(t.data)})},sendReply:function(t,e){return Ki(t,e).then(function(t){return p.a.resolve(t.data)})},getRootReplies:function(t,e){return ji(t,{post_id:e.post_id,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getChildReplies:function(t,e){return ji(t,{reply_id:e.reply_id,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},postReadPost:function(t,e){return Vi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},uploadImg:function(t,e){return function(t,e){return new p.a(function(s,i){var a=new FormData;a.append("file",e.file),f()({method:"post",url:Bi+t,data:a,headers:{"ConTent-Type":"multipart/form-data"},xhrFields:{withCredentials:!0},dataType:"json"}).then(function(t){return s(t)})})}(t,{file:e}).then(function(t){return p.a.resolve(t.data)})},getQuestionDetail:function(t,e){return ji(t,{problem_id:e}).then(function(t){return p.a.resolve(t.data)})},putPostTop:function(t,e){return Ji(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},delPostTop:function(t,e){return Wi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},deleteReply:function(t,e){return Wi(t,{reply_id:e}).then(function(t){return p.a.resolve(t.data)})}},Jt=s("sYY+"),Kt=s.n(Jt),Gt={name:"wangeditor",data:function(){return{editorContent:"",editorText:"",myItem:{showProblemLink:!0},ifChangeSize:!1,showInput:!1,imageTemp:null,removeList:[],questionId:"",imageWidth:0,widthMin:0,widthMax:0,host:Bi}},props:{catchData:{type:Function},editorType:{type:Number,default:0},editorTip:{type:String,default:""},content:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"auto"},ifLimited:{type:Boolean,default:!0}},computed:{setStyle:function(){return{width:this.width,maxHeight:this.height}}},methods:{toInstruction:function(){window.open("http://www.gpnuacm.com/#/postDetail/51")},formatTooltip:function(t){return t+"px"},initEmotions:function(t){var e;e=[],this.addEmotions(e,"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal",[["爱你","/f6/2018new_aini_org.png"],["允悲","/83/2018new_kuxiao_org.png"],["悲伤","/ee/2018new_beishang_org.png"],["吃惊","/49/2018new_chijing_org.png"],["偷笑","/71/2018new_touxiao_org.png"],["疑问","/b8/2018new_ningwen_org.png"],["右哼哼","/c1/2018new_youhengheng_org.png"],["互粉","/86/2018new_hufen02_org.png"],["顶","/ae/2018new_ding_org.png"],["污","/10/2018new_wu_org.png"],["害羞","/c1/2018new_haixiu_org.png"],["可怜","/96/2018new_kelian_org.png"],["失望","/aa/2018new_shiwang_org.png"],["生病","/3b/2018new_shengbing_org.png"],["憧憬","/c9/2018new_chongjing_org.png"],["黑线","/a3/2018new_heixian_thumb.png"],["感冒","/40/2018new_kouzhao_org.png"],["亲亲","/2c/2018new_qinqin_org.png"],["并不简单","/aa/2018new_bingbujiandan_org.png"],["晕","/07/2018new_yun_org.png"],["生病","/01/2018new_chigua_org.png"],["吃瓜","/3b/2018new_shengbing_org.png"],["打脸","/cb/2018new_dalian_org.png"],["可爱","/09/2018new_keai_org.png"],["汗","/28/2018new_han_org.png"],["笑而不语","/2d/2018new_xiaoerbuyu_org.png"],["馋嘴","/fa/2018new_chanzui_org.png"],["抓狂","/17/2018new_zhuakuang_org.png"],["太开心","/1e/2018new_taikaixin_org.png"],["坏笑","/4d/2018new_huaixiao_org.png"]]),t.customConfig.emotions=[{title:"默认",type:"image",content:[{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif",alt:"[草泥马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif",alt:"[神马]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif",alt:"[浮云]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif",alt:"[给力]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif",alt:"[围观]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif",alt:"[威武]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/panda_thumb.gif",alt:"[熊猫]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/81/rabbit_thumb.gif",alt:"[兔子]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/otm_thumb.gif",alt:"[奥特曼]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/15/j_thumb.gif",alt:"[囧]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/hufen_thumb.gif",alt:"[互粉]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c4/liwu_thumb.gif",alt:"[礼物]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ac/smilea_thumb.gif",alt:"[呵呵]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0b/tootha_thumb.gif",alt:"[嘻嘻]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/laugh.gif",alt:"[哈哈]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/14/tza_thumb.gif",alt:"[可爱]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/kl_thumb.gif",alt:"[可怜]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a0/kbsa_thumb.gif",alt:"[挖鼻屎]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f4/cj_thumb.gif",alt:"[吃惊]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6e/shamea_thumb.gif",alt:"[害羞]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c3/zy_thumb.gif",alt:"[挤眼]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/29/bz_thumb.gif",alt:"[闭嘴]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/71/bs2_thumb.gif",alt:"[鄙视]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/lovea_thumb.gif",alt:"[爱你]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9d/sada_thumb.gif",alt:"[泪]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/19/heia_thumb.gif",alt:"[偷笑]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8f/qq_thumb.gif",alt:"[亲亲]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/b6/sb_thumb.gif",alt:"[生病]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/mb_thumb.gif",alt:"[太开心]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/17/ldln_thumb.gif",alt:"[懒得理你]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/98/yhh_thumb.gif",alt:"[右哼哼]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/zhh_thumb.gif",alt:"[左哼哼]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a6/x_thumb.gif",alt:"[嘘]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/af/cry.gif",alt:"[衰]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/73/wq_thumb.gif",alt:"[委屈]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9e/t_thumb.gif",alt:"[吐]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f3/k_thumb.gif",alt:"[打哈欠]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/27/bba_thumb.gif",alt:"[抱抱]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7c/angrya_thumb.gif",alt:"[怒]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/5c/yw_thumb.gif",alt:"[疑问]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/a5/cza_thumb.gif",alt:"[馋嘴]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/88_thumb.gif",alt:"[拜拜]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e9/sk_thumb.gif",alt:"[思考]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/24/sweata_thumb.gif",alt:"[汗]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7f/sleepya_thumb.gif",alt:"[困]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6b/sleepa_thumb.gif",alt:"[睡觉]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/90/money_thumb.gif",alt:"[钱]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/0c/sw_thumb.gif",alt:"[失望]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/cool_thumb.gif",alt:"[酷]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/8c/hsa_thumb.gif",alt:"[花心]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/49/hatea_thumb.gif",alt:"[哼]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/36/gza_thumb.gif",alt:"[鼓掌]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/dizzya_thumb.gif",alt:"[晕]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1a/bs_thumb.gif",alt:"[悲伤]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/62/crazya_thumb.gif",alt:"[抓狂]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/h_thumb.gif",alt:"[黑线]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6d/yx_thumb.gif",alt:"[阴险]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/89/nm_thumb.gif",alt:"[怒骂]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/hearta_thumb.gif",alt:"[心]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/ea/unheart.gif",alt:"[伤心]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/58/pig.gif",alt:"[猪头]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d6/ok_thumb.gif",alt:"[ok]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d9/ye_thumb.gif",alt:"[耶]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/good_thumb.gif",alt:"[good]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c7/no_thumb.gif",alt:"[不要]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d0/z2_thumb.gif",alt:"[赞]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/40/come_thumb.gif",alt:"[来]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d8/sad_thumb.gif",alt:"[弱]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/91/lazu_thumb.gif",alt:"[蜡烛]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/6a/cake.gif",alt:"[蛋糕]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/d3/clock_thumb.gif",alt:"[钟]"},{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1b/m_thumb.gif",alt:"[话筒]"}]},{title:"大头表情",type:"image",content:e}]},addEmotions:function(t,e,s){for(var i=0;i<s.length;i++)t.push({alt:"["+s[i][0]+"]",src:e+s[i][1]})},removeItem:function(t){var e=[{chinese:"标题",english:"head"},{chinese:"粗体",english:"bold"},{chinese:"字号",english:"fontSize"},{chinese:"字体",english:"fontName"},{chinese:"斜体",english:"italic"},{chinese:"下划线",english:"underline"},{chinese:"删除线",english:"strikeThrough"},{chinese:"文字颜色",english:"foreColor"},{chinese:"背景颜色",english:"backColor"},{chinese:"链接",english:"link"},{chinese:"列表",english:"list"},{chinese:"对齐",english:"justify"},{chinese:"引用",english:"quote"},{chinese:"表情",english:"emoticon"},{chinese:"图片",english:"image"},{chinese:"表格",english:"table"},{chinese:"视频",english:"video"},{chinese:"代码",english:"code"},{chinese:"撤销",english:"undo"},{chinese:"重复",english:"redo"}],s=-1,i=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"];switch(this.editorType){case 1:this.removeList=["视频"];break;case 2:this.removeList=["标题","字号","字体","删除线","链接","列表","表格","对齐","引用","图片","视频"];break;case 3:this.myItem.showProblemLink=!1,this.removeList=["标题","字号","斜体","字体","背景颜色","列表","代码","视频","引用","链接","删除线"];break;case 4:this.myItem.showProblemLink=!1,this.removeList=["标题","字号","斜体","字体","删除线","链接","列表","表格","对齐","引用","代码","图片","视频"]}for(var a=0;a<e.length;a++)(s=this.removeList.indexOf(e[a].chinese))<0||this.removeList.splice(s,1,e[a].english);for(var n=0;n<this.removeList.length;n++)(s=i.indexOf(this.removeList[n]))<0||i.splice(s,1);t.customConfig.menus=i},imageEvent:function(){for(var t=this,e=this.$refs.editorContent,s=e.getElementsByTagName("img"),i=0;i<s.length;i++)s[i].onclick=function(s){t.imageTemp=this,t.ifChangeSize=!0,t.widthMin=20,t.widthMax=e.clientWidth-60,t.imageWidth=this.clientWidth,event.stopPropagation()};e.onclick=function(e){t.imageWidth=0,t.imageTemp=null,t.ifChangeSize=!1,t.widthMin=0,t.widthMax=0}},addQuestionLink:function(){if(!/^[0-9]+$/.test(this.questionId))return this.$message({message:"请填入正确题目序号！",type:"warning",duration:1e3}),!1;var t=this;Wt.getQuestionDetail("/problems/detail",parseInt(this.questionId)).then(function(e){if("false"===e.success)t.$message({message:"题库中没有该题目！",type:"error",duration:1e3});else{t.showInput=!1;var s=t.$refs.editorContent.getElementsByClassName("w-e-text")[0],i=document.createElement("p");i.innerHTML='<blockquote class="ud-question-box"><a href="'+Bi+"/#/library/questionDetail?PID="+e.data.problem_id+'" target="_blank"><span class="ud-question-box-no">'+e.data.problem_id+'</span><span class="ud-question-box-title">'+e.data.info.title+'</span><i class="icon-right-arrow"></i></a><span class="ud-question-box-content">'+e.data.info.description+"</span></blockquote><p><br></p>",s.appendChild(i),t.catchData(s.innerHTML)}})}},watch:{imageWidth:function(){0!==this.imageWidth&&(this.imageTemp.style="width: "+this.imageWidth+"px")}},mounted:function(){var t=this,e=this,s=new Kt.a(this.$refs.editorbar,this.$refs.editorContent);s.customConfig.onchange=function(e){t.editorContent=e,t.editorText=s.txt.text(),t.catchData(t.editorContent,t.editorText)},s.customConfig.pasteFilterStyle=!1,s.customConfig.pasteTextHandle=function(t){return t.length>32768?t+'<p style="font-size: 12px; text-align: center; color: rgba(148, 148, 148, 0.6);">该粘贴内容太长，将保存失败！请改为右键纯文本粘贴或适当删减至长度适合！</p>':t},s.customConfig.uploadImgMaxLength=20,s.customConfig.uploadImgMaxSize=5242880,s.customConfig.customUploadImg=function(t,s){for(var i in t)Wt.uploadImg("/forum/posts/image",t[i]).then(function(t){s(Bi+t.data),e.imageEvent()})},this.removeItem(s),this.initEmotions(s),s.customConfig.zIndex=1,s.create(),s.txt.html(this.content),this.editorContent=this.content,this.editorText=s.txt.text()}},Yt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"wangeditor"}},[s("div",{ref:"editorbar",staticClass:"toolbar"},[s("div",{staticClass:"user-defined-module"},[t.myItem.showProblemLink?s("button",{staticClass:"ud-module-btn",on:{click:function(e){t.showInput=!t.showInput}}},[s("span",{staticClass:"ud-module-tip"},[t._v("添加题目链接")]),t._v(" "),s("i",{staticClass:"icon-timu"})]):t._e(),t._v(" "),s("transition",{attrs:{name:"show-left"}},[t.showInput?s("div",{staticClass:"ud-module-input-fade"},[s("div",{staticClass:"ud-module-input"},[s("span",{staticClass:"ud-module-input-tip"},[t._v("题号：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.questionId,expression:"questionId"}],attrs:{type:"text",autofocus:""},domProps:{value:t.questionId},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addQuestionLink(e):null},input:function(e){e.target.composing||(t.questionId=e.target.value)}}})])]):t._e()])],1),t._v(" "),s("div",{staticClass:"user-defined-module ud-module-float-right"},[s("button",{staticClass:"ud-module-btn",on:{click:t.toInstruction}},[s("span",{staticClass:"ud-module-tip"},[t._v("使用说明书")]),t._v(" "),s("i",{staticClass:"icon-yiwenshuoming"})])])]),t._v(" "),s("div",{ref:"editorContent",staticClass:"editorShow",style:t.setStyle,attrs:{id:"content"}},[s("p")]),t._v(" "),0===t.editorText.length?s("span",{staticClass:"editorTip",attrs:{onselectstart:"return false"}},[t._v(t._s(t.editorTip))]):t._e(),t._v(" "),s("div",{class:t.ifChangeSize?"changeImageSize-box":"changeImageSize-box changeImageSize-box-hide"},[s("div",{staticClass:"title"},[t._v("图片宽度调整，高度自适应")]),t._v(" "),s("div",{staticClass:"main"},[s("el-slider",{attrs:{"format-tooltip":t.formatTooltip,min:t.widthMin,max:t.widthMax},model:{value:t.imageWidth,callback:function(e){t.imageWidth=e},expression:"imageWidth"}})],1)]),t._v(" "),t.ifLimited?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"部分长度来自HTML标签，用于保留样式",placement:"top"}},[t.editorContent.length<=32768?s("el-button",{staticClass:"word-total"},[t._v("\n      内容长度："+t._s(t.editorContent.length)+"\n      "),0===t.editorContent.length?s("span",[t._v("，不允许发布")]):t._e()]):t._e(),t._v(" "),t.editorContent.length>32768?s("el-button",{staticClass:"word-total word-total-over"},[t._v("内容长度："+t._s(t.editorContent.length)+"，过长！无法发布！若从桌面文档复制过来，请纯文本粘贴！")]):t._e()],1):t._e()],1)},staticRenderFns:[]};var Xt=s("VU/8")(Gt,Yt,!1,function(t){s("6+ET")},"data-v-e79a9564",null).exports,Zt={name:"shareSolve",components:{wangEditor:Xt},props:{questionData:{type:Object}},data:function(){return{ifShowChoose:!1,editorContent:"",editorText:"",initContent:"",languages:[{title:"C",value:0,color:"#8ecc45"},{title:"C++",value:1,color:"#843f10"},{title:"Java",value:3,color:"#d43039"},{title:"Python3",value:6,color:"#f577d0"}],hadALangueges:[]}},methods:{catchData:function(t,e){this.editorContent=t,this.editorText=e},toBack:function(){this.$emit("getCloseMsg",!1)},toChangeLang:function(t,e){this.$emit("getChangeLangMsg",e),this.setALanguages(t)},toShare:function(){var t=this;ct.shareMyCode("/forum/solutions/share",{solution_id:t.questionData.solution_id,content:t.editorContent}).then(function(e){"true"===e.success?(t.$message({message:"感想您的题解分享！",type:"success",duration:1e3}),t.toBack()):t.$message({message:"抱歉，您的题解分享失败！每个问题只能分享五篇题解！",type:"error",duration:1e3})})},setALanguages:function(t){var e=this.questionData.accepted_languages;e.splice(e.indexOf(t),1),e.push(t);var s=[];for(var i in e)for(var a in this.languages)this.languages[a].index=a,e[i]===this.languages[a].value&&s.push(this.languages[a]);this.hadALangueges=s},highlight:function(t,e){for(var s=t.split("<pre><code>"),i=s[0],a="",n=1;n<s.length;n++){a+='<span class="codeContain"><pre class="line-numbers"><code class="language-clike">';var o=s[n].split("</code></pre>"),r=o[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<br>/g,"\n"),l=(r=Vt.a.highlight(r,Vt.a.languages.clike,"clike")).split("\n");r="";for(var c=0;c<l.length||c<e;c++)c<l.length?r+='<span class="line-numbers-rows">'+l[c]+" </span>":r+='<span class="line-numbers-rows-block"></span>';a+=r,a+='</code></pre><button class="copyContent-btn" style="cursor: pointer">复制</button></span>',a+=o[1]}return i+a}},created:function(){this.setALanguages(this.questionData.language)}},te={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"shareSolve"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"header"},[s("span",{staticClass:"problem-no"},[t._v(t._s(t.questionData.id))]),t._v(" "),s("span",{staticClass:"title"},[t._v(t._s(t.questionData.title))]),t._v(" "),s("button",{staticClass:"btn-back",on:{click:t.toBack}},[t._v("返回")]),t._v(" "),s("button",{staticClass:"btn-share",on:{click:t.toShare}},[t._v("立即分享")])]),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"left-code"},[s("div",{staticClass:"code editorShow",domProps:{innerHTML:t._s(t.highlight("<pre><code>"+t.questionData.code+"</code></pre>",17))}}),t._v(" "),s("div",{staticClass:"langBox",on:{mouseover:function(e){t.ifShowChoose=!0},mouseout:function(e){t.ifShowChoose=!1}}},[s("transition-group",{attrs:{name:"choose-fade",tag:"p"}},t._l(t.hadALangueges,function(e,i){return i===t.hadALangueges.length-1||t.ifShowChoose?s("span",{key:i,on:{click:function(s){t.toChangeLang(e.value,e.index)}}},[t._v("\n              "+t._s(e.title)+"\n            ")]):t._e()}))],1)]),t._v(" "),s("div",{staticClass:"right-content"},[s("h2",[t._v("解题思路陈述")]),t._v(" "),s("div",{staticClass:"editor"},[s("wangEditor",{attrs:{catchData:t.catchData,content:t.initContent,height:"456px",editorType:4,editorTip:"在这里你可以写入你答题的思路，当然，你也可以一字不写。",ifLimited:!1}})],1)])]),t._v(" "),s("div",{staticClass:"footer"})])])},staticRenderFns:[]};var ee={name:"questionSolve",components:{shareSolve:s("VU/8")(Zt,te,!1,function(t){s("dl+s")},"data-v-0cc0b99e",null).exports},data:function(){return{ticket:!1,like:!1,currentTabType:0,canShowShaneBtn:!1,ifShowShareSolve:!1,ifShowLeftContainer:!1,ifShowMainList:!1,ifShowCode:0,info:{},PID:"",languageActive:0,languages:[{title:"C",value:0,color:"#8ecc45"},{title:"C++",value:1,color:"#843f10"},{title:"Java",value:3,color:"#d43039"},{title:"Python3",value:6,color:"#f577d0"}],initPid:"",Page:1,pageSize:20,solutionsList:[],mySolutionsList:[],mS_page:1,mS_pagesize:20,mS_total:0,questionData:{},total:0,host:Bi,defaultImage:s("IT0F")}},methods:{ifOverHeight:function(t){return!0},ifSameDay:function(t){if(0===t)return!0;var e=new Date(this.mySolutionsList[t-1].date.replace("T"," ")),s=new Date(this.mySolutionsList[t].date.replace("T"," "));return e.getFullYear()!==s.getFullYear()||e.getMonth()!==s.getMonth()||e.getDate()!==s.getDate()},ifNull:function(t){return""===t.trim()||""===t.replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g,"").trim()},setShowCode:function(t){this.ifShowCode=this.ifShowCode===t?-1:t},handleSizeChange:function(t){this.pageSize=t,0===this.currentType?this.getMySolutionsAllUser():this.getMySolutionsMyselfThis()},handleCurrentChange:function(t){this.Page=t,0===this.currentType?this.getMySolutionsAllUser():this.getMySolutionsMyselfThis()},mS_handleCurrentChange:function(t){this.mS_page=t,this.getMySolutionsMyselfAll()},closeMsg:function(t){this.ifShowShareSolve=t,0===this.currentType?this.getMySolutionsAllUser():this.getMySolutionsMyselfThis()},changeLangMsg:function(t){this.languageActive=t,this.getQuestionData()},closeLeftContainer:function(){this.ifShowLeftContainer&&(this.ifShowLeftContainer=!this.ifShowLeftContainer)},openLeftContainer:function(){this.ifShowLeftContainer||(this.mS_page=1,this.mS_total=0,this.getMySolutionsMyselfAll()),this.ifShowLeftContainer=!this.ifShowLeftContainer},toQueSolve:function(t){t===this.PID?1===this.currentType?this.$message({message:"你已在该题解页面中！",type:"warning",duration:1200}):this.getList(1):this.$router.push({path:"/questionSolve",name:"questionSolve",query:{PID:t}})},toBack:function(){this.$router.push({path:"/library/questionDetail",query:{PID:this.initPid}})},toLike:function(t,e,s){var i=this;e?ct.cancelLike("/forum/solutions/like",t).then(function(t){"true"!==t.success?i.$message({message:"取消点赞失败，请检查网络链接！",type:"error",duration:1200}):(i.solutionsList[s].likes--,i.solutionsList[s].is_liked=!1)}):ct.setLike("/forum/solutions/like",t).then(function(t){"true"!==t.success?i.$message({message:"点赞失败，请检查网络链接！",type:"error",duration:1200}):(i.solutionsList[s].likes++,i.solutionsList[s].is_liked=!0)})},delSolutions:function(t){var e=this;this.$confirm("此操作将永久删除该题解, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ct.cancelShareMyCode("/forum/solutions/share",t).then(function(t){"true"===t.success&&(e.$message({type:"success",message:"删除成功!"}),e.getMySolutionsMyselfThis())})}).catch(function(){})},highlight:function(t,e){for(var s=t.split("<pre><code>"),i=s[0],a="",n=1;n<s.length;n++){a+='<span class="codeContain"><pre class="line-numbers"><code class="language-clike">';var o=s[n].split("</code></pre>"),r=o[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<br>/g,"\n"),l=(r=Vt.a.highlight(r,Vt.a.languages.clike,"clike")).split("\n");r="";for(var c=0;c<l.length||c<e;c++)c<l.length?r+='<span class="line-numbers-rows">'+l[c]+" </span>":r+='<span class="line-numbers-rows-block"></span>';a+=r,a+='</code></pre><button class="copyContent-btn" style="cursor: pointer">复制</button></span>',a+=o[1]}return i+a},initQuestionData:function(){for(var t in this.PID=this.$route.query.PID,this.languages)if(this.languages[t].value===parseInt(this.$route.query.Lang)){this.languageActive=t;break}},getQuestionData:function(){var t=this;ct.getQuestionDetail("/problems/detail",{problem_id:t.PID,language:t.languages[t.languageActive].value}).then(function(e){t.questionData=e.data,t.canShowShaneBtn=!0})},getList:function(t){this.page=1,this.total=0,this.currentType=t,0===this.currentType?this.getMySolutionsAllUser():this.getMySolutionsMyselfThis()},getMySolutionsAllUser:function(){var t=this;t.ifShowMainList=!1,ct.getStatusHistoryList("/forum/solutions",{problem_id:t.PID,page:t.Page,pagesize:t.pageSize}).then(function(e){t.title=e.data.problem_title,t.solutionsList=e.data.solutions_list,t.total=e.total,setTimeout(function(){t.ifShowMainList=!0},500)})},getMySolutionsMyselfAll:function(){var t=this;ct.getMySolutions("/forum/solutions/my_solutions",{page:t.mS_page,pagesize:t.mS_pagesize}).then(function(e){t.mySolutionsList=e.data.solutions_list,t.mS_total=e.total})},getMySolutionsMyselfThis:function(){var t=this;t.ifShowMainList=!1,ct.getMySolutions("/forum/solutions/my_solutions",{problem_id:t.PID,page:t.page,pagesize:t.pagesize}).then(function(e){t.title=e.data.problem_title,t.solutionsList=e.data.solutions_list,t.total=e.total,setTimeout(function(){t.ifShowMainList=!0},500)})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;ct.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.getQuestionData()}),t.ticket=!0}else this.$message({message:"未登录或丢失缓存，不允许进入题解区！",type:"error",duration:1800}),setTimeout(function(){t.toBack()},800)}},created:function(){this.initQuestionData(),this.initPid=this.PID,this.getListInfo(),this.getList(0)},watch:{$route:function(){"questionSolve"===this.$route.name&&(this.page=1,this.pageSize=20,this.initQuestionData(),this.getQuestionData(),this.getList(1))}}},se={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"questionSolve",on:{click:t.closeLeftContainer}},[t._m(0),t._v(" "),t.ticket?s("div",{staticClass:"btnBox"},[s("button",{staticClass:"btn-openMy",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openLeftContainer(e)}}},[t.ifShowLeftContainer?s("span",[t._v("关"),s("br"),t._v("闭"),s("br"),t._v("历"),s("br"),t._v("程")]):t._e(),t._v(" "),t.ifShowLeftContainer?t._e():s("span",[t._v("我"),s("br"),t._v("的"),s("br"),t._v("分"),s("br"),t._v("享")])]),t._v(" "),t.canShowShaneBtn&&!t.ifShowLeftContainer?s("button",{staticClass:"btn-share",on:{click:function(e){t.ifShowShareSolve=!0}}},[t._v("分"),s("br"),t._v("享")]):t._e(),t._v(" "),s("button",{staticClass:"btn-back",on:{click:t.toBack}},[s("i",{staticClass:"icon-fanhui"})])]):t._e(),t._v(" "),t.ticket?s("div",{staticClass:"container",on:{click:t.closeLeftContainer}},[s("div",{staticClass:"container-btn"},[s("span",{staticClass:"container-title"},[s("span",{staticStyle:{"font-weight":"600",color:"#d43039"}},[t._v(t._s(t.PID))]),t._v("   "+t._s(t.questionData.title))]),t._v(" "),s("button",{class:1===t.currentType?"btn-see-myself btn-active":"btn-see-myself",on:{click:function(e){t.getList(1)}}},[t._v("只看自己")]),t._v(" "),s("button",{class:0===t.currentType?"btn-see-all btn-active":"btn-see-all",on:{click:function(e){t.getList(0)}}},[t._v("查看全部")])]),t._v(" "),t.ifShowMainList&&0===t.total?s("span",{staticClass:"nolist"},[t._v("该题没有任何题解，赶紧"),s("span",{staticClass:"nolist-toShare",on:{click:function(e){t.ifShowShareSolve=!0}}},[t._v("前往分享")]),t._v("你的题解！坐史上第一把板凳！")]):t._e(),t._v(" "),s("transition",{attrs:{name:"main-fade"}},[t.ifShowMainList?s("div",{staticClass:"ul-container"},[s("ul",t._l(t.solutionsList,function(e,i){return s("li",{key:i,class:e.is_liked?"main-frame main-frame-like":"main-frame"},[s("div",{staticClass:"left-frame"},[1===t.currentType?s("img",{attrs:{src:t.info.avatarUrl?t.host+t.info.avatarUrl:t.defaultImage}}):t._e(),t._v(" "),0===t.currentType?s("img",{attrs:{src:e.avatarUrl?t.host+e.avatarUrl:t.defaultImage}}):t._e(),t._v(" "),s("h5",{staticClass:"nick"},[1===t.currentType?s("span",[t._v(t._s(t.info.nick))]):t._e(),t._v(" "),0===t.currentType?s("span",[t._v(t._s(e.nick))]):t._e()]),t._v(" "),0===t.currentType?s("span",{staticClass:"identity"},["0"===e.identity?s("span",{staticStyle:{"background-color":"rgba(204, 204, 204, 1)"}},[t._v("用户题解")]):t._e(),t._v(" "),"1"===e.identity?s("span",{staticStyle:{"background-color":"rgb(255,189,28)"}},[t._v("学生题解")]):t._e(),t._v(" "),"2"===e.identity?s("span",{staticStyle:{"background-color":"rgba(255, 153, 0, 0.8)"}},[t._v("教师题解")]):t._e(),t._v(" "),"3"===e.identity?s("span",{staticStyle:{"background-color":"rgba(100, 149, 237, 0.8)"}},[t._v("管理员题解")]):t._e(),t._v(" "),"4"===e.identity?s("span",{staticStyle:{"background-color":"rgba(142, 204, 69, 0.8)"}},[t._v("官方题解")]):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"right-frame"},[s("div",{staticClass:"content-top"},[1===t.currentType?s("span",[t._v("这篇题解  ")]):t._e(),t._v(" "),0===t.currentType?s("span",[t._v("Ta的题解  ")]):t._e(),t._v(" "),s("span",{staticStyle:{color:"rgb(117,169,57)"}},[t._v("耗时:")]),t._v(" "+t._s(e.run_time)+"  \n            "),s("span",{staticStyle:{color:"rgb(53,75,24)"}},[t._v("内存:")]),t._v(" "+t._s(e.memory)+"  \n            "),s("span",{staticStyle:{color:"rgb(35,53,21)"}},[t._v("代码类型:")]),t._v(" \n            "),t._l(t.languages,function(i,a){return e.language===i.value?s("span",{key:a,staticClass:"language",style:"color:"+i.color},[t._v(" "+t._s(i.title)+" ")]):t._e()})],2),t._v(" "),t.ifNull(e.content)?t._e():s("div",{staticClass:"content-main editorShow",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),t.ifNull(e.content)?s("div",{staticClass:"content-main editorShow no-content"},[t._v("该同学没有留下一点思路，真让人气愤"),s("img",{attrs:{src:"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/62/crazya_thumb.gif",alt:"[抓狂]"}})]):t._e(),t._v(" "),s("div",{staticClass:"content-bottom"},[s("span",{staticClass:"time"},[t._v("\n              分享于 "),s("span",[t._v(t._s(e.date.replace("T"," ")))]),t._v("\n                \n              "),1===t.currentType?s("i",{staticClass:"el-icon-delete btn-del",on:{click:function(s){t.delSolutions(e.forum_solution_id)}}}):t._e()]),t._v(" "),s("span",{staticClass:"oper"},[s("span",[t._v("已有 "),s("span",{staticClass:"likes"},[t._v(t._s(e.likes))]),t._v(" 人点赞")]),t._v("\n                |  \n              "),s("span",{staticClass:"btn-show-code",on:{click:function(e){t.setShowCode(i)}}},[t._v(t._s(t.ifShowCode===i?"关闭源代码":"查看源代码"))])])]),t._v(" "),s("transition",{attrs:{name:"code-fade"}},[t.ifShowCode===i?s("div",{staticClass:"code-container"},[s("div",{staticClass:"code editorShow",domProps:{innerHTML:t._s(t.highlight("<pre><code>"+e.source_code+"</code></pre>",10))}}),t._v(" "),s("button",{staticClass:"btn-like",on:{click:function(s){t.toLike(e.forum_solution_id,e.is_liked,i)}}},[s("i",{staticClass:"icon-zan"})])]):t._e()])],1),t._v(" "),s("div",{staticClass:"main-frame-bottom"})])})),t._v(" "),5===t.solutionsList.length&&1===t.currentType?s("span",{staticClass:"overlist"},[t._v("每个问题最多允许有五篇题解，如若需要继续分享，请删除部分题解")]):t._e()]):t._e()]),t._v(" "),t.total>t.pageSize?s("div",{staticClass:"list-pagination"},[s("el-pagination",{attrs:{"current-page":t.Page,"page-size":t.pageSize,"pager-count":9,background:"",layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1):t._e(),t._v(" "),s("transition",{attrs:{name:"mySolutions-fade"}},[t.ifShowLeftContainer?s("div",{staticClass:"left-container",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[s("h3",{staticClass:"title"},[t._v("我的分享历程")]),t._v(" "),s("div",{staticClass:"mySolutions"},[0===t.mySolutionsList.length?s("span",{staticClass:"nolist"},[t._v("尚未分享，赶紧前往分享")]):t._e(),t._v(" "),0!==t.mySolutionsList.length?s("ul",{staticClass:"mySolutions-ul"},t._l(t.mySolutionsList,function(e,i){return s("li",{key:i,staticClass:"mySolutions-item"},[t.ifSameDay(i)?s("span",{staticClass:"date"},[t._v(t._s(e.date.split("T")[0]))]):t._e(),t._v(" "),s("div",{staticClass:"main"},[s("span",{staticClass:"main-no"},[t._v(t._s(e.problem_id))]),t._v(" "),s("span",{staticClass:"main-title",on:{click:function(s){t.toQueSolve(e.problem_id)}}},[t._v(t._s(e.problem_title))])])])})):t._e()]),t._v(" "),t.mS_total>t.mS_pagesize?s("div",{staticClass:"mS_pagination"},[s("el-pagination",{attrs:{"current-page":t.mS_page,"page-size":t.mS_pagesize,"pager-count":5,layout:"prev, pager, next",total:t.mS_total},on:{"current-change":t.mS_handleCurrentChange}})],1):t._e()]):t._e()]),t._v(" "),s("transition",{attrs:{name:"shareSolve-fade"}},[t.ifShowShareSolve?s("shareSolve",{attrs:{questionData:t.questionData},on:{getCloseMsg:t.closeMsg,getChangeLangMsg:t.changeLangMsg}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"Title"},[this._v("题"),e("br"),this._v("解"),e("br"),this._v("区"),e("br"),e("i",{staticClass:"icon-class"})])}]};var ie=s("VU/8")(ee,se,!1,function(t){s("c/ao")},"data-v-1a5f4b10",null).exports;var ae={getConpList:function(t,e,s,i,a,n){return ji(t,{page:e,pagesize:s,contest_id:i,type:a,state:n}).then(function(t){return p.a.resolve(t.data)})},getContestsDetail:function(t){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})}},ne={data:function(){return{page:1,pagesize:20,total:0,rowclass:"rowclass",cid:"",state:"",type:"",typeList:[{value:1,label:"Password密码"},{value:2,label:"Public公开"},{label:"全部类型"}],options:[{value:0,label:"已结束"},{value:1,label:"进行中"},{label:"全部状态"}],tableData:[],tableLoading:!1}},methods:{getList:function(t,e,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,n=this;n.tableLoading=!0;var o=[];ae.getConpList("/contests",i,a,t,e,s).then(function(t){o=t.data;for(var e=0;e<o.length;e++){var s=o[e].begin.split("T"),i=o[e].end.split("T");o[e].begin=s[0]+" "+s[1],o[e].end=i[0]+" "+i[1]}n.tableData=o,n.total=t.total,n.tableLoading=!1})},searchContest:function(){1!==this.page&&(this.page=1),this.getList(this.cid,this.type,this.state)},clickCall:function(t){var e=this;if(new Date<new Date(t.begin))this.$alert("竞赛还未开始，请等待开始时间");else{var s=window.sessionStorage.getItem("userInfo");"undefined"!==s&&null!==s&&void 0!==s?t.has_password?this.$prompt("请输入密码","验证",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"password"}).then(function(s){var i=s.value;ae.getContestsDetail("/contests/detail?contest_id="+t.contest_id+"&password="+i).then(function(t){if("true"!==t.success)e.$message({message:t.msg,type:"error"});else{var s=t.data.contest_info,i=t.data.contest_info.end.split("T"),a=t.data.contest_info.begin.split("T");s.end=i[0]+" "+i[1],s.begin=a[0]+" "+a[1],e.$router.push({path:"/test",name:"test",params:{dataObj:s,detailObj:t.data.problem_info}})}})}).catch(function(){}):this.$router.push({path:"/test",name:"test",params:{dataObj:t}}):this.$alert("请先登录账号","温馨提示",{confirmButtonText:"去登陆"}).then(function(){e.$router.push({path:"/login"})})}},handleSizeChange:function(t){this.pagesize=t,this.getList(this.cid,this.type,this.state,this.page,t)},handleCurrentChange:function(t){this.getList(this.cid,this.type,this.state,t,this.pagesize)}},created:function(){this.getList()}},oe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"competition"},[s("div",{staticClass:"competition-table"},[s("div",{staticClass:"competition-search"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:3}},[s("el-input",{attrs:{size:"small",placeholder:"请输入竞赛编号"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchContest(e):null}},model:{value:t.cid,callback:function(e){t.cid=e},expression:"cid"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{size:"small",placeholder:"请选择当前状态"},on:{change:t.searchContest},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{size:"small",placeholder:"请选择竞赛类型"},on:{change:t.searchContest},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"statusButton"},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.searchContest}},[t._v("搜索")])],1)])],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.rowclass,stripe:""},on:{"row-click":t.clickCall}},[s("el-table-column",{attrs:{label:"编号",type:"index",align:"center",width:"70px"}}),t._v(" "),s("el-table-column",{attrs:{label:"竞赛编号",align:"center",prop:"contest_id",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),t._v(" "),s("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"begin"}}),t._v(" "),s("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"end"}}),t._v(" "),s("el-table-column",{attrs:{label:"当前状态",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[new Date<new Date(e.row.begin)?s("span",{staticStyle:{color:"#5F90DD"}},[t._v("待进行")]):t._e(),t._v(" "),new Date>new Date(e.row.end)?s("span",{staticStyle:{color:"#F56C6C"}},[t._v("已结束")]):t._e(),t._v(" "),new Date>=new Date(e.row.begin)&&new Date<=new Date(e.row.end)?s("span",{staticStyle:{color:"#67C23A"}},[t._v("进行中")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"开启者",align:"center",prop:"holder",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{label:"类型",align:"center",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.has_password?s("span",{staticStyle:{color:"#F56C6C"}},[t._v("Password密码")]):t._e(),t._v(" "),0==e.row.has_password?s("span",{staticStyle:{color:"#67C23A"}},[t._v("Public公开")]):t._e()]}}])})],1)],1),t._v(" "),s("div",{staticClass:"competition-pagination"},[s("el-pagination",{attrs:{"page-size":t.pagesize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var re=s("VU/8")(ne,oe,!1,function(t){s("7l0S")},"data-v-679b38fc",null).exports;var le={getContestDetail:function(t,e){return ji(t,{contest_id:e.contest_id}).then(function(t){return p.a.resolve(t.data)})}},ce={data:function(){return{tableData:[],msg:{},ListLength:0,finish:0,rankData:{}}},methods:{getPassRate:function(t){return t.accepted?(t.accepted/t.submit*100).toFixed(2):0},getParams:function(){if(void 0!==this.$route.params.dataObj){var t=this.$route.params.dataObj;if(this.msg=t,1!==this.msg.has_password)this.getDetail();else if(t.back){var e=this.$route.params.dataObj;this.tableData=e.problem_list,this.ListLength=e.problem_num,this.msg.problem_list=e.problem_list,this.msg.problem_num=e.problem_num}else{var s=this.$route.params.detailObj;this.tableData=s.problem_list,this.ListLength=s.problem_num,this.msg.problem_list=s.problem_list,this.msg.problem_num=s.problem_num}}else this.$router.push({path:"/competition"})},getDetail:function(){var t=this;le.getContestDetail("/contests/detail",{contest_id:t.msg.contest_id}).then(function(e){t.tableData=e.data.problem_info.problem_list,t.ListLength=e.data.problem_info.problem_num})},toRank:function(){1!==this.msg.has_password?this.$router.push({path:"/competitionRank",name:"competitionRank",params:{dataObj:this.msg,problemList:this.tableData}}):this.$router.push({path:"/competitionRank",name:"competitionRank",params:{dataObj:this.msg}})},toAnswerBoard:function(t){var e=new Date;if(new Date(this.msg.end)>e){var s=this.$router.resolve({path:"/library/questionDetail",query:{PID:t.problem_id,contest_id:this.msg.contest_id}}).href;window.open(s,"_blank")}else this.$alert("竞赛已结束，下次再来","温馨提示",{confirmButtonText:"确定",type:"warning"}).then(function(){})}},watch:{$route:"getParams"},created:function(){this.getParams()}},ue={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"conpetition-test"},[s("div",{staticClass:"test-head"},[s("a",{staticClass:"el-icon-back back",attrs:{href:"#/competition"}}),t._v(" "),s("p",{staticClass:"head-context"},[t._v(t._s(t.msg.title))]),t._v(" "),s("span",{staticClass:"head-state"},[t._v(t._s(t.msg.contest_id))]),t._v(" "),s("span",{staticClass:"head-rank",on:{click:t.toRank}},[t._v("排行榜")])]),t._v(" "),s("div",{staticClass:"test-middle"},[s("el-row",[s("el-col",{attrs:{span:8}},[s("label",{staticClass:"label-name"},[t._v("开始时间")]),t._v(" "),s("span",{staticClass:"label-context"},[t._v(t._s(t.msg.begin))])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("label",{staticClass:"label-name"},[t._v("结束时间")]),t._v(" "),s("span",{staticClass:"label-context"},[t._v(t._s(t.msg.end))])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("label",{staticClass:"label-name"},[t._v("问题总数")]),t._v(" "),s("span",{staticClass:"label-context"},[t._v(t._s(t.ListLength))])]),t._v(" "),s("el-col",{attrs:{span:4}},[s("label",{staticClass:"label-name"},[t._v("完成数")]),t._v(" "),s("span",{staticClass:"label-context"},[t._v("0")])])],1)],1),t._v(" "),s("div",{staticClass:"test-bottom"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"problem_id",label:"题目编号",align:"center",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"titleFont",staticStyle:{cursor:"pointer"},on:{click:function(s){t.toAnswerBoard(e.row)}}},[t._v("\n            "+t._s(e.row.title)+"\n          ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"解决人数",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.accepted))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"通过率",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:t.getPassRate(e.row)>=80?"green":t.getPassRate(e.row)>=40?"blue":"red"},[t._v(t._s(t.getPassRate(e.row))+"%")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"完成状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.finished?s("span",{staticStyle:{color:"#00BC61"}},[t._v("已完成")]):s("span",{staticStyle:{color:"red"}},[t._v("未完成")])]}}])})],1)],1)])},staticRenderFns:[]};var de=s("VU/8")(ce,ue,!1,function(t){s("y+Rs")},"data-v-56ce99c3",null).exports;var pe={getcontentsRank:function(t,e,s,i){return ji(t,{contest_id:e,page:s,pagesize:i}).then(function(t){return p.a.resolve(t.data)})}},he={data:function(){return{List:[{one:"1",two:"",tree:"",four:"",five:"",six:"",seven:"",eight:"",nine:"",ten:""}],isShow:!1,tableData:"",problemlist:[],ftableData:[{reply:[]}],pagesize:10,page:1,rankTotal:50,tableLoading:!1}},methods:{back:function(){this.tableData.back=!0,this.$router.push({path:"/test",name:"test",params:{dataObj:this.tableData}})},refresh:function(){void 0!==this.tableData&&""!==this.tableData&&this.getContestRank(this.tableData.contest_id,this.page,this.pagesize)},getParams:function(){var t=this.$route.params.dataObj;void 0!==this.$route.params.dataObj?(this.problemlist=t.problem_list,this.problemlist||(this.problemlist=this.$route.params.problemList),this.tableData=t):this.$router.push({path:"/competition"})},handleSizeChange:function(t){this.pagesize=t,this.getContestRank(this.tableData.contest_id,this.page,t)},handleCurrentChange:function(t){this.page=t,this.getContestRank(this.tableData.contest_id,t,this.pagesize)},getContestRank:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableData.contest_id,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=this;i.tableLoading=!0,pe.getcontentsRank("/contests/rank",t,e,s).then(function(t){i.ftableData=t.data,i.rankTotal=t.total;for(var a=0;a<t.data.length;a++)i.ftableData[a].rate=(t.data[a].accept_num/t.data[a].submit_num*100).toFixed(2)+"%",i.ftableData[a].ranking=s*(e-1)+a+1;i.setReply(),i.tableLoading=!1})},setReply:function(){if(this.problemlist)for(var t=this.ftableData,e=0;e<t.length;e++){var s=t[e].finish.split(""),i=t[e].submit.split(",");t[e].reply=[],t[e].submit=[];for(var a=0;a<this.problemlist.length;a++)t[e].reply.push({number:this.problemlist[a].problem_id,reply:"1"===s[a]}),t[e].submit.push({number:this.problemlist[a].problem_id,submit:i[a]})}}},created:function(){this.getParams(),this.getContestRank()}},fe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"competitionRank"},[s("div",{staticClass:"rank-head"},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-button",{staticClass:"back",attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.back}},[t._v("返回")]),t._v(" "),s("span",{staticClass:"rank-context"},[t._v(t._s(t.tableData.title)+"排行榜")])],1),t._v(" "),s("el-button",{attrs:{id:"refresh",type:"primary",plain:""},on:{click:t.refresh}},[t._v("刷新")])],1)],1),t._v(" "),s("div",{staticClass:"rank-table"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.ftableData,stripe:""}},[s("el-table-column",{attrs:{fixed:"",label:"名次",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.ranking?s("span",{staticStyle:{color:"rgb(248, 208, 28)"}},[s("i",{staticClass:"icon-diyi"})]):2==e.row.ranking?s("span",{staticStyle:{color:"rgb(190, 197, 204)"}},[s("i",{staticClass:"icon-dier"})]):3==e.row.ranking?s("span",{staticStyle:{color:"rgb(208, 153, 106)"}},[s("i",{staticClass:"icon-disan"})]):s("span",[t._v(t._s(e.row.ranking))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"",label:"昵称",align:"center",prop:"nick"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"",label:"解决",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.accept_num))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"",label:"提交",align:"center",prop:"submit_num"}}),t._v(" "),s("el-table-column",{attrs:{fixed:"",label:"通过率",align:"center",prop:"rate"}}),t._v(" "),t._l(t.ftableData[0].reply,function(e,i){return s("el-table-column",{key:i,attrs:{label:e.number.toString(),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{class:{greenback:e.row.reply[i].reply,redback:!e.row.reply[i].reply}},[t._v(t._s(e.row.submit[i].submit))])]}}])})}),t._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"总用时",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.all_time)+"ms")])]}}])})],2)],1),t._v(" "),s("div",{staticClass:"competition-pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.rankTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[]};var me=s("VU/8")(he,fe,!1,function(t){s("H15U")},"data-v-0a1efbf6",null).exports;var ge={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getCourseList:function(t){return ji(t).then(function(t){return p.a.resolve(t.data)})},postUserImg:function(t,e){return function(t,e){return new p.a(function(s,i){var a=new FormData;a.append("file",e.file),a.append("uid",e.uid),f()({method:"post",url:Bi+t,data:a,headers:{"ConTent-Type":"multipart/form-data"},xhrFields:{withCredentials:!0},dataType:"json"}).then(function(t){return s(t)})})}(t,e).then(function(t){return p.a.resolve(t.data)})},getUserFeedback:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},getCoursesTest:function(t,e){return ji(t,{courses_id:e}).then(function(t){return p.a.resolve(t.data)})},getTestProblems:function(t,e){return ji(t,{exam_id:e}).then(function(t){return p.a.resolve(t.data)})},addCourses:function(t,e){return Vi(t,e).then(function(t){return p.a.resolve(t.data)})},updateCourses:function(t,e){return Ui(t,e).then(function(t){return p.a.resolve(t.data)})},deleteCourse:function(t,e){return Hi(t,{courses_id:e}).then(function(t){return p.a.resolve(t.data)})},getClassList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize,academy_id:e.academy_id,grade:e.grade}).then(function(t){return p.a.resolve(t.data)})},getClassStatsList:function(t,e){return ji(t,{class_id:e.class_id,start_date:e.start_date,end_date:e.end_date}).then(function(t){return p.a.resolve(t.data)})},getStudentsStatsList:function(t,e){return ji(t,{code:e.code,start_date:e.start_date,end_date:e.end_date}).then(function(t){return p.a.resolve(t.data)})},deleteTest:function(t,e){return Hi(t,{exam_id:e}).then(function(t){return p.a.resolve(t.data)})},putUpdateTestInfo:function(t,e){return Ji(t,e).then(function(t){return p.a.resolve(t.data)})},addClassToCourse:function(t,e){return Vi(t,e).then(function(t){return p.a.resolve(t.data)})},getExaminationList:function(t,e){return ji(t,{uid:e.uid,courses_id:e.coursesId}).then(function(t){return p.a.resolve(t.data)})},getStudentTestList:function(t,e){return ji(t,{exam_id:e.examId,class_id:e.classId}).then(function(t){return p.a.resolve(t.data)})},updateUserInfo:function(t,e){return Ji(t,e).then(function(t){return p.a.resolve(t.data)})},updatePassword:function(t,e){return Qi(t,e).then(function(t){return p.a.resolve(t.data)})},getClassByCoursesId:function(t,e){return ji(t,{courses_id:e}).then(function(t){return p.a.resolve(t.data)})},getQuizStudents:function(t,e){return ji(t,{class_id:e.class_id,quiz_id:e.quiz_id}).then(function(t){return p.a.resolve(t.data)})},putPublicationResults:function(t,e){return Ui(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},getUserPosts:function(t,e){return ji(t,{user_id:e.user_id,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getNoticeList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getRepliesList:function(t,e){return ji(t,{page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},publishContribution:function(t,e){return Ki(t,{params:e}).then(function(t){return p.a.resolve(t.data)})},getUserContribution:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},sendReply:function(t,e){return Ki(t,e).then(function(t){return p.a.resolve(t.data)})},setHadRead:function(t,e){return Gi(t,{params:e}).then(function(t){return p.a.resolve(t.data)})},deletePost:function(t,e){return Wi(t,{post_id:e}).then(function(t){return p.a.resolve(t.data)})},getChildReplies:function(t,e){return ji(t,{reply_id:e.reply_id,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},getTopPostsList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})}},_e={props:{info:{type:Object}},data:function(){return{avatarUrl:"",postData:new FormData,headers:{"Content-Type":"application/json"},defaultImage:s("IT0F")}},methods:l()({},Object(ht.c)(["SET_USER"]),{beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,s="image/png"===t.type,i="image/gif"===t.type,a=t.size/1024/1024<2;for(var n in e||s||i||(this.$message.error("请上传JPG、PNG、GIF格式头像图片!"),t.abort()),a||(this.$message.error("上传头像图片大小不能超过 2MB!"),t.abort()),this.info)this.postData.append(n,this.info[n])},uploadImg:function(t){var e=this,s={file:t.file};ge.postUserImg("/users/uploadImage",s).then(function(t){"true"===t.success?(e.$message({message:"上传成功!",type:"success",duration:1500}),e.info.avatarurl=t.data+"?_t="+(new Date).getTime(),e.avatarUrl=Bi+e.info.avatarurl,e.setSessionStorage(),e.SET_USER(e.info||{})):e.$message({message:"上传失败!",type:"error",duration:1500})})},setInfoAvatarUrl:function(){this.avatarUrl=this.info.avatarurl?Bi+this.info.avatarurl:this.defaultImage},setSessionStorage:function(){localStorage.setItem("userInfo",u()(this.info))}}),created:function(){this.setInfoAvatarUrl()}},ve={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-head clearfix"},[s("div",{staticClass:"head-img"},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8080","http-request":t.uploadImg,"show-file-list":!1,"before-upload":t.beforeAvatarUpload}},[t.info.avatarurl?s("img",{staticClass:"avatar",attrs:{src:t.avatarUrl}}):t._e()])],1),t._v(" "),s("div",{staticClass:"information"},[s("span",{staticClass:"nick"},[t._v(t._s(t.info.nick))]),t._v(" "),"2"===t.info.identity?s("span",{staticClass:"identity"},[t._v("(教师)")]):t._e(),t._v(" "),"1"===t.info.identity?s("span",{staticClass:"identity"},[t._v("(学生)")]):t._e(),t._v(" "),"3"===t.info.identity?s("span",{staticClass:"identity"},[t._v("(管理员)")]):t._e(),t._v(" "),s("div",{staticClass:"bottom"},[s("div",{staticClass:"line"},[s("i",{staticClass:"icon-class"}),t._v(" "),"1"==t.info.identity?s("span",[t._v("学号:")]):t._e(),t._v(" "),"2"==t.info.identity?s("span",[t._v("教工号:")]):t._e(),t._v(" "),s("span",[t._v(t._s(t.info.code))])]),t._v(" "),s("div",{staticClass:"line"},[s("i",{staticClass:"icon-academy"}),t._v(" "),1==t.info.identity?s("span",[t._v("班级:")]):t._e(),t._v(" "),1==t.info.identity?s("span",[t._v(t._s(t.info.class_name))]):t._e(),t._v(" "),2==t.info.identity?s("span",[t._v("学院:")]):t._e(),t._v(" "),2==t.info.identity?s("span",[t._v(t._s(t.info.academy))]):t._e(),t._v(" "),0==t.info.identity?s("span",[t._v("QQ:")]):t._e(),t._v(" "),0==t.info.identity?s("span",[t._v(t._s(t.info.qq))]):t._e()]),t._v(" "),s("div",{staticClass:"line"},[1!=t.info.identity?s("i",{staticClass:"el-icon-message"}):t._e(),t._v(" "),1!=t.info.identity?s("span",[t._v("邮箱:")]):t._e(),t._v(" "),1!=t.info.identity?s("span",[t._v(t._s(t.info.email))]):t._e()]),t._v(" "),s("div",{staticClass:"line"},[s("i",{staticClass:"icon-time"}),t._v(" "),s("span",[t._v("最近登录时间")]),t._v(" "),s("span",[t._v(t._s(t.info.login_time.replace("T"," ")))])])])])])},staticRenderFns:[]};var be=s("VU/8")(_e,ve,!1,function(t){s("Hgb0"),s("HHdH")},"data-v-cdfbf44e",null).exports,ye={data:function(){return{selectPageIndex:this.page,showPrev:!1,showNext:!1,inputValue:1,pages:[]}},props:{pageTotal:{type:Number,required:!0,default:1},page:{type:Number,default:1},currentPage:{type:Function}},methods:{createFunc:function(){this.resetPagination(this.selectPageIndex)},resetPagination:function(t){this.inputValue=t;var e=0;for(5===this.pageTotal||6===this.pageTotal?(e=(t=1)+5,this.showPrev=!1,this.showNext=!1):t<=4?(e=(t=1)+5,this.showPrev=!1):t>=this.pageTotal-4?(e=(t=this.pageTotal-4)+5,this.showNext=!1,this.showPrev=!0):(e=(t-=2)+5,this.showPrev=!0),this.pages=[];t<e;){if(!(t<=this.pageTotal)){this.showNext=!1;break}this.pages.push(t),t++}t===e&&t<this.pageTotal?this.showNext=!0:(t===this.pageTotal&&this.pages.push(t),this.showNext=!1)},switchListPrev:function(t){this.changeSelectPageIndex(this.selectPageIndex-t)},switchListNext:function(t){this.changeSelectPageIndex(this.selectPageIndex+t)},changeSelectPageIndex:function(t){var e=parseInt(t);if(!isNaN(e)){if(e<1)this.selectPageIndex=1;else if(e>this.pageTotal)this.selectPageIndex=this.pageTotal;else{if(e===this.selectPageIndex)return;this.selectPageIndex=e}this.resetPagination(this.selectPageIndex),this.$emit("currentPage",this.selectPageIndex)}}},watch:{pageTotal:function(){this.selectPageIndex=1,this.resetPagination(this.selectPageIndex)},page:function(){this.selectPageIndex=this.page,this.inputValue=this.page},$route:function(){console.log("router change......");var t=parseInt(this.$route.query.page)||1;this.changeSelectPageIndex(t)}},created:function(){this.createFunc()}},we={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pagination2"},[s("div",{staticClass:"pagination2-container"},[s("div",{staticClass:"page-item",class:{disabled:1===t.selectPageIndex},on:{click:function(e){t.switchListPrev(1)}}},[t._v("上一页")]),t._v(" "),t.showPrev?s("div",{staticClass:"page-item",on:{click:function(e){t.changeSelectPageIndex(1)}}},[t._v(t._s(1))]):t._e(),t._v(" "),t.showPrev?s("span",{staticClass:"page-omit",on:{click:function(e){t.switchListPrev(5)}}},[t._v(". . .")]):t._e(),t._v(" "),t._l(t.pages,function(e,i){return s("div",{key:i,staticClass:"page-item",class:{active:e===t.selectPageIndex},on:{click:function(s){t.changeSelectPageIndex(e)}}},[t._v(t._s(e))])}),t._v(" "),t.showNext?s("span",{staticClass:"page-omit",on:{click:function(e){t.switchListNext(5)}}},[t._v(". . .")]):t._e(),t._v(" "),t.showNext?s("div",{staticClass:"page-item",on:{click:function(e){t.changeSelectPageIndex(t.pageTotal)}}},[t._v(t._s(t.pageTotal))]):t._e(),t._v(" "),s("div",{staticClass:"page-item",class:{disabled:t.selectPageIndex===t.pageTotal},on:{click:function(e){t.switchListNext(1)}}},[t._v("下一页")]),t._v(" "),s("span",[t._v("跳至")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.inputValue},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.changeSelectPageIndex(t.inputValue)},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),s("span",[t._v("页")]),t._v(" "),s("div",{staticClass:"page-item",on:{click:function(e){t.changeSelectPageIndex(t.inputValue)}}},[t._v("Go")])],2)])},staticRenderFns:[]};var Ce=s("VU/8")(ye,we,!1,function(t){s("JztD")},"data-v-499b655a",null).exports;function ke(t){for(var e=[],s=document.querySelector(t).querySelectorAll("tr"),i=[],a=1;a<s.length;++a){for(var n=[],o=s[a].querySelectorAll("td"),r=0;r<o.length;++r){var l=o[r],c=l.getAttribute("colspan"),u=l.getAttribute("rowspan"),d=l.innerText;if(""!==d&&d==+d&&(d=+d),i.forEach(function(t){if(a>=t.s.r&&a<=t.e.r&&n.length>=t.s.c&&n.length<=t.e.c)for(var e=0;e<=t.e.c-t.s.c;++e)n.push(null)}),(u||c)&&(u=u||1,c=c||1,i.push({s:{r:a,c:n.length},e:{r:a+u-1,c:n.length+c-1}})),n.push(""!==d?d.toString():null),c)for(var p=0;p<c-1;++p)n.push(null)}e.push(n)}return e}function Te(t,e,s){var i=e;i.unshift(t);var a=new function t(){if(!(this instanceof t))return new t;this.SheetNames=[],this.Sheets={}},n=function(t,e){for(var s,i={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=t.length;++n)for(var o=0;o!=t[n].length;++o){a.s.r>n&&(a.s.r=n),a.s.c>o&&(a.s.c=o),a.e.r<n&&(a.e.r=n),a.e.c<o&&(a.e.c=o);var r={v:t[n][o]};if(null!=r.v){var l=XLSX.utils.encode_cell({c:o,r:n});"number"==typeof r.v?r.t="n":"boolean"==typeof r.v?r.t="b":r.v instanceof Date?(r.t="n",r.z=XLSX.SSF._table[14],r.v=(s=r.v,(Date.parse(s)-new Date(Date.UTC(1899,11,30)))/864e5)):r.t="s",i[l]=r}}return a.s.c<1e7&&(i["!ref"]=XLSX.utils.encode_range(a)),i}(i);a.SheetNames.push("SheetJS"),a.Sheets.SheetJS=n;var o=XLSX.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"}),r=s+"-OJ数据统计表"||"OJ数据统计列表";saveAs(new Blob([function(t){for(var e=new ArrayBuffer(t.length),s=new Uint8Array(e),i=0;i!=t.length;++i)s[i]=255&t.charCodeAt(i);return e}(o)],{type:"application/octet-stream"}),r+".xlsx")}s("aOHy"),s("3vFU"),s("Ia/g");var Se={name:"classInformation",props:{classInfoId:{type:String}},data:function(){return{studentId:"",classForm:{},studentsForm:{},xDate:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-6048e5),t.$emit("pick",[s,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-2592e6),t.$emit("pick",[s,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,s=new Date;s.setTime(s.getTime()-7776e6),t.$emit("pick",[s,e])}}]},sdate:"",edate:"",startDate:"",endDate:"",echart_top:null,echart_bottom:null,title:"班级信息统计面板",ifStudentShow:!1,ifOpenStudentList:!1,dataLoading:!0}},methods:{export2Excel:function(){var t=this;new Promise(function(t){t()}).then(function(){Te(["学号","姓名","提交数","通过数","通过率"],ke("#excel__list-data"),t.title)}.bind(null,s)).catch(s.oe)},closeStats:function(){this.$emit("closeMsg",!1)},openStudentMsg:function(t){this.studentId=t.code,this.studentName=t.student_name,this.ifStudentShow=!0,this.getClassStats(this.classInfoId,this.studentId)},hideStudentMsg:function(){this.ifStudentShow=!1,this.studentId="",this.updateData(),this.title=this.classForm.class_name},getClassStats:function(t,e){var s,i,a,n=this;if(void 0!==n.sdate&&""!==n.sdate&&null!=n.sdate&&void 0!==n.edate&&""!==n.edate&&null!=n.edate)n.sdate>n.edate?(n.startDate=n.edate,n.endDate=n.sdate):(n.startDate=n.sdate,n.endDate=n.edate);else{var o=new Date;n.startDate=o.getFullYear()+"-"+(o.getMonth()+1)+"-1",o.getDate()<7&&(n.startDate=0===o.getMonth()?o.getFullYear()-1+"-12-25":o.getFullYear()+"-"+o.getMonth()+"-25"),n.endDate=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()}a=Date.parse(n.startDate),s=Date.parse(n.endDate)-a,s=Math.abs(s),i=Math.floor(s/864e5),n.xDate=[],n.xDate.push(n.startDate);for(var r=n.startDate,l=0;l<i;l++){r=+(r=new Date(r))+864e5,r=(r=new Date(r)).getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),n.xDate.push(r)}arguments.length>1?ge.getStudentsStatsList("/students/stats",{code:e,start_date:n.startDate,end_date:n.endDate}).then(function(t){n.studentsForm=t.data,n.updateData("student"),n.title="学生"+n.studentName+"情况统计"}):(n.dataLoading=!0,ge.getClassStatsList("/classes/stats",{class_id:t,start_date:n.startDate,end_date:n.endDate}).then(function(t){"true"===t.success?(n.classForm=t.data,n.updateData(),n.title=n.classForm.class_name,n.dataLoading=!1):(n.$message({message:"服务器中无此班数据！",type:"error",showClose:!0,duration:1500}),setTimeout(function(){n.closeStats()},800))}))},drawPie:function(t){this.echart_top=S.a.init(document.getElementById(t)),this.echart_top.setOption({title:{text:"班级情况统计"},tooltip:{trigger:"axis"},legend:{data:["通过数","提交数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},yAxis:{type:"value"},series:[{name:"通过数",type:"line",data:this.classForm.per_accepted},{name:"提交数",type:"line",data:this.classForm.per_submitted}]})},drawOnline:function(t){this.echart_bottom=S.a.init(document.getElementById(t)),this.echart_bottom.setOption({title:{text:"班级上线人数情况统计"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},yAxis:{type:"value"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},series:[{data:this.classForm.per_online,type:"line",areaStyle:{}}]})},clearData:function(){this.echart_top.setOption({xAxis:{type:"category",boundaryGap:!1,data:[]},series:[{name:"通过数",type:"line",data:[]},{name:"提交数",type:"line",data:[]}]}),this.echart_bottom.setOption({xAxis:{type:"category",boundaryGap:!1,data:[]},series:[{data:[],type:"line",areaStyle:{}}]})},updateData:function(){1===arguments.length?(this.echart_top.setOption({title:{text:"数据统计"},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},series:[{name:"通过数",type:"line",data:this.studentsForm.per_stu_accepted},{name:"提交数",type:"line",data:this.studentsForm.per_stu_submitted}]}),this.echart_bottom.setOption({title:{text:"Ta的在线时长统计<尚未完成，敬请期待>"},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},series:[{data:[],type:"line",areaStyle:{}}]})):(this.title=this.classForm.class_name,this.echart_top.setOption({title:{text:"班级情况统计"},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},series:[{name:"通过数",type:"line",data:this.classForm.per_accepted},{name:"提交数",type:"line",data:this.classForm.per_submitted}]}),this.echart_bottom.setOption({title:{text:"班级上线人数情况统计"},xAxis:{type:"category",boundaryGap:!1,data:this.xDate},series:[{data:this.classForm.per_online,type:"line",areaStyle:{}}]}))}},mounted:function(){this.$nextTick(function(){this.drawPie("main"),this.drawOnline("onlineCount")})},created:function(){this.getClassStats(this.classInfoId)},watch:{classInfoId:function(){this.sdate="",this.edate="",this.studentId="",this.title="班级信息统计面板",this.classForm.student_list=[],this.ifOpenStudentList=!1,this.ifStudentShow=!1,this.clearData(),this.getClassStats(this.classInfoId)},sdate:function(){void 0!==this.edate&&""!==this.edate&&null!=this.edate&&(this.ifStudentShow?(this.xDate=[],this.title="班级信息统计面板",this.clearData(),this.getClassStats(this.classInfoId,this.studentId)):(this.xDate=[],this.title="班级信息统计面板",this.clearData(),this.getClassStats(this.classInfoId)))},edate:function(){void 0!==this.sdate&&""!==this.sdate&&null!=this.sdate&&(this.ifStudentShow?(this.xDate=[],this.title="班级信息统计面板",this.clearData(),this.getClassStats(this.classInfoId,this.studentId)):(this.xDate=[],this.title="班级信息统计面板",this.clearData(),this.getClassStats(this.classInfoId)))}}},xe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"classInformation",staticClass:"classInformation"},[s("div",{staticClass:"container"},[t.ifStudentShow?s("div",{staticClass:"backClassStats-btn",on:{click:t.hideStudentMsg}},[s("i",{staticClass:"icon-left-arrow"}),t._v(" 返回班级统计")]):t._e(),t._v(" "),s("div",{staticClass:"flewBox"},[s("div",{staticClass:"echart-container"},[s("div",{staticClass:"closeStats-btn",on:{click:t.closeStats}},[s("i",{staticClass:"icon-guanbi"})]),t._v(" "),s("span",{staticClass:"cName"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"selectTime"},[s("span",[t._v("请选择时间")]),t._v(" "),s("el-date-picker",{staticClass:"sDate",attrs:{type:"date",placeholder:"起始日期",format:"yyyy - MM - dd ","value-format":"yyyy-MM-dd"},model:{value:t.sdate,callback:function(e){t.sdate=e},expression:"sdate"}}),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("el-date-picker",{staticClass:"eDate",attrs:{type:"date",placeholder:"结束日期",format:"yyyy - MM - dd ","value-format":"yyyy-MM-dd"},model:{value:t.edate,callback:function(e){t.edate=e},expression:"edate"}})],1),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dataLoading,expression:"dataLoading"}]},[s("div",{staticClass:"echart_top",attrs:{id:"main"}}),t._v(" "),s("div",{staticClass:"echart_bottom",attrs:{id:"onlineCount"}})])]),t._v(" "),s("transition",{attrs:{name:"table-fade"}},[t.dataLoading?t._e():s("div",{staticClass:"data-container",attrs:{id:"excel__list-data"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.classForm.student_list,height:"100%",border:"","default-sort":{prop:"code",order:"ascending"}},on:{"row-click":t.openStudentMsg}},[s("el-table-column",{attrs:{width:"140",property:"code",label:"学号",align:"center",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{width:"120",property:"student_name",label:"姓名",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{width:"120",property:"submit",label:"提交数",align:"center",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{width:"120",property:"accept",label:"通过数",align:"center",sortable:""}}),t._v(" "),s("el-table-column",{attrs:{property:"rate",label:"通过率",align:"center",sortable:""}})],1)],1)]),t._v(" "),s("transition",{attrs:{name:"button-fade"}},[t.dataLoading?t._e():s("div",{staticClass:"btn-to-excel"},[s("span",{staticClass:"button-excel",on:{click:function(e){t.export2Excel()}}},[s("i",{staticClass:"el-icon-download"})])])])],1)])])},staticRenderFns:[]};var De=s("VU/8")(Se,xe,!1,function(t){s("rgtS")},"data-v-7144c83b",null).exports,qe={props:{identity:{type:String,default:""},courseData:{type:Array}},components:{classPagination:Ce,classInformation:De},data:function(){return{classData:[],defaultProps:{children:"children",label:"label"},classDialog:!1,dialogVisible:!1,addOrEdit:"add",newCourseFrom:{schoolYear:"",semester:"",courseName:""},semesterOption:[{value:"1",label:"第一学期"},{value:"2",label:"第二学期"}],courseTable:[{year:"2015-2016",term:"第一学期",courseName:"如何变帅",className:"18软件",operating:1,courseId:"001"}],addId:-1,classPage:{total:1,page:1,size:10,loading:!1},addClassArr:[],checkedClass:[],havedChoosedClass:[],expands:[],ifClick:-1,doubleClick:!1,showDelClass:{classId:-1,rowId:-1},classInfoId:"",classInfoVisible:!1}},methods:{getCloseMsg:function(t){this.classInfoVisible=t},toQuiz:function(t){var e=window.sessionStorage;e.removeItem("courseInfo"),e.setItem("courseInfo",u()(t)),this.$router.push({name:"PersonalCenter",params:{isShow:4},query:{courseId:t.courses_id}})},editQuiz:function(t){this.addOrEdit="edit",this.newCourseFrom.classList=t.class_id,this.newCourseFrom.courseId=t.courses_id,this.newCourseFrom.courseName=t.courses_name,this.newCourseFrom.schoolYear=t.grade,this.newCourseFrom.semester=t.term.toString(),this.dialogVisible=!0},handleCheckChange:function(t,e,s){if(e){for(var i=!0,a=0;a<this.addClassArr.length;a++)if(t.id===this.addClassArr[a].id){i=!1;break}if(i){var n={id:t.id,label:t.label};(function(t,e){for(var s=0;s<t.length;s++)if(e.id===t[s].id&&e.label===t[s].label)return!0;return!1})(this.addClassArr,n)||this.addClassArr.push(n)}}else this.addClassArr.splice(this.addClassArr.findIndex(function(e){return e.id===t.id}),1)},handleCurrentPage:function(t){this.classPage.page=t,this.getClass()},editClass:function(t,e){this.addClassArr=[],this.classPage.page=1,this.newCourseFrom.classList=[],this.newCourseFrom.courseId=e.courses_id,this.newCourseFrom.courseName=e.courses_name,this.newCourseFrom.schoolYear=e.grade,this.newCourseFrom.semester=e.term.toString();for(var s=0;s<e.class_id.length;s++)this.addClassArr.push({id:parseInt(e.class_id[s]),label:e.class_name[s]});this.getClass(t)},delClass:function(t,e,s){var i=this,a={course_id:t,class_id:e.class_id,grade:e.grade,term:parseInt(e.term),course_name:e.courses_name},n=a.class_id.indexOf(s);n>-1&&a.class_id.splice(n,1),ge.updateCourses("/courses",a).then(function(t){"true"===t.success?(i.$message({message:"班级删除成功",type:"success"}),i.$emit("refreshCourse")):i.$message({message:"班级删除成功，请稍候再试",type:"warning"})})},getClass:function(t){var e=this;e.classPage.loading=!0,this.classData=[],t&&(e.addId=t);var s={page:e.classPage.page,pagesize:e.classPage.size};ge.getClassList("/classes",s).then(function(t){for(var s=0;s<t.data.length;s++){var i={id:parseInt(t.data[s].class_id),label:t.data[s].class_name};e.classData.push(i)}e.classPage.total=Math.ceil(t.total/e.classPage.size),e.classPage.loading=!1,e.addClassArr.length&&e.$nextTick(function(){for(var t=[],s=e.addClassArr,i=0;i<s.length;i++)t.push(s[i].id);e.$refs.addClassTree.setCheckedKeys(t)})}),this.classDialog=!0},rowMouseEnter:function(t){if(!this.doubleClick&&this.ifClick!==t.courses_id)if(this.ifClick=-1,this.expands=[],this.expands.indexOf(t.courses_id)<0)this.expands.push(t.courses_id);else{var e=this.expands.indexOf(t.courses_id);e>-1&&this.expands.splice(e,1)}},rowClick:function(t){if(this.expands.length!==this.courseData.length){var e=this.expands.indexOf(t.courses_id);e>-1?(this.ifClick=t.courses_id,this.expands.splice(e,1)):this.expands.push(t.courses_id)}},rowDoubleClick:function(t){if(this.expands.length===this.courseData.length)this.doubleClick=!1,this.expands=[],this.expands.push(t.courses_id);else{this.doubleClick=!0,this.expands=[];for(var e=0;e<this.courseData.length;e++)this.expands.push(this.courseData[e].courses_id)}},messageOpen:function(t){var e=this,s=this;this.$confirm("此操作将会删除该课程, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.$message({type:"success",message:"删除成功!",callback:s.deleteCourse(t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},deleteCourse:function(t){var e,s=this,i=window.sessionStorage.getItem("userInfo");"undefined"!==i&&null!==i&&void 0!==i?e=JSON.parse(i):console.log(e),ge.deleteCourse("/courses",t.courses_id).then(function(t){s.$emit("refreshCourse")})},openAddCourse:function(){this.addOrEdit="add",this.newCourseFrom.classList=[],this.newCourseFrom.courseId=null,this.newCourseFrom.courseName=null,this.newCourseFrom.schoolYear=null,this.newCourseFrom.semester=null,this.dialogVisible=!0},addCourse:function(){var t,e=this,s=window.sessionStorage.getItem("userInfo");"undefined"!==s&&null!==s&&void 0!==s?t=JSON.parse(s):console.log(t);var i={grade:this.newCourseFrom.schoolYear,term:this.newCourseFrom.semester,courses_name:this.newCourseFrom.courseName};ge.addCourses("/courses",i).then(function(t){e.$emit("refreshCourse")}),this.dialogVisible=!this.dialogVisible},editCourse:function(){var t,e=this,s=window.sessionStorage.getItem("userInfo");"undefined"!==s&&null!==s&&void 0!==s?t=JSON.parse(s):console.log(t);var i={course_id:this.newCourseFrom.courseId,class_id:this.newCourseFrom.classList,grade:this.newCourseFrom.schoolYear,term:parseInt(this.newCourseFrom.semester),course_name:this.newCourseFrom.courseName};ge.updateCourses("/courses",i).then(function(t){"true"===t.success?(e.$message({message:"课程编辑成功",type:"success"}),e.$emit("refreshCourse")):e.$message({message:"课程编辑失败，请稍候再试",type:"warning"})}),this.dialogVisible=!this.dialogVisible},editClassToCourse:function(){for(var t=this,e=this.addClassArr,s=0;s<e.length;s++)this.newCourseFrom.classList.push(e[s].id.toString());var i={course_id:this.newCourseFrom.courseId,class_id:this.newCourseFrom.classList,grade:this.newCourseFrom.schoolYear,term:parseInt(this.newCourseFrom.semester),course_name:this.newCourseFrom.courseName};ge.updateCourses("/courses",i).then(function(e){"true"===e.success?(t.$message({message:"修改班级列表成功",type:"success"}),t.$emit("changeCoursesTable",!0)):t.$message({message:"修改班级列表失败，请稍候再试",type:"warning"}),t.classDialog=!1})},detail:function(t){var e={grade:t.grade,term:t.term,courses_name:t.courses_name,class_id:t.class_id,class_name:t.class_name,courses_id:t.courses_id,disable:!1};this.$emit("disablePerson",e)},getClassInfo:function(t){this.classInfoId=null,this.classInfoVisible=!0,this.classInfoId=t}}},Ie={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mycourse-module"},[2==t.identity?s("div",{staticClass:"add-pad"},[s("el-button",{attrs:{type:"primary"},on:{click:t.openAddCourse}},[t._v("添加课程")])],1):t._e(),t._v(" "),s("div",{staticClass:"courseDate-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.courseData,stripe:"","row-key":"courses_id","expand-row-keys":t.expands},on:{"row-click":t.rowClick,"row-mouse-leave":function(e){t.ifClick=!1},"cell-mouse-enter":t.rowMouseEnter,"row-dblclick":t.rowDoubleClick}},[2==t.identity?s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[s("el-form-item",[s("div",{staticClass:"title"},[s("h5",[t._v("对应班级")])]),t._v(" "),s("div",{staticClass:"labelBox"},[t._l(e.row.class_name,function(i,a){return s("span",{key:a,staticClass:"class-item",attrs:{title:i},on:{mouseover:function(s){t.showDelClass.classId=e.row.class_id[a],t.showDelClass.rowId=e.row.courses_id},mouseleave:function(e){t.showDelClass.classId=-1,t.showDelClass.rowId=-1},click:function(s){t.getClassInfo(e.row.class_id[a])}}},[t._v(t._s(i)+"\n                    "),s("transition",{attrs:{name:"closeBtn"}},[t.showDelClass.classId===e.row.class_id[a]&&t.showDelClass.rowId===e.row.courses_id?s("i",{staticClass:"el-icon-close",on:{click:function(s){s.stopPropagation(),t.delClass(e.row.courses_id,e.row,e.row.class_id[a])}}}):t._e()])],1)}),t._v(" "),s("span",{staticClass:"class-item",on:{click:function(s){t.editClass(e.row.courses_id,e.row)}}},[s("i",{staticClass:"el-icon-plus"})])],2)])],1)]}}])}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"grade",align:"center",width:"120",label:"学年"}}),t._v(" "),s("el-table-column",{attrs:{prop:"term",align:"center",width:"120",label:"学期"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("第"+t._s(e.row.term)+"学期")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"课程名"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticStyle:{cursor:"pointer"},attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.courses_name))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"280",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==t.identity?s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(s){t.messageOpen(e.row)}}}):t._e(),t._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-document",size:"small"},on:{click:function(s){t.detail(e.row)}}},[t._v("测")]),t._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-tickets",size:"small"},on:{click:function(s){t.toQuiz(e.row)}}},[t._v("考")]),t._v(" "),2==t.identity?s("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:function(s){t.editQuiz(e.row)}}}):t._e()]}}])})],1)],1),t._v(" "),s("transition",{attrs:{name:"stats-fade"}},[t.classInfoVisible?s("classInformation",{attrs:{classInfoId:t.classInfoId},on:{closeMsg:t.getCloseMsg}}):t._e()],1),t._v(" "),s("el-dialog",{attrs:{title:"请选择要绑定班级",visible:t.classDialog,width:"40%"},on:{"update:visible":function(e){t.classDialog=e}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.classPage.loading,expression:"classPage.loading"}],staticClass:"tree-box"},[s("el-tree",{ref:"addClassTree",attrs:{data:t.classData,"show-checkbox":"","check-on-click-node":!0,"node-key":"id","default-checked-keys":t.checkedClass,props:t.defaultProps},on:{"check-change":t.handleCheckChange}})],1),t._v(" "),s("classPagination",{attrs:{pageTotal:t.classPage.total,page:t.classPage.page},on:{currentPage:t.handleCurrentPage}}),t._v(" "),s("div",{staticClass:"selected-class"},t._l(t.addClassArr,function(e,i){return s("div",{key:i,staticClass:"list-item"},[t._v("\n        "+t._s(e.label)+"\n      ")])})),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.classDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.editClassToCourse}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"add"===t.addOrEdit?"添加课程":"课程编辑",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{staticClass:"addFrom",attrs:{model:t.newCourseFrom}},[s("el-form-item",{attrs:{label:"学年"}},[s("el-input",{attrs:{placeholder:"请输入学年,格式如:2015-2016"},model:{value:t.newCourseFrom.schoolYear,callback:function(e){t.$set(t.newCourseFrom,"schoolYear",e)},expression:"newCourseFrom.schoolYear"}})],1),t._v(" "),s("el-form-item",{staticClass:"semester",attrs:{label:"学期"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.newCourseFrom.semester,callback:function(e){t.$set(t.newCourseFrom,"semester",e)},expression:"newCourseFrom.semester"}},t._l(t.semesterOption,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"课程名"}},[s("el-input",{attrs:{placeholder:"输入课程名"},model:{value:t.newCourseFrom.courseName,callback:function(e){t.$set(t.newCourseFrom,"courseName",e)},expression:"newCourseFrom.courseName"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),"add"===t.addOrEdit?[s("el-button",{attrs:{type:"primary"},on:{click:t.addCourse}},[t._v("添加课程")])]:[s("el-button",{attrs:{type:"primary"},on:{click:t.editCourse}},[t._v("编辑完成")])]],2)],1)],1)},staticRenderFns:[]};var ze=s("VU/8")(qe,Ie,!1,function(t){s("sNId")},"data-v-59970cc8",null).exports,Le={props:{Info:{type:Object}},data:function(){return{fromData:{uid:"",nick:"",email:"",sex:"",qq:"",signature:"",contact:""},infoRules:{signature:[{validator:this.checkSign,trigger:"blur"}],nick:[{validator:this.checkName,trigger:"blur"}],qq:[{validator:this.checkQQ,trigger:"blur"}]},isEditing:!1,isBaseDisable:!0,isRealDisable:!0,isNameDisable:!1,maxLength:60,maxname:20}},methods:{checkSign:function(t,e,s){if(e){for(var i=this,a=0,n=0;n<e.length;n++)e.charAt(n).charCodeAt()>255?a+=2:a++;var o=setTimeout(function(){a>i.maxLength?s(new Error("签名字数超出限制")):s(),clearTimeout(o)},300)}else s()},checkName:function(t,e,s){var i=setTimeout(function(){(0===e.indexOf("GPNU_")?/^[-\w\u4e00-\u9fa5]{2,20}$/:/^[-\w\u4e00-\u9fa5]{2,14}$/).test(e)?s():s(new Error("昵称不符合规格")),clearTimeout(i)},300)},checkQQ:function(t,e,s){if(e)var i=setTimeout(function(){/^[0-9]{6,10}$/.test(e)?s():s(new Error("请输入正确的QQ号码")),clearTimeout(i)},300);else s()},handleEdit:function(){this.isEditing=!this.isEditing,this.isEditing?this.isBaseDisable=!1:this.isBaseDisable=!0},getInfo:function(){this.Info&&(this.fromData.uid=this.Info.uid,this.fromData.nick=this.Info.nick,this.fromData.sex=this.Info.sex,"1"===this.Info.identity&&(this.isNameDisable=!0),this.Info.qq&&(this.fromData.qq=parseInt(this.Info.qq)),this.fromData.contact=this.Info.contact,this.fromData.email=this.Info.email,this.fromData.signature=this.Info.signature)},saveChange:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("输入不规范！"),!1;e.$emit("updateInfo",e.fromData)})}},watch:{info:"getInfo"},created:function(){this.getInfo()}},Pe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Information"},[s("div",{staticClass:"Info-head"},[s("span",[t._v("基本信息")]),t._v(" "),t.isEditing?t._e():s("button",{staticClass:"edit",on:{click:t.handleEdit}},[t._v("编辑")]),t._v(" "),t.isEditing?s("button",{staticClass:"edit submit",on:{click:function(e){t.saveChange("fromData")}}},[t._v("保存")]):t._e()]),t._v(" "),s("div",{staticClass:"Info-from"},[s("el-form",{ref:"fromData",attrs:{model:t.fromData,"label-position":"right","label-width":"80px",rules:t.infoRules}},[s("div",{staticClass:"info-area base-info"},[s("el-form-item",{attrs:{label:"用户昵称",prop:"nick"}},[s("el-input",{attrs:{"status-icon":"","auto-complete":"off",clearable:"",disabled:t.isBaseDisable||t.isNameDisable},model:{value:t.fromData.nick,callback:function(e){t.$set(t.fromData,"nick",e)},expression:"fromData.nick"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-radio-group",{attrs:{size:"medium",disabled:t.isBaseDisable},model:{value:t.fromData.sex,callback:function(e){t.$set(t.fromData,"sex",e)},expression:"fromData.sex"}},[s("el-radio",{attrs:{border:"",label:0}},[t._v("男")]),t._v(" "),s("el-radio",{attrs:{border:"",label:1}},[t._v("女")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[s("el-input",{attrs:{clearable:"",disabled:t.isBaseDisable},model:{value:t.fromData.qq,callback:function(e){t.$set(t.fromData,"qq",e)},expression:"fromData.qq"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{attrs:{clearable:"",disabled:t.isBaseDisable},model:{value:t.fromData.email,callback:function(e){t.$set(t.fromData,"email",e)},expression:"fromData.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"联系方式"}},[s("el-input",{attrs:{clearable:"",disabled:t.isBaseDisable},model:{value:t.fromData.contact,callback:function(e){t.$set(t.fromData,"contact",e)},expression:"fromData.contact"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"个性签名",prop:"signature"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:4},"status-icon":"","auto-complete":"off",disabled:t.isBaseDisable,resize:t.isBaseDisable?"none":"vertical"},model:{value:t.fromData.signature,callback:function(e){t.$set(t.fromData,"signature",e)},expression:"fromData.signature"}})],1)],1),t._v(" "),"2"===t.Info.identity||"1"===t.Info.identity?s("div",{staticClass:"info-area real-info"},[s("el-form-item",{attrs:{label:"学校"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.school_name))])]),t._v(" "),s("el-form-item",{attrs:{label:"学院"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.academy))])]),t._v(" "),"1"==t.Info.identity?s("el-form-item",{attrs:{label:"班级"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.class_name))])]):t._e(),t._v(" "),"1"==t.Info.identity?s("el-form-item",{attrs:{label:"年级"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.grade)+"级")])]):t._e(),t._v(" "),"1"==t.Info.identity?s("el-form-item",{attrs:{label:"学号"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.code))])]):t._e(),t._v(" "),"2"==t.Info.identity?s("el-form-item",{attrs:{label:"教工号"}},[s("span",{staticClass:"from-data"},[t._v(t._s(t.Info.code))])]):t._e()],1):t._e()])],1)])},staticRenderFns:[]};var Re=s("VU/8")(Le,Pe,!1,function(t){s("P/ti"),s("tYky")},"data-v-378774ec",null).exports,Ae={data:function(){var t=this;return{User:{},isShowE:!1,isShowQ:!1,formdata:{qq:"",newqq:"",password:"",oldemail:"",newemail:"",newpassword:"",Checkpassword:""},checkdata:{qq:"",newqq:"",password:"",email:"",newpassword:"",Checkpassword:""},changePassword:{ori_password:"",new_password:"",re_password:""},passwordRule:{ori_password:[{required:!0,message:"请输入旧密码",trigger:"blur"}],new_password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:16,message:"密码长度在6到16个字符之间",trigger:"blur"}],re_password:[{validator:function(e,s,i){""===s?i(new Error("请再次输入密码")):s!==t.changePassword.new_password?i(new Error("两次输入密码不一致!")):i()}}]}}},methods:{checkQQ:function(){this.formdata.password===this.checkdata.password?(this.formdata.qq=this.checkdata.qq,this.isShowQ=!1):this.$message.error("你输入的密码不正确")},checkEmail:function(){this.formdata.password===this.checkdata.password?(this.formdata.oldemail=this.checkdata.email,this.isShowE=!1):this.$message.error("你输入的密码不正确")},getUserStore:function(){var t=window.sessionStorage.getItem("userInfo");if("undefined"!==t&&null!==t&&void 0!==t){var e=JSON.parse(t);this.User=e}},updatePassword:function(){var t=this;this.$refs.passwordForm.validate(function(e){e&&t.$emit("updatePass",t.changePassword)})}},created:function(){this.getUserStore()}},Ee={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setting"},[s("div",{staticClass:"password"},[s("p",{staticClass:"qq-title"},[t._v("密码")]),t._v(" "),s("div",{staticClass:"qqFrom"},[s("el-form",{ref:"passwordForm",attrs:{rules:t.passwordRule,model:t.changePassword,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"旧密码",prop:"ori_password"}},[s("el-input",{attrs:{placeholder:"输入旧密码",type:"password"},model:{value:t.changePassword.ori_password,callback:function(e){t.$set(t.changePassword,"ori_password",e)},expression:"changePassword.ori_password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"new_password"}},[s("el-input",{attrs:{placeholder:"输入新密码",type:"password"},model:{value:t.changePassword.new_password,callback:function(e){t.$set(t.changePassword,"new_password",e)},expression:"changePassword.new_password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"re_password"}},[s("el-input",{attrs:{placeholder:"再次输入密码",type:"password"},model:{value:t.changePassword.re_password,callback:function(e){t.$set(t.changePassword,"re_password",e)},expression:"changePassword.re_password"}})],1)],1),t._v(" "),s("div",{staticClass:"button"},[s("el-button",{attrs:{size:"medium",type:"success"},on:{click:t.updatePassword}},[t._v("保存")])],1)],1)]),t._v(" "),s("div",{staticClass:"QQ"},[s("p",{staticClass:"qq-title"},[t._v("手机号")]),t._v(" "),""!==t.formdata.qq&&null!==t.formdata.qq?s("div",{staticClass:"qqFrom"},[s("el-form",{ref:"form",attrs:{model:t.formdata,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"旧的qq"}},[s("el-input",{attrs:{placeholder:"输入旧的手机号",disabled:""},model:{value:t.formdata.qq,callback:function(e){t.$set(t.formdata,"qq",e)},expression:"formdata.qq"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新的qq"}},[s("el-input",{attrs:{placeholder:"输入新的手机号"},model:{value:t.formdata.newqq,callback:function(e){t.$set(t.formdata,"newqq",e)},expression:"formdata.newqq"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{placeholder:"输入验证码"},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}})],1)],1),t._v(" "),s("div",{staticClass:"button"},[s("el-button",{attrs:{size:"medium",type:"success"}},[t._v("保存")])],1)],1):s("div",{staticClass:"dataNull"},[s("img",{attrs:{src:"/static/image/empty3.png",alt:""}}),t._v(" "),s("div",{staticClass:"dataNull-div"},[s("span",[t._v("你暂时还没有绑定手机号")]),t._v(" "),s("el-button",{on:{click:function(e){t.isShowQ=!0}}},[t._v("去绑定")])],1)]),t._v(" "),s("div",{staticClass:"qqDialog"},[s("el-dialog",{attrs:{title:"绑定手机号",visible:t.isShowQ,width:"30%"},on:{"update:visible":function(e){t.isShowQ=e}}},[s("el-form",{ref:"form",attrs:{model:t.checkdata,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"手机号码"}},[s("el-input",{attrs:{placeholder:"输入手机号码"},model:{value:t.checkdata.qq,callback:function(e){t.$set(t.checkdata,"qq",e)},expression:"checkdata.qq"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"验证码"}},[s("el-input",{attrs:{placeholder:"输入验证码"},model:{value:t.checkdata.password,callback:function(e){t.$set(t.checkdata,"password",e)},expression:"checkdata.password"}})],1),t._v(" "),s("div",{staticClass:"submit"},[s("el-button",{on:{click:t.checkQQ}},[t._v("确认")])],1)],1)],1)],1)]),t._v(" "),s("div",{staticClass:"email"},[s("p",{staticClass:"email-title"},[t._v("邮箱")]),t._v(" "),""!==t.User.email&&null!==t.User.email?s("div",{staticClass:"emailFrom"},[s("el-form",{ref:"form",attrs:{model:t.User,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"旧邮箱"}},[s("el-input",{attrs:{placeholder:"输入旧邮箱地址",disabled:""},model:{value:t.User.email,callback:function(e){t.$set(t.User,"email",e)},expression:"User.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新邮箱"}},[s("el-input",{attrs:{placeholder:"输入新邮箱邮箱"},model:{value:t.formdata.newemail,callback:function(e){t.$set(t.formdata,"newemail",e)},expression:"formdata.newemail"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{placeholder:"输入密码"},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}})],1)],1),t._v(" "),s("div",{staticClass:"button"},[s("el-button",{attrs:{size:"medium",type:"success"}},[t._v("保存")])],1)],1):s("div",{staticClass:"dataNull"},[s("img",{attrs:{src:"/static/image/empty3.png",alt:""}}),t._v(" "),s("div",{staticClass:"dataNull-div"},[s("span",[t._v("你暂时还没有绑定邮箱")]),t._v(" "),s("el-button",{on:{click:function(e){t.isShowE=!0}}},[t._v("去绑定")])],1)]),t._v(" "),s("div",{staticClass:"EmailDialog"},[s("el-dialog",{attrs:{title:"绑定邮箱",visible:t.isShowE,width:"30%"},on:{"update:visible":function(e){t.isShowE=e}}},[s("el-form",{ref:"form",attrs:{model:t.checkdata,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"邮箱地址"}},[s("el-input",{attrs:{placeholder:"输入邮箱地址"},model:{value:t.checkdata.email,callback:function(e){t.$set(t.checkdata,"email",e)},expression:"checkdata.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"验证码"}},[s("el-input",{attrs:{placeholder:"输入验证码"},model:{value:t.checkdata.password,callback:function(e){t.$set(t.checkdata,"password",e)},expression:"checkdata.password"}})],1),t._v(" "),s("div",{staticClass:"submit"},[s("el-button",{on:{click:t.checkEmail}},[t._v("确认")])],1)],1)],1)],1)])])},staticRenderFns:[]};var Fe=s("VU/8")(Ae,Ee,!1,function(t){s("5XlF")},"data-v-2a0ef987",null).exports,$e={props:{ProblemInfo:{type:Object}},data:function(){return{done_list:[],not_done_list:[]}},methods:{getProblemList:function(){this.done_list=this.ProblemInfo.done_list,this.not_done_list=this.ProblemInfo.not_done_list},toDetail:function(t){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t}}).href;window.open(e,"_blank")}},created:function(){this.getProblemList()}},Oe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"burshResult"},[s("div",{staticClass:"Info-bottom"},[s("el-alert",{attrs:{title:"已完成题目",type:"success",closable:!1}}),t._v(" "),s("div",{staticClass:"success-topic passList"},t._l(t.done_list,function(e,i){return s("div",{key:i,staticClass:"inline"},[s("span",{staticClass:"topic",on:{click:function(s){t.toDetail(e.problem_id)}}},[t._v(t._s(e.problem_id))]),t._v(" "),s("span",{staticClass:"Num"},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))])])})),t._v(" "),s("el-alert",{attrs:{title:"未完成的题目",type:"error",closable:!1}}),t._v(" "),s("div",{staticClass:"success-topic"},t._l(t.not_done_list,function(e,i){return s("div",{key:i,staticClass:"inline"},[s("span",{staticClass:"topic undone",on:{click:function(s){t.toDetail(e.problem_id)}}},[t._v(t._s(e.problem_id))]),t._v(" "),s("span",{staticClass:"Num"},[t._v(t._s(e.accepted)+"/"+t._s(e.submit))])])}))],1)])},staticRenderFns:[]};var Ne=s("VU/8")($e,Oe,!1,function(t){s("KJ2C")},"data-v-1d7d37ce",null).exports,Me={name:"CallFeedback",data:function(){return{feedbackDialog:!1,feedbackType:[{label:"用户体验",value:1},{label:"用户界面",value:2},{label:"题库",value:3},{label:"后台效率",value:4},{label:"发现BUG",value:5},{label:"新功能",value:6},{label:"其他",value:7}],feedbackForm:{title:"",content:"",type:1},feedbackRule:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]},showFeedbackListData:[],showFeedbackListPartData:[],page:1,pageSize:10}},methods:{openEditBox:function(){this.feedbackForm={title:"",content:"",type:1},this.feedbackDialog=!this.feedbackDialog},indexMethod:function(t){return t-(this.pageSize-1)+this.page*this.pageSize},getType:function(t){for(var e=0;e<this.feedbackType.length;e++)if(t===this.feedbackType[e].value)return this.feedbackType[e].label},sendFeedback:function(){var t=this;t.$refs.form.validate(function(e){if(!e)return!1;k.postFeedback("/feedbacks",t.feedbackForm).then(function(e){"true"===e.success?(t.$message({message:"反馈成功，我们会及时处理您的建议",type:"success"}),t.getFeedbackList(),t.feedbackDialog=!1):(t.$message.error("反馈上传失败，请稍候再试"),t.feedbackDialog=!1)})})},getFeedbackList:function(){var t=this;ge.getUserFeedback("/feedbacks/mine",{}).then(function(e){t.showFeedbackListData=e.data.feedback_list,t.handleCurrentChange(1)})},handleCurrentChange:function(t){this.page=t,this.showFeedbackListPartData=null,this.showFeedbackListPartData=this.showFeedbackListData.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}},created:function(){this.getFeedbackList()}},Be={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CallFeedback"},[s("div",{staticClass:"feedback-head"},[s("span",[t._v("反馈意见")]),t._v(" "),s("button",{staticClass:"edit",on:{click:t.openEditBox}},[t._v("发布")])]),t._v(" "),s("div",{staticClass:"feedback-content"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.showFeedbackListPartData,border:"",stripe:"","header-row-class-name":"head-class"}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticStyle:{"line-height":"2em"}},[s("span",{staticClass:"content"},[t._v("反馈内容 | ")]),t._v(t._s(e.row.content))])]}}])}),t._v(" "),s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60",index:t.indexMethod}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"反馈标题",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"反馈类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.getType(e.row.type)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"审核情况",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.is_solved?s("span",{staticStyle:{color:"#6495ed","font-weight":"600"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.is_solved?s("span",{staticStyle:{color:"#8ecc45","font-weight":"600"}},[t._v("已通过")]):t._e(),t._v(" "),2===e.row.is_solved?s("span",{staticStyle:{color:"#ff6c3f","font-weight":"600"}},[t._v("未通过")]):t._e()]}}])})],1)],1),t._v(" "),s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next, jumper",total:t.showFeedbackListData.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),s("el-dialog",{attrs:{title:"反馈意见",visible:t.feedbackDialog,width:"60%"},on:{"update:visible":function(e){t.feedbackDialog=e}}},[s("el-form",{ref:"form",attrs:{rules:t.feedbackRule,model:t.feedbackForm,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.feedbackForm.title,callback:function(e){t.$set(t.feedbackForm,"title",e)},expression:"feedbackForm.title"}})],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"反馈类型"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-select",{attrs:{placeholder:"请选择反馈类型"},model:{value:t.feedbackForm.type,callback:function(e){t.$set(t.feedbackForm,"type",e)},expression:"feedbackForm.type"}},t._l(t.feedbackType,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"反馈内容",prop:"content"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容",resize:"none"},model:{value:t.feedbackForm.content,callback:function(e){t.$set(t.feedbackForm,"content",e)},expression:"feedbackForm.content"}})],1)],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.feedbackDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sendFeedback}},[t._v("提交我的建议")])],1)],1)],1)},staticRenderFns:[]};var je=s("VU/8")(Me,Be,!1,function(t){s("VVwl")},"data-v-9bfc3198",null).exports,Ue={name:"itemContribution",components:{wangEditor:Xt},data:function(){return{isShowDialog:!1,isShowTagDialog:!1,treeData:[],tagTree:[],saveContent:"hello",addTagArr:[],tagValue:[],content:"",newTags:[],post:{tagids:[],title:"",description:"",input:"",output:"",sample_input:"",sample_output:"",hint:"",source:"",time_limit:null,memory_limit:null},defaultProps:{children:"children",label:"label"},showContributionListData:[],showContributionListPartData:[],page:1,pageSize:8,contributeRule:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],sample_input:[{required:!0,message:"样例输入不能为空",trigger:"blur"}],sample_output:[{required:!0,message:"样例输出不能为空",trigger:"blur"}],source:[{required:!0,message:"题目来源不能为空",trigger:"blur"}],time_limit:[{required:!0,message:"运行时间限制不能为空",trigger:"blur"},{type:"number",message:"运行时间限制必须为数字值"}],memory_limit:[{required:!0,message:"运行内存限制不能为空",trigger:"blur"},{type:"number",message:"运行内存限制必须为数字值"}]}}},methods:{openEditBox:function(){window.scrollTo(0,0),this.isShowDialog=!this.isShowDialog},indexMethod:function(t){return t-(this.pageSize-1)+this.page*this.pageSize},recursiveData:function(t,e,s,i){for(var a in t){var n={value:a,label:s[a],isFather:i,children:[]};if(e.push(n),t[a]==={})break;this.recursiveData(t[a],e,s,a)}return e},initTagTree1:function(){var t=this,e=[],s=[],i=[],a=[];yt.getQuestionList("/tags").then(function(n){e=n.data.tag_dict,s=n.data.tag_tree,t.recursiveData(s,i,e,"0");for(var o=0;o<i.length;o++)for(var r=0;r<i.length;r++)i[o].value===i[r].isFather&&i[o].children.push(i[r]);for(var l=0;l<i.length;l++)"0"===i[l].isFather&&a.push(i[l]);t.treeData=a})},resetForm:function(){this.$refs.post.resetFields(),this.post={tagids:[],title:"",description:"",input:"",output:"",sample_input:"",sample_output:"",hint:"",source:"",time_limit:null,memory_limit:null},this.newTags=[],this.tagValue=[],this.addTagArr=[],this.$refs.addTagTree.setCheckedKeys(this.tagValue)},initTagTree:function(){var t=this,e=[],s=[];yt.getQuestionList("/tags").then(function(i){for(var a in e=i.data.tag_dict,s=i.data.tag_tree){var n={key:a,label:e[a],children:t.initTree(e,s[a])};t.tagTree.push(n)}})},objEmpty:function(t){for(var e in t)return!1;return!0},initTree:function(t,e){if(this.objEmpty(e))return[];var s=[];for(var i in e){var a={value:i,label:t[i]};s.push(a)}return s},handleCurrentChange:function(t){this.page=t,this.showContributionListPartData=null,this.showContributionListPartData=this.showContributionListData.slice((this.page-1)*this.pageSize,this.page*this.pageSize)},handleCheckChange:function(t,e,s){var i=function(t,e){for(var s=0;s<t.length;s++)if(e.value===t[s].value&&e.label===t[s].label)return!0;return!1};if(e){var a=!0;this.addTagArr.length>=5&&(this.$refs.addTagTree.setCheckedKeys(this.tagValue),a=!1,this.$message.error({message:"最多只能选择5个标签!",duration:1e3}));for(var n=0;n<this.addTagArr.length;n++)if(t.value===this.addTagArr[n].value){a=!1;break}if(a){var o={value:t.value,label:t.label,children:t.children};i(this.addTagArr,o)||0!==o.children.length||(this.tagValue.push(o.value),this.addTagArr.push(o)),i(this.addTagArr,o)||0===o.children.length||(this.$refs.addTagTree.setCheckedKeys(this.tagValue),this.$message.error({message:"父节点不作选择，请选择其子节点！",duration:1e3}))}}else{var r=this.addTagArr.findIndex(function(e){return e.value===t.value});-1!==r&&(this.addTagArr.splice(r,1),this.tagValue.splice(r,1))}},delLabel:function(t){this.$delete(this.newTags,t),this.$delete(this.post.tagids,t),this.$delete(this.addTagArr,t),this.$delete(this.tagValue,t),this.$refs.addTagTree.setCheckedKeys(this.tagValue)},getTitleDesc:function(t){this.post.description=t},getInput:function(t){this.post.input=t},getOutput:function(t){this.post.output=t},getHint:function(t){this.post.hint=t},addTags:function(){if(0===this.addTagArr.length)this.$message.error({message:"请选择标签！",duration:1e3});else{this.newTags=[];for(var t=0;t<this.addTagArr.length;t++)this.newTags[t]=this.addTagArr[t],this.post.tagids[t]=parseInt(this.addTagArr[t].value);this.isShowTagDialog=!1}},sendMyContribution:function(){var t=this;t.$refs.post.validate(function(e){if(!e||0===t.post.tagids.length||""===t.post.description.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")||""===t.post.input.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")||""===t.post.output.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")||""===t.post.hint.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,""))return 0===t.post.tagids.length&&""!==t.post.description.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")&&""!==t.post.input.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")&&""!==t.post.output.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")&&""!==t.post.hint.replace(/<[^>]+>/g,"").replace(/&nbsp;/gi,"")?t.$message.error({message:"请选择题目标签!",duration:1e3}):t.$message.error({message:"请完整填写选项!",duration:1e3}),!1;ge.publishContribution("/problems/contribute",{tagids:t.post.tagids,title:t.post.title,description:t.post.description,input:t.post.input,output:t.post.output,sample_input:t.post.sample_input,sample_output:t.post.sample_output,hint:t.post.hint,source:t.post.source,time_limit:t.post.time_limit,memory_limit:t.post.memory_limit}).then(function(e){"true"===e.success?(t.resetForm(),t.$message.success({message:"提交成功，请等待审核!",duration:1e3}),t.getContributionList(),t.isShowDialog=!1):(t.$message.error({message:"提交失败!",duration:1e3}),t.isShowDialog=!1)})})},getContributionList:function(){var t=this;ge.getUserContribution("/problems/contribute/my_contributions",{}).then(function(e){t.showContributionListData=e.data.problem_list,t.showContributionListData.map(function(t){return t.in_date=t.in_date.replace("T"," "),t}),t.handleCurrentChange(1)})},closeDialog:function(){this.isShowDialog=!1,this.resetForm()}},created:function(){this.initTagTree(),this.initTagTree1(),this.getContributionList()}},He={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"itemContribution"},[s("div",{staticClass:"contribution-head"},[s("span",[t._v("题库贡献")]),t._v(" "),s("button",{staticClass:"edit",on:{click:t.openEditBox}},[t._v("发布")])]),t._v(" "),s("div",{staticClass:"contribution-content"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.showContributionListPartData,border:"",stripe:"","header-row-class-name":"head-class"}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60",index:t.indexMethod}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"题目标题",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"贡献时间",width:"180",prop:"in_date"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"审核情况",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.verify_status?s("span",{staticStyle:{color:"#6495ed","font-weight":"600"}},[t._v("待审核")]):t._e(),t._v(" "),1===e.row.verify_status?s("span",{staticStyle:{color:"#8ecc45","font-weight":"600"}},[t._v("已通过")]):t._e(),t._v(" "),2===e.row.verify_status?s("span",{staticStyle:{color:"#ff6c3f","font-weight":"600"}},[t._v("不通过")]):t._e()]}}])})],1)],1),t._v(" "),s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,background:"",layout:"total, prev, pager, next, jumper",total:t.showContributionListData.length},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t.isShowDialog?s("div",{staticClass:"Box",attrs:{id:"Box"}},[s("div",{staticClass:"box-header"},[s("span",{staticClass:"box-title"},[t._v("题库贡献")]),t._v(" "),s("i",{staticClass:"el-icon-close",attrs:{id:"btn"},on:{click:t.closeDialog}})]),t._v(" "),s("div",{staticClass:"box-content"},[s("el-form",{ref:"post",attrs:{rules:t.contributeRule,"hide-required-asterisk":"","status-icon":"","inline-message":"","label-position":"top",model:t.post}},[s("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[s("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"tag"}},[s("span",{staticStyle:{"font-size":"14px",color:"#606266","line-height":"40px"}},[t._v("题目标签")]),t._v(" "),s("div",{staticClass:"tag-item",on:{click:function(e){t.isShowTagDialog=!t.isShowTagDialog}}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("ul",t._l(t.newTags,function(e,i){return s("span",{key:i,staticClass:"list-item"},[t._v(t._s(e.label)),s("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:function(e){t.delLabel(i)}}})])}))]),t._v(" "),s("el-form-item",{attrs:{label:"题目描述",prop:"titleDesc"}},[s("div",{attrs:{id:"titleDesc"}},[s("wangEditor",{ref:"tDesc",staticClass:"wang",attrs:{editorType:3,catchData:t.getTitleDesc,content:t.post.description,height:"280px"}})],1)]),t._v(" "),s("el-form-item",{attrs:{label:"输入描述",prop:"inputDesc"}},[s("div",{attrs:{id:"inputDesc"}},[s("wangEditor",{staticClass:"wang",attrs:{editorType:3,catchData:t.getInput,content:t.post.input,height:"280px"}})],1)]),t._v(" "),s("el-form-item",{attrs:{label:"输出描述",prop:"outputDesc"}},[s("div",{attrs:{id:"outputDesc"}},[s("wangEditor",{staticClass:"wang",attrs:{editorType:3,content:t.post.output,catchData:t.getOutput,height:"280px"}})],1)]),t._v(" "),s("el-form-item",{attrs:{label:"输入样例",prop:"sample_input"}},[s("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容",resize:"none"},model:{value:t.post.sample_input,callback:function(e){t.$set(t.post,"sample_input",e)},expression:"post.sample_input"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"输出样例",prop:"sample_output"}},[s("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容",resize:"none"},model:{value:t.post.sample_output,callback:function(e){t.$set(t.post,"sample_output",e)},expression:"post.sample_output"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"题目提示",prop:"tips"}},[s("div",{attrs:{id:"tips"}},[s("wangEditor",{staticClass:"wang",attrs:{editorType:3,catchData:t.getHint,content:t.post.hint,height:"280px"}})],1)]),t._v(" "),s("el-form-item",{attrs:{label:"题目来源",prop:"source"}},[s("el-input",{attrs:{placeholder:"请输入题目来源"},model:{value:t.post.source,callback:function(e){t.$set(t.post,"source",e)},expression:"post.source"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"运行时间限制（单位S）",prop:"time_limit"}},[s("el-input",{attrs:{placeholder:"请输入运行时间限制"},model:{value:t.post.time_limit,callback:function(e){t.$set(t.post,"time_limit",t._n(e))},expression:"post.time_limit"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"运行内存限制（单位MB）",prop:"memory_limit"}},[s("el-input",{attrs:{placeholder:"请输入运行内存限制"},model:{value:t.post.memory_limit,callback:function(e){t.$set(t.post,"memory_limit",t._n(e))},expression:"post.memory_limit"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"footer"},[s("el-button",{staticStyle:{width:"50px",height:"30px"},on:{click:t.closeDialog}},[t._v("取 消")]),t._v(" "),s("el-button",{staticStyle:{width:"50px",height:"30px"},attrs:{type:"primary"},on:{click:t.sendMyContribution}},[t._v("提交")])],1)]):t._e(),t._v(" "),s("el-dialog",{attrs:{visible:t.isShowTagDialog},on:{"update:visible":function(e){t.isShowTagDialog=e}}},[s("el-button",{staticStyle:{width:"50px",height:"30px"},attrs:{type:"primary"},on:{click:t.addTags}},[t._v("保存")]),t._v(" "),s("div",{staticStyle:{"margin-top":"10px"}},[s("el-tree",{ref:"addTagTree",attrs:{data:t.treeData,"show-checkbox":"","node-key":"value","check-strictly":"","highlight-current":"",props:t.defaultProps},on:{"check-change":t.handleCheckChange}})],1),t._v(" "),s("div",{staticClass:"selected-tag"},t._l(t.addTagArr,function(e,i){return s("div",{key:i,staticClass:"inline-list-item"},[t._v("\n        "+t._s(e.label)+"\n      ")])}))],1)],1)},staticRenderFns:[]};var Qe=s("VU/8")(Ue,He,!1,function(t){s("+Snl")},"data-v-6e9a6d6e",null).exports;var Ve={getInfoList:function(t,e){return ji(t,{uid:e}).then(function(t){return p.a.resolve(t.data)})},getTemplateList:function(t,e){return ji(t,{}).then(function(t){return p.a.resolve(t.data)})},deleteTemplate:function(t,e){return Hi(t,{template_id:e}).then(function(t){return p.a.resolve(t.data)})},updateTemplate:function(t,e){return Gi(t,{template_id:e.template_id,name:e.name,question_type:e.question_type}).then(function(t){return p.a.resolve(t.data)})},addTemplate:function(t,e){return Ki(t,{name:e.name,question_type:e.question_type}).then(function(t){return p.a.resolve(t.data)})},getQuestionList:function(t,e){return ji(t,{params:e}).then(function(t){return p.a.resolve(t.data)})},getQuizProblemList:function(t,e){return Ki(t,{type:e.type,range:e.range,page:e.page,pagesize:e.pagesize}).then(function(t){return p.a.resolve(t.data)})},checkOnlyPreviewQuiz:function(t,e){return ji(t,{courses_id:e}).then(function(t){return p.a.resolve(t.data)})},getPreviewInitData:function(t,e){return ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},autoAddProblem:function(t,e){return Ki(t,e).then(function(t){return p.a.resolve(t.data)})},getQuizList:function(t,e){return ji(t,e).then(function(t){return p.a.resolve(t.data)})},getQuizInfo:function(t,e,s){return ji(t,{quiz_id:e,isAnswer:s}).then(function(t){return p.a.resolve(t.data)})},getStudentAnswer:function(t,e){return ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},saveStudentAnswer:function(t,e,s){return Gi(t,{quiz_id:e.quiz_id,answer_list:e.answer_list,isFinish:s}).then(function(t){return p.a.resolve(t.data)})},markProblem:function(t,e){return Gi(t,{quiz_id:e.quiz_id,problem_id:e.problem_id,item_id:e.item_id}).then(function(t){return p.a.resolve(t.data)})},cancelMarkProblem:function(t,e){return function(t,e){return console.log(u()(e)),new p.a(function(s,i){f()({method:"delete",url:Bi+t,data:u()(e),headers:{"ConTent-Type":"application/json; charset=utf-8"},dataType:"json"}).then(function(t){return s(t)})})}(t,{quiz_id:e.quiz_id,problem_id:e.problem_id,item_id:e.item_id}).then(function(t){return p.a.resolve(t.data)})},postOrPreviewQuiz:function(t,e,s){return Ki(t,{quiz_id:e.quiz_id,courses_id:e.courses_id,isPreview:s?1:0,info:e.quizInfo,template_id:e.template_id,problemRange:e.problemRange,detail:e.problemList}).then(function(t){return p.a.resolve(t.data)})},getPreviewQuiz:function(t,e,s){return ji(t,{quiz_id:e,isAnswer:s||!1}).then(function(t){return p.a.resolve(t.data)})},manualBeginQuiz:function(t,e){return Ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},soldOutQuiz:function(t,e){return Ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},deleteQuiz:function(t,e){return Wi(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},getStudentAnswerList:function(t,e){return ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},getOneStudentAnswer:function(t,e){return ji(t,{quiz_id:e.quiz_id,user_id:e.student_id}).then(function(t){return p.a.resolve(t.data)})},saveCheckData:function(t,e){return Gi(t,{quiz_id:e.quiz_id,user_id:e.user_id,result:e.result}).then(function(t){return p.a.resolve(t.data)})},announceGradeData:function(t,e){return Ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},getQuizDetailInfo:function(t,e){return ji(t,{quiz_id:e}).then(function(t){return p.a.resolve(t.data)})},getResultRank:function(t,e){return ji(t,{quiz_id:e.quizId,size:e.size}).then(function(t){return p.a.resolve(t.data)})},getResultRankDetail:function(t,e,s){return ji(t,{quiz_id:e,class_id:s}).then(function(t){return p.a.resolve(t.data)})},postAnswer:function(t,e){return Qi(t,e).then(function(t){return p.a.resolve(t.data)})},getQuestionResult:function(t,e){return ji(t,{problem_id:e}).then(function(t){return p.a.resolve(t.data)})},getCourseList:function(t){return ji(t).then(function(t){return p.a.resolve(t.data)})}},We={name:"myQuiz",data:function(){return{mode:1,info:{},isLoadingList:!0,quiz_list:[],courseName:"",courseId:-1,courseDetailList:[],courseList:[{value:-1,label:"全部课程"}],curType:-1,typeList:[{value:-1,label:"全部类型"},{value:1,label:"平时考试"},{value:2,label:"期中考试"},{value:4,label:"期末考试"}],curStatus:-1,statusList:[{value:-1,label:"全部状态"},{value:0,label:"未开始"},{value:1,label:"进行中"},{value:2,label:"已结束"},{value:3,label:"已公布成绩"}],page:1,pageSize:5,quizTotal:0}},methods:{changeMode:function(){this.mode=1===this.mode?2:1,this.pageSize=5*this.mode,this.getQuizList()},courseChangeHandler:function(t){this.courseId=t,this.getQuizList()},typeChangeHandler:function(t){this.curType=t,this.getQuizList()},statusChangeHandler:function(t){this.curStatus=t,this.getQuizList()},handleSizeChange:function(t){this.pageSize=t,this.getQuizList()},handleCurrentChange:function(t){this.page=t,this.getQuizList()},toAddQuiz:function(){var t=this,e=this.courseDetailList.filter(function(e){return e.courses_id===t.courseId})[0],s=window.sessionStorage;s.removeItem("courseInfo"),s.setItem("courseInfo",u()(e)),this.$router.push({name:"quizAdd",params:{courseId:this.courseId}})},toQuizDetail:function(t){this.$router.push({name:"quizDetail",params:{id:t}})},toQuizPreview:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={id:t};"1"===this.info.identity&&e&&(s.uid=this.info.uid),this.$router.push({name:"quizPreview",params:s,query:{redirect:"/personal-center/4"}})},toQuizCheck:function(t){this.$router.push({name:"quizCheck",params:{id:t},query:{redirect:"/personal-center/4"}})},toQuizStart:function(t){this.$router.push({name:"quizStart",params:{id:t},query:{redirect:"/personal-center/4"}})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Ve.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info})}},toEditQuiz:function(t){var e=this;this.$confirm("此操作将下架该考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ve.soldOutQuiz("/quiz/sold_out",t).then(function(s){"true"===s.success?e.$router.push({name:"quizAdd",params:{courseId:e.courseId,id:t}}):e.$message({type:"warning",message:"进入编辑失败，请稍后再试",duration:1500})})})},toDelQuiz:function(t){var e=this;this.$confirm("此操作将永久删除该考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ve.deleteQuiz("/quiz",t).then(function(t){"true"===t.success&&(e.$message({type:"success",message:"删除成功!",duration:1500}),e.getQuizList())})})},toBeginQuiz:function(t){var e=this;this.$confirm("此操作将开启该考试, 且不能中途取消，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Ve.manualBeginQuiz("/quiz/startway",t.quiz_id).then(function(s){var i,a;"true"===s.success?(e.$message({message:"您已成功手动开启考试！",type:"success",showClose:!0,duration:1500}),t.start_time=(i=new Date,(a=new Date(i)).getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()),t.status=1):e.$message({message:"您手动开启考试失败！请稍后再试！",type:"error",showClose:!0,duration:1500})})})},getCourseId:function(){if(this.$route.query.courseId){var t=window.sessionStorage,e=JSON.parse(t.getItem("courseInfo"));"undefined"!==e&&null!=e?(this.courseName=e.courses_name,this.courseId=parseInt(this.$route.query.courseId)):this.$router.push({path:"/personal-center/1"})}},getQuizList:function(){var t=this;this.isLoadingList=!0,Ve.getQuizList("/quiz/list",{courses_id:this.courseId,quiz_type:this.curType,status:this.curStatus,page:this.page,pagesize:this.pageSize}).then(function(e){if("false"===e.success)return t.$message({message:"获取列表失败！请稍后再试！",type:"error",showClose:!0,duration:1500}),void(t.isLoadingList=!1);t.quiz_list=e.data.quiz_list.map(function(t){if(null==t.start_time||t.status>=2)return t;var e=new Date(t.start_time).getTime(),s=(new Date).getTime();return t.status=s>=e+60*t.duration*1e3?2:s>=e?1:0,t}),t.quizTotal=e.data.total,t.isLoadingList=!1})},getItemHtml:function(t){var e="";t.className_list.forEach(function(s,i){e+=s,i!==t.className_list.length-1&&(e+="、")});var s="<p>1) 本次考试属于<span>"+t.course_name+"</span>课程，将作为<span>"+e+"</span>的<span>"+this.getQuizType(t.type)+"</span>，仅限用<span>"+this.getQuizLang(t.language)+"</span>作为答题语言。</p>";return s+="<p>2) ",null==t.start_time?s+="正在等待出卷教师手动开启考试，":s+={0:"考试<span>"+this.getQuizStartTime(t.start_time,!0)+"</span>，",1:"考试<span>"+this.getQuizStartTime(t.start_time,!1)+"</span>，<span>正在进行中。</span>",2:"考试<span>"+this.getQuizStartTime(t.start_time,!1)+"</span>，现已结束，<span>正在等待教师批阅。</span>",3:"考试<span>"+this.getQuizStartTime(t.start_time,!1)+"</span>，现已结束并<span>已公布成绩</span>。"}[t.status],s+="考试<span>时长为"+t.duration+"分钟</span>，",0===t.advance?s+="<span>过程中不允许提前交卷。</span>":s+="<span>允许在考试结束前"+t.advance+"分钟内提前交卷</span>。",s+="</p>"},getQuizStartTime:function(t,e){return e?"将在"+t.replace("T"," ")+"准时开考":"已在"+t.replace("T"," ")+"开始"},getQuizType:function(t){return{1:"平时考试",2:"期中考试",3:"期末考试"}[t]},getQuizLang:function(t){return{0:"C语言",1:"C++语言",3:"Java语言",6:"Python语言"}[t]},getRemindType:function(t){return{1:"不提醒",2:"简洁提醒",3:"详细提醒"}[t]},initCourseList:function(){var t=this;Ve.getCourseList("/courses").then(function(e){"false"!==e.success&&(t.courseDetailList=e.data,e.data.forEach(function(e){t.courseList.push({value:e.courses_id,label:e.courses_name})}))})}},created:function(){this.getListInfo(),this.getCourseId(),this.getQuizList(),this.initCourseList()}},Je={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myQuiz"},[s("div",{staticClass:"myQuiz-header"},[s("span",[t._v("考试模块")]),t._v(" "),s("div",{staticClass:"myQuiz-header_select"},[s("el-select",{attrs:{size:"mini",placeholder:"全部课程"},on:{change:t.courseChangeHandler},model:{value:t.courseId,callback:function(e){t.courseId=e},expression:"courseId"}},t._l(t.courseList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("el-select",{attrs:{size:"mini",placeholder:"全部类型"},on:{change:t.typeChangeHandler},model:{value:t.curType,callback:function(e){t.curType=e},expression:"curType"}},t._l(t.typeList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("el-select",{attrs:{size:"mini",placeholder:"全部状态"},on:{change:t.statusChangeHandler},model:{value:t.curStatus,callback:function(e){t.curStatus=e},expression:"curStatus"}},t._l(t.statusList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),"2"===t.info.identity&&-1!==t.courseId?s("el-button",{staticClass:"btn-publish",attrs:{type:"danger",icon:"el-icon-plus",size:"mini",circle:""},nativeOn:{click:function(e){return t.toAddQuiz(e)}}}):t._e(),t._v(" "),s("el-button",{staticClass:"btn-changeMode",attrs:{icon:"el-icon-menu",size:"mini",circle:""},nativeOn:{click:function(e){t.changeMode()}}})],1),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoadingList,expression:"isLoadingList"}],staticClass:"myQuiz-body"},[1===t.mode?s("ul",t._l(t.quiz_list,function(e,i){return s("li",{key:i,staticClass:"myQuiz-item"},[s("span",{staticClass:"no"},[t._v(t._s((t.page-1)*t.pageSize+(i+1)))]),t._v(" "),s("h5",{staticClass:"myQuiz-item-header"},[t._v(t._s(e.title))]),t._v(" "),s("div",{key:e.status,staticClass:"myQuiz-item-content",domProps:{innerHTML:t._s(t.getItemHtml(e))}}),t._v(" "),s("div",{staticClass:"myQuiz-item-operBtns"},[s("span",{staticClass:"btn",on:{click:function(s){t.toQuizDetail(e.quiz_id)}}},[s("i",{staticClass:"icon-guandian"}),t._v("考试详情")]),t._v(" "),"2"===t.info.identity?s("span",{staticClass:"btn",on:{click:function(s){t.toQuizPreview(e.quiz_id)}}},[s("i",{staticClass:"el-icon-tickets"}),t._v("查看试卷")]):t._e(),t._v(" "),"2"===t.info.identity&&0===e.status?s("span",{staticClass:"btn",on:{click:function(s){t.toEditQuiz(e.quiz_id)}}},[s("i",{staticClass:"icon-xiugai-copy"}),t._v("试卷编辑")]):t._e(),t._v(" "),"2"===t.info.identity&&0===e.status?s("span",{staticClass:"btn",on:{click:function(s){t.toDelQuiz(e.quiz_id)}}},[s("i",{staticClass:"icon-huishouzhan"}),t._v("删除试卷")]):t._e(),t._v(" "),"2"===t.info.identity&&null==e.start_time?s("span",{staticClass:"btn",on:{click:function(s){t.toBeginQuiz(e)}}},[s("i",{staticClass:"el-icon-setting"}),t._v("手动开始考试")]):t._e(),t._v(" "),"2"===t.info.identity&&2===e.status?s("span",{staticClass:"btn",on:{click:function(s){t.toQuizCheck(e.quiz_id)}}},[s("i",{staticClass:"icon-xiugai-copy"}),t._v("立即前往批阅")]):t._e(),t._v(" "),"1"===t.info.identity&&3===e.status?s("span",{staticClass:"btn",on:{click:function(s){t.toQuizPreview(e.quiz_id,!0)}}},[s("i",{staticClass:"el-icon-document"}),t._v("查看我的答题结果")]):t._e(),t._v(" "),"1"===t.info.identity&&1===e.status?s("span",{staticClass:"btn",staticStyle:{color:"#e03232"},on:{click:function(s){t.toQuizStart(e.quiz_id)}}},[s("i",{staticClass:"icon-tijiao-copy"}),t._v("立即进入")]):t._e(),t._v(" "),"2"===t.info.identity&&1===e.status?s("span",{staticClass:"btn",staticStyle:{cursor:"default",color:"#e03232"}},[s("i",{staticClass:"icon-tijiao-copy"}),t._v("正在进行中")]):t._e()]),t._v(" "),"1"===t.info.identity&&3===e.status?s("div",{staticClass:"myQuiz-item-userScore"},[0===e.result.score||e.result.score?s("span",[-1===e.result.score?s("span",[t._v("缺考")]):t._e(),t._v(" "),-1!==e.result.score?s("span",[t._v(t._s(e.result.score)+"分")]):t._e()]):t._e()]):t._e()])})):t._e(),t._v(" "),s("el-table",{directives:[{name:"show",rawName:"v-show",value:2===t.mode,expression:"mode === 2"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.quiz_list,"row-key":"quiz_id"}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"考试标题",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"course_name",label:"所属课程",align:"center",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{label:"考试类型",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(1===e.row.type?"平时考试":2===e.row.type?"期中考试":"期末考试"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"开启时间",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.start_time?s("span",[t._v("待手动开启")]):s("span",[t._v(t._s(e.row.start_time.replace("T"," ")))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"考试时长",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.duration)+"分钟")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"考试状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?s("span",{staticStyle:{color:"#5F90DD"}},[t._v("未开始")]):1===e.row.status?s("span",{staticStyle:{color:"#67C23A"}},[t._v("进行中")]):2===e.row.status?s("span",{staticStyle:{color:"#F56C6C"}},[t._v("已结束")]):s("span",{staticStyle:{color:"#f54234"}},[t._v("已公布")])]}}])})],1),t._v(" "),1===t.mode&&t.quizTotal<5?s("span",{staticClass:"noList"},[t._v("- 无更多考试信息 -")]):t._e()],1),t._v(" "),t.quizTotal>=5?s("div",{staticClass:"myQuizList-footer myQuizListPage"},[s("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[5,10,20],"page-size":t.pageSize,background:"","prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t.quizTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[]};var Ke=s("VU/8")(We,Je,!1,function(t){s("p6jT")},"data-v-29b7ae1c",null).exports,Ge={name:"myEssay",props:{userId:{type:String}},data:function(){return{page:1,pagesize:10,total:0,post:{},post_list:[]}},methods:{toPublish:function(){this.$router.push({path:"/postPublish"})},toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},handleSizeChange:function(t){this.page=1,this.pagesize=t,this.getPosts()},handleCurrentChange:function(t){this.page=t,this.getPosts()},getPosts:function(){var t=this;ge.getUserPosts("/forum/posts/user_post",{user_id:t.userId,page:t.page,pagesize:t.pagesize}).then(function(e){t.post_list=e.data.post_list,t.total=e.total})},delPost:function(t){var e=this;this.$confirm("此操作将永久删除该帖子, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ge.deletePost("/forum/posts/publish",t).then(function(t){"true"===t.success&&(e.$message({type:"success",message:"删除成功!"}),e.getPosts())})}).catch(function(){})},getDate:function(t){var e=new Date(t.replace("T"," ")),s=new Date,i=s.getFullYear()-e.getFullYear(),a=s.getMonth()-e.getMonth(),n=s.getDate()-e.getDate(),o=i>0?i+"年前":0===i&&a>0?a+"月前":0===i&&0===a?n+"天前":t.replace("T"," "),r=s.getTime()-e.getTime();return r<6e4?Math.floor(r/1e3)+"秒前":r<36e5?Math.floor(r/6e4)+"分钟前":r<864e5?Math.floor(r/36e5)+"小时前":o}},created:function(){this.getPosts()}},Ye={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myEssay"},[s("div",{staticClass:"myEssay-header"},[s("span",[t._v("我的帖子")]),t._v(" "),s("button",{staticClass:"btn-publish",on:{click:t.toPublish}},[t._v("发布")])]),t._v(" "),s("div",{staticClass:"myEssay-body"},[s("ul",t._l(t.post_list,function(e,i){return s("li",{key:i,staticClass:"myEssay-item"},[s("span",{staticClass:"index"},[t._v(t._s(t.pagesize*(t.page-1)+i+1))]),t._v(" "),s("div",{staticClass:"myEssay-item-top"},[s("div",{staticClass:"myEssay-item-main"},[s("h5",{staticClass:"title"},[s("span",{staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(e.title)},on:{click:function(s){t.toPostDetail(e.post_id)}}}),t._v(" "),2===e.type?s("span",{staticClass:"tags tags-essence"},[t._v("精华")]):t._e(),t._v(" "),3===e.type?s("span",{staticClass:"tags tags-notice"},[t._v("系统公告")]):t._e(),t._v(" "),4===e.type?s("span",{staticClass:"tags tags-guide"},[t._v("新手指南")]):t._e(),t._v(" "),t._l(e.labels,function(i,a){return e.title.length<28?s("span",{key:a,staticClass:"tags"},[t._v(t._s(i))]):t._e()})],2),t._v(" "),s("h5",{staticClass:"publishDate"},[t._v(t._s(e.publish_date.replace("T"," ")))])]),t._v(" "),s("div",{staticClass:"myEssay-item-statBox"},[s("div",{staticClass:"statBox-item",staticStyle:{color:"rgba(142, 204, 69, 1)"}},[s("h5",[t._v(t._s(e.likes))]),s("span",[t._v("点赞")])]),t._v(" "),s("div",{staticClass:"statBox-item",staticStyle:{color:"rgba(255, 153, 0, 1)"}},[s("h5",[t._v(t._s(e.replies))]),s("span",[t._v("评论")])]),t._v(" "),s("div",{staticClass:"statBox-item"},[s("h5",[t._v(t._s(e.views))]),s("span",[t._v("浏览")])])])]),t._v(" "),s("div",{staticClass:"myEssay-item-bottom"},[e.new_rep&&e.new_rep.is?[s("p",{staticClass:"reply btn-newMsg"},[s("span",{staticStyle:{color:"rgba(234, 140, 0, 1)"}},[t._v("有最新评论")]),t._v("\n                 \n              "),s("span",{staticClass:"repContent ud-editor-repContent",domProps:{innerHTML:t._s(e.new_rep.content)}})]),t._v(" "),s("div",{staticClass:"myEssay-item-oper"},[s("span",{staticClass:"repTime"},[t._v(t._s(t.getDate(e.new_rep.date)))]),t._v(" "),s("span",{staticClass:"btn-goRep",on:{click:function(s){t.toPostDetail(e.post_id)}}},[t._v("前往回复")]),t._v(" "),s("span",{staticClass:"separator"},[t._v("|")]),t._v(" "),s("i",{staticClass:"el-icon-delete btn-del",on:{click:function(s){t.delPost(e.post_id)}}})])]:[t._m(0,!0),t._v(" "),s("div",{staticClass:"myEssay-item-oper"},[s("i",{staticClass:"el-icon-delete btn-del",on:{click:function(s){t.delPost(e.post_id)}}})])]],2)])})),t._v(" "),t.total<5?s("span",{staticClass:"noList"},[t._v("- 无更多帖子，快"),s("span",{staticClass:"refresh-btn",on:{click:t.toPublish}},[t._v("前往发布")]),t._v(" -")]):t._e()]),t._v(" "),t.total>=5?s("div",{staticClass:"myEssay-footer MyEssayPage"},[s("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[5,10,20],"page-size":t.pagesize,background:"","prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"reply"},[e("span",[this._v("无最新评论")])])}]};var Xe=s("VU/8")(Ge,Ye,!1,function(t){s("ys6u")},"data-v-d268b650",null).exports,Ze={name:"myEssay",components:{wangEditor:Xt},props:{userId:{type:String}},data:function(){return{currentType:1,page:1,pagesize:10,total:0,message_list:[],replies_list:[],showEditorNo:-1,showAllContentNo:-1,editorContent:"",editorText:"",childReplyList:[],childPagesize:3,childReplyListTotal:0,host:Bi,defaultImage:s("IT0F")}},methods:{catchData:function(t,e){this.editorContent=t,this.editorText=e},changeType:function(t){this.currentType=t,this.page=1,1===this.currentType?this.getNoticeList():this.getRepliesList()},closeContentBox:function(){this.showAllContentNo!==this.showEditorNo&&(this.showAllContentNo=-1)},highlight:function(t){for(var e=t.split("<pre><code>"),s=e[0],i="",a=1;a<e.length;a++){i+='<span class="codeContain"><pre class="line-numbers"><code class="language-clike">';var n=e[a].split("</code></pre>"),o=n[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<br>/g,"\n"),r=(o=Vt.a.highlight(o,Vt.a.languages.clike,"clike")).split("\n");o="";for(var l=0;l<r.length;l++)o+='<span class="line-numbers-rows">'+r[l]+" </span>";i+=o,i+='</code></pre><button class="copyContent-btn" style="cursor: pointer">复制</button></span>',i+=n[1]}return s+i},openEditor:function(t,e,s,i){var a=this;this.showEditorNo===t?(this.showEditorNo=-1,this.showAllContentNo=t):(this.showEditorNo=t,this.showAllContentNo=this.showEditorNo,i||ge.setHadRead("/forum/read_message",{target_id:s,type:a.currentType}).then(function(e){"true"===e.success&&(1===a.currentType?a.message_list[t].read=!0:a.replies_list[t].read=!0)}),e&&ge.getChildReplies("/forum/posts/child_replies",{reply_id:s,page:1,pagesize:a.childPagesize}).then(function(t){a.childReplyList=t.data.child_replies_list,a.childReplyListTotal=t.total}))},openContent:function(t,e,s){if(this.showAllContentNo=t,!e){var i=this;ge.setHadRead("/forum/read_message",{target_id:s,type:i.currentType}).then(function(e){"true"===e.success&&(1===i.currentType?i.message_list[t].read=!0:i.replies_list[t].read=!0)})}},sendReply:function(t,e){if(this.editorContent.length<1e3){var s=this.editorText;if(""===(s=(s=s.replace(/&nbsp;/g,"")).replace(/<br>/g,""))||void 0===this.editorContent)return this.$message({message:"回复内容不能为空！",type:"error",showClose:!0,duration:1800}),!1;if(!/.*[\u4e00-\u9fa5]+.*$/.test(s)&&!/[0-9a-z]/.test(s))return this.$message({message:"未输入有意义内容！",type:"error",showClose:!0,duration:1800}),!1}else if(this.editorContent.length>32768)return this.$message.warning({message:"内容太长！若是直接复制桌面文档，请改为右键纯文本粘贴！",type:"error",duration:1800}),!1;var i=this;ge.sendReply("/forum/posts/send_reply",{params:{post_id:t,target_id:e,content:i.editorContent}}).then(function(t){"true"===t.success&&(i.showEditorNo=-1,i.$message({message:"成功发送回复信息！",type:"success",showClose:!0,duration:1e3}))})},getRepliesList:function(){var t=this;ge.getRepliesList("/forum/replies",{page:t.page,pagesize:t.pagesize}).then(function(e){t.replies_list=e.data.reply_list,t.total=e.total})},getNoticeList:function(){var t=this;ge.getRepliesList("/forum/messages",{page:t.page,pagesize:t.pagesize}).then(function(e){t.message_list=e.data.message_list,t.total=e.total})},toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},handleSizeChange:function(t){this.page=1,this.pagesize=t,1===this.currentType?this.getNoticeList():this.getRepliesList()},handleCurrentChange:function(t){this.page=t,1===this.currentType?this.getNoticeList():this.getRepliesList()},getDate:function(t){var e=new Date(t.replace("T"," ")),s=new Date,i=s.getFullYear()-e.getFullYear(),a=s.getMonth()-e.getMonth(),n=s.getDate()-e.getDate(),o=i>0?i+"年前":0===i&&a>0?a+"月前":0===i&&0===a?n+"天前":t.replace("T"," "),r=s.getTime()-e.getTime();return r<6e4?Math.floor(r/1e3)+"秒前":r<36e5?Math.floor(r/6e4)+"分钟前":r<864e5?Math.floor(r/36e5)+"小时前":o}},created:function(){this.getNoticeList()}},ts={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"myMessage",on:{click:t.closeContentBox}},[s("div",{staticClass:"myMessage-header"},[s("span",[t._v("我的消息")]),t._v(" "),s("span",{class:1===t.currentType?"btn-type btn-current-type":"btn-type",on:{click:function(e){t.changeType(1)}}},[t._v("系统通知")]),t._v(" "),s("span",{class:2===t.currentType?"btn-type btn-current-type":"btn-type",on:{click:function(e){t.changeType(2)}}},[t._v("评论回复")])]),t._v(" "),s("div",{staticClass:"myMessage-body"},[s("ul",[t._l(t.message_list,function(e,i){return 1===t.currentType?s("li",{key:i,staticClass:"myMessage-item"},[s("div",{staticClass:"myMessage-item-top",on:{click:function(s){s.stopPropagation(),t.openContent(i,e.read,e.id)}}},[s("div",{staticClass:"user_info"},[s("img",{attrs:{src:e.avatarUrl?t.host+e.avatarUrl:t.defaultImage}}),t._v(" "),s("span",{staticClass:"user-name"},[t._v(t._s(e.nick))])]),t._v(" "),s("div",{class:t.showAllContentNo===i?"editorShow ud-editor-message all-content":"editorShow ud-editor-message",domProps:{innerHTML:t._s(t.highlight(e.content))}}),t._v(" "),s("div",{staticClass:"date"},[t._v(t._s(t.getDate(e.date)))])]),t._v(" "),s("div",{staticClass:"myMessage-item-bottom"},[s("div",{staticClass:"source"},[t._m(0,!0),t._v(" "),s("div",{staticClass:"myMessage-item-right"},[e.read?s("span",[t._v("已读")]):t._e(),t._v(" "),e.read?t._e():s("span",{staticStyle:{color:"rgba(234, 140, 0, 1)"}},[t._v("未读")])])])])]):t._e()}),t._v(" "),t._l(t.replies_list,function(e,i){return 2===t.currentType?s("li",{key:i,staticClass:"myMessage-item"},[s("div",{staticClass:"myMessage-item-top",on:{click:function(s){s.stopPropagation(),t.openContent(i,e.read,e.id)}}},[s("div",{staticClass:"user_info"},[s("img",{attrs:{src:e.avatarUrl?t.host+e.avatarUrl:t.defaultImage}}),t._v(" "),s("span",{staticClass:"user-name"},[t._v(t._s(e.nick))])]),t._v(" "),s("div",{class:t.showAllContentNo===i?"editorShow ud-editor-message all-content":"editorShow ud-editor-message",domProps:{innerHTML:t._s(t.highlight(e.content))}}),t._v(" "),s("div",{staticClass:"date"},[t._v(t._s(t.getDate(e.date)))])]),t._v(" "),s("div",{staticClass:"myMessage-item-bottom"},[s("div",{staticClass:"source"},[s("p",{staticClass:"myMessage-item-left"},[s("span",[t._v("来自帖子 >")]),t._v("\n               \n              "),s("span",{staticClass:"title",on:{click:function(s){t.toPostDetail(e.detail.post_id)}}},[t._v(t._s(e.detail.title))])]),t._v(" "),s("div",{staticClass:"myMessage-item-right"},[e.read?s("span",[t._v("已读")]):t._e(),t._v(" "),e.read?t._e():s("span",{staticStyle:{color:"rgba(234, 140, 0, 1)"}},[t._v("未读")]),t._v("\n                 \n              "),s("span",{staticClass:"btn-goRep",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.openEditor(i,0!==e.detail.reply_count,e.id,e.read)}}},[t._v("回复"),0!==e.detail.reply_count?s("span",[t._v("("+t._s(e.detail.reply_count)+")")]):t._e()])])]),t._v(" "),s("transition",{attrs:{name:"editor-fade"}},[t.showEditorNo===i?s("div",[s("div",{staticClass:"editor ud-editor-message"},[s("wangEditor",{attrs:{catchData:t.catchData,height:"165px",editorType:2}}),t._v(" "),s("button",{staticClass:"btn-reply",on:{click:function(s){t.sendReply(e.detail.post_id,e.id)}}},[t._v("回复他")])],1),t._v(" "),s("ul",t._l(t.childReplyList,function(i,a){return s("li",{key:a,staticClass:"childReplyList-item"},[s("img",{attrs:{src:i.author.avatarUrl?t.host+i.author.avatarUrl:t.defaultImage}}),t._v(" "),s("span",{staticClass:"floor"},[t._v(t._s(a+1)+"楼")]),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(i.author.nick)),i.target_object&&e.content!==i.target_object.content?s("span",[t._v("  "),s("span",{staticStyle:{color:"rgba(255, 153, 0, 1)"}},[t._v("回复")]),t._v("  "+t._s(i.target_object.nick))]):t._e()]),t._v(" "),s("span",{staticClass:"content editorShow ud-editor-message",domProps:{innerHTML:t._s(t.highlight(i.content))}}),t._v(" "),s("span",{staticClass:"date"},[t._v("发表于  "+t._s(i.publish_date.replace("T"," ")))])])})),t._v(" "),t.childReplyListTotal>t.childPagesize?s("div",{staticClass:"toMore"},[s("span",{on:{click:function(s){t.toPostDetail(e.detail.post_id)}}},[t._v("此处省略"+t._s(t.childReplyListTotal-3)+"条回复，更多请查看帖子详情")])]):t._e()]):t._e()])],1)]):t._e()})],2),t._v(" "),t.total<5?s("span",{staticClass:"noList"},[t._v("- 无更多消息 -")]):t._e()]),t._v(" "),t.total>=5?s("div",{staticClass:"myMessage-footer myMessagePage"},[s("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[5,10,20],"page-size":t.pagesize,background:"","prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"myMessage-item-left"},[this._v("来自 "),e("span",[this._v("系统通知")])])}]};var es=s("VU/8")(Ze,ts,!1,function(t){s("0Cr6")},"data-v-5b5d8870",null).exports,ss={name:"checkPost",props:{userId:{type:String}},data:function(){return{currentType:1,post:{},post_list:[]}},methods:{toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},handleSizeChange:function(t){this.page=1,this.pagesize=t,this.getPosts()},handleCurrentChange:function(t){this.page=t,this.getPosts()},getPosts:function(){var t=this;ge.getTopPostsList("/forum/posts/top",{}).then(function(e){t.post_list=e.data.post_list})},delPost:function(t){var e=this;this.$confirm("此操作将永久删除该帖子, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ge.deletePost("/forum/posts/publish",t).then(function(t){"true"===t.success&&(e.$message({type:"success",message:"删除成功!"}),e.getPosts())})}).catch(function(){})},getDate:function(t){var e=new Date(t.replace("T"," ")),s=new Date,i=s.getFullYear()-e.getFullYear(),a=s.getMonth()-e.getMonth(),n=s.getDate()-e.getDate(),o=i>0?i+"年前":0===i&&a>0?a+"月前":0===i&&0===a?n+"天前":t.replace("T"," "),r=s.getTime()-e.getTime();return r<6e4?Math.floor(r/1e3)+"秒前":r<36e5?Math.floor(r/6e4)+"分钟前":r<864e5?Math.floor(r/36e5)+"小时前":o}},created:function(){this.getPosts()}},is={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"checkPost"},[s("div",{staticClass:"myEssay-header"},[s("span",[t._v("帖子审核")]),t._v(" "),s("span",{class:1===t.currentType?"btn-type btn-current-type":"btn-type"},[t._v("设置置顶")])]),t._v(" "),s("div",{staticClass:"myEssay-body"},[1===t.currentType&&t.post_list.length>0?s("ul",t._l(t.post_list,function(e,i){return s("li",{key:i,staticClass:"myEssay-item"},[s("span",{staticClass:"index"},[t._v(t._s(i+1))]),t._v(" "),s("div",{staticClass:"myEssay-item-top"},[s("div",{staticClass:"myEssay-item-main"},[s("h5",{staticClass:"title"},[s("span",{staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(e.title)},on:{click:function(s){t.toPostDetail(e.post_id)}}}),t._v(" "),2===e.type?s("span",{staticClass:"tags tags-essence"},[t._v("精华")]):t._e(),t._v(" "),3===e.type?s("span",{staticClass:"tags tags-notice"},[t._v("系统公告")]):t._e(),t._v(" "),4===e.type?s("span",{staticClass:"tags tags-guide"},[t._v("新手指南")]):t._e(),t._v(" "),t._l(e.labels,function(i,a){return e.title.length<28?s("span",{key:a,staticClass:"tags"},[t._v(t._s(i))]):t._e()})],2),t._v(" "),s("h5",{staticClass:"publishDate"},[t._v(t._s(e.publish_date.replace("T"," ")))])]),t._v(" "),s("div",{staticClass:"myEssay-item-statBox"},[s("div",{staticClass:"statBox-item",staticStyle:{color:"rgba(142, 204, 69, 1)"}},[s("h5",[t._v(t._s(e.likes))]),s("span",[t._v("点赞")])]),t._v(" "),s("div",{staticClass:"statBox-item",staticStyle:{color:"rgba(255, 153, 0, 1)"}},[s("h5",[t._v(t._s(e.replies))]),s("span",[t._v("评论")])]),t._v(" "),s("div",{staticClass:"statBox-item"},[s("h5",[t._v(t._s(e.views))]),s("span",[t._v("浏览")])])])]),t._v(" "),t._m(0,!0)])})):t._e(),t._v(" "),0===t.post_list.length?s("span",{staticClass:"noList"},[t._v("- 无置顶帖子 -")]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"myEssay-item-bottom"},[e("p",{staticClass:"reply"},[e("span",[this._v("若要取消置顶，请前往帖子详情页")])])])}]};var as={components:{personalHead:be,Mycourse:ze,Information:Re,Setting:Fe,brushingResults:Ne,CallFeedback:je,itemContribution:Qe,MyExam:Ke,MyEssay:Xe,MyMessage:es,checkPost:s("VU/8")(ss,is,!1,function(t){s("8bU8")},"data-v-f3101bde",null).exports},data:function(){return{reviewBindClassId:"",reviewTotal:0,bindClassIdOfTest:"",bindClassOptions:[],bindClassOfTest:!1,toExamData:{},testStudentInfo:{},testStudentInfoDialog:!1,updateTestInfoFrom:{name:"",endTime:""},problemTableData:[],updateTestInfoDialog:!1,testDialog:!1,disable:!0,info:{},isShow:"1",tabPosition:"left",problemInfo:{},hasCourse:!1,courseData:[],courseBackdata:{},testTabledata:[{testId:"0001",courseName:"第一次作业",authorizationStatus:"教师授权",status:"已结束",questionNum:20,starTime:"2016-04-13 19:02:43",endTime:"2016-04-13 21:02:43",completion:"完成14道题"}],studentCount:0,courseId:"",updateTestInfoData:{},theRowId:"",ReviewData:[],ReviewPage:1,ReviewPageSize:10,getAllReviewData:[],reviewBindClassIdList:[],theReviewData:{},teacherTestLoading:!0,testStatus:0}},methods:{changeCoursesTable:function(t){!0===t&&this.getCourse()},toExamList:function(t){this.isShow="4",this.toExamData=t},updateTestInfo:function(t){this.updateTestInfoDialog=!0,this.updateTestInfoFrom.name=t.exam_name,this.updateTestInfoFrom.endTime=t.stopTime,this.updateTestInfoData=t},postTestInfo:function(){var t=this,e={exam_id:this.updateTestInfoData.exam_id,exam_name:this.updateTestInfoFrom.name,stop_time:this.timeFormat(this.updateTestInfoFrom.endTime)};ge.putUpdateTestInfo("/courses/exams",e).then(function(e){"true"===e.success?(t.$message({message:"修改测验信息成功",type:"success"}),setTimeout(function(){ge.getCoursesTest("/courses/exams",t.courseId).then(function(e){t.testTabledata=e.data;for(var s=0;s<e.data.length;s++){var i=e.data[s].create_time.split("T");t.testTabledata[s].createTime=i[0]+" "+i[1];var a=e.data[s].stop_time.split("T");t.testTabledata[s].stopTime=a[0]+" "+a[1]}})},300)):t.$message.error("修改测验信息失败")}),this.updateTestInfoDialog=!1},endTest:function(t){var e=this;ge.deleteTest("/courses/exams",t.exam_id).then(function(){var t,s=window.sessionStorage.getItem("userInfo");"undefined"!==s&&null!==s&&void 0!==s?t=JSON.parse(s):console.log(t),e.$message({message:"结束成功",type:"success"}),ge.getCoursesTest("/courses/exams",e.courseId).then(function(t){e.testTabledata=t.data;for(var s=0;s<t.data.length;s++){var i=t.data[s].create_time.split("T");e.testTabledata[s].createTime=i[0]+" "+i[1];var a=t.data[s].stop_time.split("T");e.testTabledata[s].stopTime=a[0]+" "+a[1]}})})},changeTestProblem:function(t){var e,s=this;s.problemTableData=[];var i=window.sessionStorage.getItem("userInfo");"undefined"!==i&&null!==i&&void 0!==i?e=JSON.parse(i):console.log(e),ge.getTestProblems("/courses/exams/problems",t.exam_id).then(function(t){s.problemTableData=t.data.problem_list,s.testStatus=t.data.status,s.studentCount=t.data.student_count}),this.testDialog=!0},checkStudentTestBindClass:function(t){if(this.bindClassOfTest=!0,this.bindClassOptions=[],void 0!==this.courseBackdata&&this.courseBackdata.class_id.length>0)for(var e=0;e<this.courseBackdata.class_id.length;e++){var s={value:this.courseBackdata.class_id[e],label:this.courseBackdata.class_name[e]};this.bindClassOptions.push(s)}this.theRowId=t.exam_id},checkStudentTest:function(){this.testStudentInfoDialog=!0,this.bindClassOfTest=!1;var t=this,e={examId:this.theRowId,classId:this.bindClassIdOfTest};ge.getStudentTestList("/courses/exams/result",e).then(function(e){t.testStudentInfo=e.data,t.teacherTestLoading=!1})},selectItem:function(t){this.isShow=t,this.$router.push({name:"PersonalCenter",params:{isShow:t}})},backPreson:function(){this.disable=!this.disable},addTest:function(){this.$router.push({path:"/addTest",query:{courses_id:this.courseBackdata.courses_id}})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;ge.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,"0"!==t.info.identity&&(t.hasCourse=!0),t.problemInfo=e.data.problem_info,"1"!==t.info.identity&&"2"!==t.info.identity||t.getCourse()})}},refreshCourse:function(){this.getCourse()},getCourse:function(){var t=this;ge.getCourseList("/courses").then(function(e){t.courseData=e.data,void 0!==t.courseData&&""!==t.courseData&&null!==t.courseData||(t.courseData=[])})},disablePerson:function(t){var e,s=this;this.courseBackdata=t,this.courseId=t.courses_id;var i=window.sessionStorage.getItem("userInfo");"undefined"!==i&&null!==i&&void 0!==i?e=JSON.parse(i):console.log(e),ge.getCoursesTest("/courses/exams",this.courseId).then(function(t){s.testTabledata=t.data;for(var e=0;e<t.data.length;e++){var i=t.data[e].create_time.split("T");s.testTabledata[e].createTime=i[0]+" "+i[1];var a=t.data[e].stop_time.split("T");s.testTabledata[e].stopTime=a[0]+" "+a[1]}}),this.disable=t.disable},getAddTestBack:function(){var t=this.$route.query.coursesID;if(this.courseId=t,void 0!==t){var e,s=this,i=window.sessionStorage.getItem("userInfo");"undefined"!==i&&null!==i&&void 0!==i?e=JSON.parse(i):console.log(e),ge.getCoursesTest("/courses/exams",this.courseId).then(function(t){s.testTabledata=t.data;for(var e=0;e<t.data.length;e++){var i=t.data[e].create_time.split("T");s.testTabledata[e].createTime=i[0]+" "+i[1];var a=t.data[e].stop_time.split("T");s.testTabledata[e].stopTime=a[0]+" "+a[1]}}),this.disable=this.$route.query.showCourseTest}},timeFormat:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},updateInfo:function(t){var e=this;ge.updateUserInfo("/users",t).then(function(s){"true"===s.success?(e.$message({message:"修改信息成功",type:"success"}),window.sessionStorage.setItem("userInfo",u()(t)),e.getListInfo(),e.$refs.userInfo.handleEdit()):(e.$message({message:"修改失败，请稍候再试",type:"warning"}),e.$refs.userInfo.handleEdit())})},updatePass:function(t){var e=this;ge.updatePassword("/users/password",t).then(function(t){"true"===t.success&&e.$message({message:"恭喜你，这是一条成功消息",type:"success"})})},getReviewData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.theReviewData=t,this.reviewBindClassIdList=[];var i,a=this;if(a.getAllReviewData=[],t){for(var n=0;n<t.class_list.length;n++){var o={value:t.class_list[n].class_id,label:t.class_list[n].class_name};a.reviewBindClassIdList.push(o),!0===s&&(a.reviewBindClassId=a.reviewBindClassIdList[0].value)}i=null===e?{class_id:t.class_list[0].class_id,quiz_id:t.quiz_id}:{class_id:e,quiz_id:t.quiz_id},ge.getQuizStudents("/quiz/students",i).then(function(t){a.getAllReviewData=t.data,a.reviewTotal=t.data.length,a.getReviewDataList()})}},getReviewDataList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ReviewPage,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ReviewPageSize;this.ReviewData=[];for(var s=0;s<this.getAllReviewData.length;s++)s<(t-1)*e+(e-1)&&s>=(t-1)*e&&this.ReviewData.push(this.getAllReviewData[s])},reviewPageSizeChange:function(t){this.ReviewPageSize=t,this.getReviewDataList(this.ReviewPage,t)},reviewPageChange:function(t){this.ReviewPage=t,this.getReviewDataList(t,this.ReviewPageSize)},reviewBindClassIdChange:function(t){this.ReviewPage=1,this.getReviewData(this.theReviewData,t,!1)},toStarReview:function(t){this.$router.push({path:"/previewExam",name:"previewExam",query:{isMarkExam:!0,code:t.code,quizId:this.theReviewData.quiz_id}})},toTestProblemDetail:function(t){if(0===this.testStatus)this.$message({showClose:!0,type:"error",message:"该测验已经结束，不能在此答题"});else if(1===t.problem_type);else if(2===t.problem_type);else if(3===t.problem_type){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t.problem_id}}).href;window.open(e,"_blank")}else 4===t.problem_type||t.problem_type},queryInit:function(){this.$route.params.isShow&&(this.isShow=this.$route.params.isShow.toString())},clickCall:function(t){"2"===this.info.identity&&this.changeTestProblem(t)}},computed:l()({},Object(ht.b)({userInfo:"user"})),created:function(){this.queryInit(),this.getListInfo(),this.getAddTestBack()},watch:{$route:function(){"PersonalCenter"===this.$route.name&&this.queryInit()}}},ns={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal"},[s("div",{staticClass:"personal-head"},[t.info.uid?s("personal-head",{attrs:{info:t.info}}):t._e()],1),t._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[t.disable?s("el-row",[s("el-col",{attrs:{span:5}},[s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.isShow,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.selectItem}},[s("el-menu-item",{attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("基本资料")])]),t._v(" "),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.info.identity,expression:"info.identity"}],attrs:{index:"2"}},[s("i",{staticClass:"el-icon-location"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的课程")])]),t._v(" "),"3"===t.info.identity?s("el-menu-item",{attrs:{index:"10"}},[s("i",{staticClass:"el-icon-search"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("帖子审核")])]):t._e(),t._v(" "),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.info.identity,expression:"info.identity"}],attrs:{index:"8"}},[s("i",{staticClass:"el-icon-tickets"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的帖子")])]),t._v(" "),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.info.identity,expression:"info.identity"}],attrs:{index:"9"}},[s("i",{staticClass:"el-icon-bell"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("我的消息")])]),t._v(" "),s("el-menu-item",{attrs:{index:"3"}},[s("i",{staticClass:"el-icon-document"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("刷题成果")])]),t._v(" "),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.info.identity,expression:"info.identity"}],attrs:{index:"4"}},[s("i",{staticClass:"el-icon-edit-outline"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("科目考试")])]),t._v(" "),s("el-menu-item",{attrs:{index:"7"}},[s("i",{staticClass:"el-icon-message"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("题库贡献")])]),t._v(" "),s("el-menu-item",{attrs:{index:"5"}},[s("i",{staticClass:"el-icon-edit"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("反馈意见")])]),t._v(" "),s("el-menu-item",{attrs:{index:"6"}},[s("i",{staticClass:"el-icon-setting"}),t._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("设置")])])],1)],1),t._v(" "),s("div",{staticClass:"personal-right"},[s("el-col",{attrs:{span:18,offset:1}},["1"===t.isShow?s("div",[t.info.uid?s("Information",{ref:"userInfo",attrs:{Info:t.info},on:{updateInfo:t.updateInfo}}):t._e()],1):t._e(),t._v(" "),"2"===t.isShow?s("div",{attrs:{onselectstart:"return false"}},[s("Mycourse",{attrs:{identity:t.info.identity,courseData:t.courseData},on:{disablePerson:t.disablePerson,refreshCourse:t.refreshCourse,toExamHtml:t.toExamList,changeCoursesTable:t.changeCoursesTable}})],1):t._e(),t._v(" "),"3"===t.isShow?s("div",[s("brushing-results",{attrs:{ProblemInfo:t.problemInfo}})],1):t._e(),t._v(" "),"4"===t.isShow?s("div",[s("my-exam")],1):t._e(),t._v(" "),"5"===t.isShow?s("div",[s("CallFeedback")],1):t._e(),t._v(" "),"6"===t.isShow?s("div",[s("Setting",{on:{updatePass:t.updatePass}})],1):t._e(),t._v(" "),"7"===t.isShow?s("div",[s("itemContribution")],1):t._e(),t._v(" "),"8"===t.isShow?s("div",[s("MyEssay",{attrs:{userId:t.info.user_id}})],1):t._e(),t._v(" "),"9"===t.isShow?s("div",[s("MyMessage",{attrs:{userId:t.info.user_id}})],1):t._e(),t._v(" "),"10"===t.isShow?s("div",[s("checkPost")],1):t._e()])],1)],1):t._e(),t._v(" "),t.disable?t._e():s("div",{staticClass:"courseTest"},[s("div",{staticClass:"courseTest-head"},[s("el-button",{staticClass:"back",attrs:{size:"mini",type:"primary",round:""},on:{click:t.backPreson}},[t._v("返回")]),t._v(" "),t.courseBackdata.courses_name?s("h2",{staticClass:"courseName"},[t._v(t._s(t.courseBackdata.courses_name))]):t._e(),t._v(" "),"2"===t.info.identity?s("el-button",{staticClass:"fright",on:{click:t.addTest}},[t._v("添加测试")]):t._e()],1),t._v(" "),s("div",{staticClass:"courseTest-table"},[s("el-table",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:t.testTabledata,stripe:""},on:{"row-click":t.clickCall}},[s("el-table-column",{attrs:{type:"index",align:"center",width:"80",label:"编号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"exam_name",align:"center",width:"150",label:"测验名字"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"80",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?s("span",{staticStyle:{color:"red"}},[t._v("已结束")]):t._e(),t._v(" "),1===e.row.status?s("span",{staticStyle:{color:"#6d9c35"}},[t._v("正在进行")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"problem_count",align:"center",width:"80",label:"题目数"}}),t._v(" "),s("el-table-column",{attrs:{prop:"createTime",align:"center",label:"开始时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"stopTime",align:"center",label:"结束时间"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"120",label:"完成情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("已完成"+t._s(e.row.solved_count)+"题")])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status&&"2"===t.info.identity?s("div",{staticStyle:{display:"inline-block"}},[s("el-button",{staticClass:"delete button-hover",attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(s){s.stopPropagation(),t.endTest(e.row)}}}),t._v(" "),s("el-button",{staticClass:"edit button-hover",attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(s){s.stopPropagation(),t.updateTestInfo(e.row)}}})],1):t._e(),t._v(" "),"1"===t.info.identity?s("el-button",{staticClass:"lookTest button-hover",attrs:{type:"primary",icon:"el-icon-view",size:"small"},on:{click:function(s){s.stopPropagation(),t.changeTestProblem(e.row)}}}):s("el-button",{staticClass:"lookTest button-hover",attrs:{type:"primary",icon:"el-icon-view",size:"small"},on:{click:function(s){s.stopPropagation(),t.checkStudentTestBindClass(e.row)}}})]}}])})],1)],1),t._v(" "),s("div",{class:"1"===t.info.identity?"":"questionList-container"},[s("el-dialog",{attrs:{title:"1"===t.info.identity?"测试成绩":"试题列表 | 学生总人数："+t.studentCount,visible:t.testDialog,width:"60%"},on:{"update:visible":function(e){t.testDialog=e}}},[s("div",[s("div",{staticStyle:{"margin-top":"20px"}},[s("el-table",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:t.problemTableData}},[s("el-table-column",{attrs:{type:"index",align:"center",width:"80",label:"编号"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",width:"120",label:"题目编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"testGradeProblemId",on:{click:function(s){t.toTestProblemDetail(e.row)}}},[t._v(t._s(e.row.problem_id))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"title",align:"center",label:"标题"}}),t._v(" "),"2"===t.info.identity?s("el-table-column",{attrs:{prop:"submit",width:"120",align:"center",label:"通过人数"}}):t._e(),t._v(" "),"2"===t.info.identity?s("el-table-column",{attrs:{prop:"accept",width:"120",align:"center",label:"总通过数"}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"submit",width:"120",align:"center",label:"1"===t.info.identity?"提交数":"总提交数"}}),t._v(" "),"1"===t.info.identity?s("el-table-column",{attrs:{align:"center",width:"120",label:"完成状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.accept?s("span",{staticStyle:{color:"red"}},[t._v("未完成")]):t._e(),t._v(" "),e.row.accept>0?s("span",{staticStyle:{color:"#6d9c35"}},[t._v("已完成")]):t._e()]}}])}):t._e()],1)],1)]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.testDialog=!1}}},[t._v("确 定")])],1)])],1),t._v(" "),s("el-dialog",{attrs:{title:"修改测验信息",visible:t.updateTestInfoDialog,width:"25%"},on:{"update:visible":function(e){t.updateTestInfoDialog=e}}},[s("el-form",{attrs:{model:t.updateTestInfoFrom,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"测验名称"}},[s("el-input",{attrs:{placeholder:"请填写测验名称"},model:{value:t.updateTestInfoFrom.name,callback:function(e){t.$set(t.updateTestInfoFrom,"name",e)},expression:"updateTestInfoFrom.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"测试结束时间"}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"date1"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.updateTestInfoFrom.endTime,callback:function(e){t.$set(t.updateTestInfoFrom,"endTime",e)},expression:"updateTestInfoFrom.endTime"}})],1)],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.updateTestInfoDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.postTestInfo}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.testStudentInfo.exam_name,visible:t.testStudentInfoDialog,width:"1000px"},on:{"update:visible":function(e){t.testStudentInfoDialog=e}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.teacherTestLoading,expression:"teacherTestLoading"}]},[s("div",{staticClass:"testStudentInfo-head"},[s("div",{staticClass:"testStudentInfo-head-inline"},[s("span",[t._v("总人数:")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.testStudentInfo.student_count))])]),t._v(" "),s("div",{staticClass:"testStudentInfo-head-inline"},[s("span",[t._v("通过人数:")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.testStudentInfo.pass_student_count))])]),t._v(" "),s("div",{staticClass:"testStudentInfo-head-inline"},[s("span",[t._v("题目数:")]),t._v(" "),s("span",{staticClass:"content"},[t._v(t._s(t.testStudentInfo.problem_count))])]),t._v(" "),s("div",{staticClass:"testStudentInfo-head-inline"},[s("span",[t._v("测验状态:")]),t._v(" "),1===t.testStudentInfo.status?s("span",{staticClass:"processing"},[t._v("正在进行中")]):s("span",{staticClass:"end"},[t._v("已结束")])])]),t._v(" "),s("div",{staticClass:"testStudentInfo-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.testStudentInfo.student_list,stripe:""}},[s("el-table-column",{attrs:{prop:"nick",align:"center",label:"昵称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"code",align:"center",label:"学号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"accepted",align:"center",label:"通过数"}}),t._v(" "),s("el-table-column",{attrs:{prop:"submit",align:"center",label:"提交数"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",label:"完成情况"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.finished?s("span",{staticStyle:{color:"#67c23a"}},[t._v("已完成")]):s("span",{staticStyle:{color:"red"}},[t._v("未完成")])]}}])})],1)],1)]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.testStudentInfoDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.testStudentInfoDialog=!1}}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"请先选择班级",visible:t.bindClassOfTest,width:"20%"},on:{"update:visible":function(e){t.bindClassOfTest=e}}},[s("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择班级"},model:{value:t.bindClassIdOfTest,callback:function(e){t.bindClassIdOfTest=e},expression:"bindClassIdOfTest"}},t._l(t.bindClassOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.bindClassOfTest=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.checkStudentTest}},[t._v("确 定")])],1)],1)],1)],1)])},staticRenderFns:[]};var os=s("VU/8")(as,ns,!1,function(t){s("25fI")},"data-v-7616f582",null).exports,rs={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"quiz"},[e("router-view")],1)},staticRenderFns:[]};var ls=s("VU/8")({name:"quiz"},rs,!1,function(t){s("EWj/")},"data-v-44cc2fec",null).exports,cs={name:"quiz-panel",props:{title:{type:String},topLine:{type:Boolean,default:!0},downLine:{type:Boolean,default:!1},width:{type:String,default:"[0%, auto, unset]"},height:{type:String,default:"[0%, auto, unset]"},padding:{type:String,default:"0px"},radius:{type:String,default:"default"},isHidden:{type:Boolean,default:!0}},computed:{getStyle:function(){var t=this.width.replace("[","").replace("]","").split(","),e=this.height.replace("[","").replace("]","").split(","),s=t.length>1?t[1]:t[0],i=e.length>1?e[1]:e[0];return{maxWidth:3===t.length?t[2]:"unset",minWidth:t.length>1?t[0]:"0%",width:s,maxHeight:3===e.length?e[2]:"unset",minHeight:e.length>1?e[0]:"0%",height:i,padding:this.padding,borderRadius:this.radius.replace(/default/g,"10px"),overflow:this.isHidden?"hidden":"unset"}}},data:function(){return{ifHoverBtn:!1}}},us={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quiz-panel",style:t.getStyle},[t.title?s("span",{staticClass:"quiz-panel_title"},[t._v(t._s(t.title)+" ")]):t._e(),t._v(" "),t.topLine?[s("hr")]:t._e(),t._v(" "),t._t("default"),t._v(" "),t.downLine?[s("hr")]:t._e()],2)},staticRenderFns:[]};var ds=s("VU/8")(cs,us,!1,function(t){s("kh5X")},"data-v-1e7faea6",null).exports,ps={name:"quiz-btn",props:{isLoading:{type:Boolean,default:!1},width:{type:String,default:"40px"},height:{type:String,default:"40px"},radius:{type:String,default:"default"},icon:{type:String},isCenter:{type:Boolean,default:!0},size:{type:String,default:"18px"},theme:{type:String,default:"DEFAULT"},isDisabled:{type:Boolean,default:!1}},components:{quizPanel:ds},computed:{ifIconWord:function(){return"content"===this.icon.split("-")[0]},getMainStyle:function(){var t={DEFAULT:["#fff","#f9f9f9"],BACK:["#ff3333","#e03232"],CHOOSE:["#87c141","#7ab441"],SURE:["#ff9900","#ef8e00"],BLACK:["#2a2a2a","#1a1a1a"],FORBID:["#fff","#f9f9f9"],TRANSLUCENCY:["rgba(42, 42, 42, 0.6)","rgba(26, 26, 26, 1)"]},e=this.isDisabled?"#292929":t[this.theme]?this.ifHoverBtn?t[this.theme][1]:t[this.theme][0]:this.theme;return{fontSize:this.size,backgroundColor:this.isDisabled?"#a2a2a2":this.theme?e:"#fff",textAlign:this.isCenter?"center":"left",cursor:this.isDisabled?"no-drop":"pointer",lineHeight:"1.3em",padding:"calc("+this.height+" / 2 - "+1.3*this.icon.split("-")[1].split("<br>").length/2+"em) 0"}},getIconStyle:function(){var t={DEFAULT:"#292929",FORBID:"#979797"};return{color:t[this.theme]?t[this.theme]:"#fff"}}},data:function(){return{ifHoverBtn:!1}}},hs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quiz-btn"},[s("quiz-Panel",{attrs:{width:t.width,height:t.height,radius:t.radius,topLine:!1,downLine:!1}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"quiz-btn_main",style:t.getMainStyle,on:{mouseover:function(e){t.ifHoverBtn=!0},mouseleave:function(e){t.ifHoverBtn=!1}}},[t.ifIconWord?[s("span",{style:t.getIconStyle,domProps:{innerHTML:t._s(this.icon.split("-")[1])}})]:[s("i",{class:t.icon,style:t.getIconStyle})]],2)])],1)},staticRenderFns:[]};var fs=s("VU/8")(ps,hs,!1,function(t){s("Hd14")},"data-v-7afdcf63",null).exports,ms={name:"quiz-input",props:{label:{type:String},type:{type:String,default:"text"},floatLen:{type:Number,default:0},range:{type:Array},tip:{type:String,default:""},pre:{type:String},next:{type:String},value:{},fontSize:{type:Number,default:16},lineHeight:{type:String},fontColor:{type:String,default:"#333"},disabled:{type:Boolean,default:!1},isCenter:{type:Boolean,default:!0},hideUnderline:{type:Boolean,default:!1},contentWidth:{type:String,default:"100%"},openAnimation:{type:Boolean,default:!0}},computed:{getInputType:function(){return"number"===this.type?"text":this.type},getBaseStyle:function(){return{fontSize:this.fontSize+"px",lineHeight:this.fontSize+10+"px"}},getContentStyle:function(){return{width:this.contentWidth,fontSize:this.fontSize+"px",height:this.lineHeight?this.lineHeight*this.fontSize+"px":this.fontSize+10+"px",cursor:this.disabled?"no-drop":"normal",textAlign:this.isCenter?"center":"normal",borderBottom:this.hideUnderline?"none":"1px solid #636363",marginLeft:this.hideUnderline?"0px":"15px"}},getDefaultInputStyle:function(){return{fontSize:this.fontSize+"px",color:this.fontColor,lineHeight:this.lineHeight?this.lineHeight:this.fontSize+10+"px",textAlign:this.isCenter?"center":"normal"}}},data:function(){return{oldPre:this.pre||"",oldNext:this.next||"",inputValue:this.value}},methods:{isSimple:function(t){return!t||0===t.length||""===t},handleInput:function(t){var e=this.inputValue;this.inputValue=this.limitInput(this.type,t,t.data,t.target.value,e),this.$emit("input",this.limitOutput(this.inputValue))},handleKeyUp:function(t){var e=this.inputValue;"number"===this.type&&""!==e&&(this.inputValue=this.limitInput(this.type,t,"UP",t.target.value,e),this.$emit("input",this.limitOutput(this.inputValue)))},handleKeyDown:function(t){var e=this.inputValue;"number"===this.type&&""!==e&&(this.inputValue=this.limitInput(this.type,t,"DOWN",t.target.value,e),this.$emit("input",this.limitOutput(this.inputValue)))},addDecorate:function(t,e,s){if(0===t.length)return"";if(this.isSimple(e)||(t=0!==t.indexOf(e)?e+t:t),!this.isSimple(s)){var i=s.length;t=t.indexOf(s)<0||t.indexOf(s)>=0&&t.indexOf(s)+i===t.length?t+s:""}return t},clearDecorate:function(t,e,s){if(!this.isSimple(e)){var i=e.length;t=0===t.indexOf(e)?t.slice(i):t}if(!this.isSimple(s)){var a=s.length;t=t.length>=a&&t.indexOf(s)===t.length-a?t.slice(0,-a):t}return t},handleBlur:function(t){this.inputValue=this.addDecorate(this.limitOutput(t.target.value),this.pre,this.next)},handleFocus:function(t){this.inputValue=this.clearDecorate(t.target.value,this.pre,this.next)},limitOutput:function(t){if("number"!==this.type)return t;var e=+t;return this.range?this.range.length>0&&e<this.range[0]?this.range[0].toString():this.range.length>1&&e>this.range[1]?this.range[1].toString():e.toString():e.toString()},limitInput:function(t,e,s,i,a){var n=this,o={number:function(){if(null==s)return i.replace(/^\.+/,"");if("UP"===s)return parseFloat(a)+1;if("DOWN"===s)return parseFloat(a)-1;if(!new RegExp("[0-9"+(n.floatLen>0?".":"")+"]").test(s))return a;if("."===s){if(""===a||a.indexOf(".")>0)return a}else if(a.indexOf(".")>0&&a.indexOf(".")===a.length-n.floatLen-1)return a;return i}};return o[t]&&(e.target.value=o[t]()),e.target.value}},created:function(){this.oldPre=this.pre||"",this.oldNext=this.next||"";var t=null==this.inputValue?"":this.inputValue;this.inputValue=this.addDecorate(t.toString(),this.pre,this.next)},watch:{pre:function(){this.inputValue=this.clearDecorate(this.inputValue.toString(),this.oldPre,this.next),this.inputValue=this.addDecorate(this.inputValue.toString(),this.pre,this.next),this.oldPre=this.pre},next:function(){this.inputValue=this.clearDecorate(this.inputValue.toString(),this.pre,this.oldNext),this.inputValue=this.addDecorate(this.inputValue.toString(),this.pre,this.next),this.oldNext=this.next}}},gs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:t.openAnimation?"fade":""}},[s("div",{staticClass:"quiz-input",style:t.getBaseStyle},[t.label?s("span",{staticClass:"quiz-input_label",on:{click:function(e){t.$refs.input.focus()}}},[t._v(t._s(t.label)+" :")]):t._e(),t._v(" "),s("div",{staticClass:"quiz-input_content",style:t.getContentStyle},[s("input",{ref:"input",staticClass:"quiz-input_default",style:t.getDefaultInputStyle,attrs:{type:t.getInputType,placeholder:t.tip,disabled:t.disabled},domProps:{value:t.inputValue},on:{input:t.handleInput,blur:t.handleBlur,focus:t.handleFocus,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleBlur(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.handleKeyUp(e):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.handleKeyDown(e):null}]}})])])])},staticRenderFns:[]};var _s=s("VU/8")(ms,gs,!1,function(t){s("CSr1")},"data-v-bdfa6686",null).exports,vs={name:"quiz-choose",props:{label:{type:String},name:{type:String},ifMulti:{type:Boolean,default:!1},dataList:{type:Array,default:function(){return[]}},fontSize:{type:Number,default:16},isCenter:{type:Boolean,default:!0},hideUnderline:{type:Boolean,default:!1},updateFuc:{type:Function}},computed:{getBaseStyle:function(){return{fontSize:this.fontSize+"px",lineHeight:this.fontSize+10+"px"}},getContentStyle:function(){return{fontSize:this.fontSize+"px",height:this.fontSize+10+"px",cursor:this.disabled?"no-drop":"normal",textAlign:this.isCenter?"center":"normal",borderBottom:this.hideUnderline?"none":"1px solid #636363"}},getDefaultInputStyle:function(){return{fontSize:this.fontSize+"px",lineHeight:this.fontSize+10+"px",textAlign:this.isCenter?"center":"normal"}}},data:function(){return{selectList:[]}},methods:{updateSelectedData:function(){var t=this,e=this.dataList.map(function(e){return e.selected=t.selectList.indexOf(e.value)>=0,e});this.$parent.$emit("updateSelectedData-"+this.name,e)},selectHandler:function(t){var e=this.selectList.indexOf(t);e>=0?this.selectList.length>1&&this.selectList.splice(e,1):this.ifMulti?this.selectList.push(t):this.selectList=[t],this.updateSelectedData()}},created:function(){var t=this;if(this.$parent.$on("updateSelectedData-"+this.name,function(e){t.updateFuc(t.name,e)}),this.dataList.length>0){for(var e in this.dataList)this.dataList[e].selected&&this.selectList.push(this.dataList[e].value);0===this.selectList.length&&this.selectList.push(this.dataList[0].value),this.updateSelectedData()}}},bs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quiz-choose",style:t.getBaseStyle},[t.label?s("span",{staticClass:"quiz-choose_label"},[t._v(t._s(t.label)+" :")]):t._e(),t._v(" "),s("div",{staticClass:"quiz-choose_content",style:t.getContentStyle},t._l(t.dataList,function(e,i){return s("span",{key:i,class:{"quiz-choose_actived":t.selectList.indexOf(e.value)>=0},on:{click:function(s){t.selectHandler(e.value)}}},[t._v(t._s(e.name))])}))])},staticRenderFns:[]};var ys=s("VU/8")(vs,bs,!1,function(t){s("7N+y")},"data-v-15ba1cb5",null).exports,ws={name:"icon",props:{name:{type:String,request:!0},tips:{type:String}}},Cs={render:function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{class:this.name}),e("br"),this.tips?e("span",{staticClass:"tips"},[this._v(this._s(this.tips))]):this._e()])},staticRenderFns:[]};var ks={name:"quiz-table",components:{quizInput:_s,quizIcon:s("VU/8")(ws,Cs,!1,function(t){s("lMHN")},"data-v-5e98bbfa",null).exports},computed:{getClass:function(){return 0!==this.status?"quiz-table quiz-table_isEditing":this.isSelected?"quiz-table quiz-table_isSelected":"quiz-table"}},props:{isSelected:{type:Boolean,default:!1},canBeDeled:{type:Boolean,default:!0},dataObj:{type:Object,default:function(){return{}}},isOnlyRead:{type:Boolean,default:!1}},data:function(){return{key:(new Date).getTime(),myDataObj:{},status:0}},methods:{deleteTemplate:function(t){this.$emit("deleteTemplate",t)},updateTemplate:function(){this.$emit("updateTemplate",this.myDataObj,this.revertObj)},getTotal:function(){if(!this.myDataObj)return 0;if(!this.myDataObj.question_type||0===this.myDataObj.question_type.length)return 0;var t=0;this.myDataObj.question_type.forEach(function(e){t+=e.question_num*e.type_bonus}),this.myDataObj.total=t},getTypeName:function(t){var e={"填空题":1,"选择题":2,"编程题":3,"问答题":4,"判断题":5};for(var s in e)if(e[s]===t)return s;return"ERROR"},toEdit:function(){var t=this;this.status=3;var e=setTimeout(function(){t.status=1,clearTimeout(e)},800)},endEdit:function(){this.revertObj(),this.status=0},revertObj:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.myDataObj=this.copyObject(this.dataObj),this.key=(new Date).getTime()):this.endEdit()},copyObject:function(t){return JSON.parse(u()(t))},diffWithFather:function(){return u()(this.myDataObj)!==u()(this.dataObj)}},created:function(){this.myDataObj=this.copyObject(this.dataObj)},watch:{isSelected:function(){!1===this.isSelected&&(this.revertObj(),this.status=0)},myDataObj:{handler:function(){this.status=this.diffWithFather()?2:0,this.getTotal()},deep:!0,immediate:!0},dataObj:function(){this.revertObj()}}},Ts={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{key:t.key,class:t.getClass},[s("div",{staticClass:"quiz-table_header"},[s("div",{staticClass:"quiz-table_title"},[s("quiz-input",{attrs:{fontSize:15,next:"("+t.myDataObj.total+"分)",hideUnderline:!0,contentWidth:"100%",disabled:0===t.status||3===t.status,openAnimation:!1},model:{value:t.myDataObj.name,callback:function(e){t.$set(t.myDataObj,"name",e)},expression:"myDataObj.name"}})],1),t._v(" "),!this.isOnlyRead&&this.isSelected?s("div",{staticClass:"quiz-table_icon"},[0===t.status?[s("quiz-icon",{staticClass:"icon",attrs:{name:"icon-xiugai-copy",tips:"编辑模板"},nativeOn:{click:function(e){return t.toEdit(e)}}})]:[t.canBeDeled&&3!==t.status?s("quiz-icon",{staticClass:"icon",attrs:{name:"icon-guanbi",tips:"删除模板"},nativeOn:{click:function(e){t.deleteTemplate(t.myDataObj.template_id)}}}):t._e(),t._v(" "),2===t.status?s("quiz-icon",{staticClass:"icon",attrs:{name:"icon-queding",tips:"确定更改"},nativeOn:{click:function(e){t.updateTemplate(t.myDataObj.template_id)}}}):t._e(),t._v(" "),3!==t.status?s("quiz-icon",{staticClass:"icon",attrs:{name:"icon-chehui",tips:"退出编辑"},nativeOn:{click:function(e){return t.endEdit(e)}}}):t._e()]],2):t._e()]),t._v(" "),s("table",t._l(t.myDataObj.question_type,function(e,i){return s("tr",{key:i},[s("td",[t._v(t._s(t.getTypeName(e.type)))]),t._v(" "),s("td",{class:{tipEdit:3===t.status}},[s("quiz-input",{attrs:{type:"number",range:[0,20],fontSize:13,next:"道",hideUnderline:!0,contentWidth:"35px",disabled:0===t.status||3===t.status,openAnimation:!1},model:{value:e.question_num,callback:function(s){t.$set(e,"question_num",s)},expression:"item.question_num"}})],1),t._v(" "),s("td",{class:{tipEdit:3===t.status}},[s("quiz-input",{attrs:{type:"number",range:[1,30],fontSize:13,pre:"各",next:"分",hideUnderline:!0,contentWidth:"45px",disabled:0===t.status||3===t.status,openAnimation:!1},model:{value:e.type_bonus,callback:function(s){t.$set(e,"type_bonus",s)},expression:"item.type_bonus"}})],1),t._v(" "),s("td",[t._v(t._s(e.question_num*e.type_bonus)+" 分")])])}))])},staticRenderFns:[]};var Ss=s("VU/8")(ks,Ts,!1,function(t){s("h4Hz")},"data-v-5e4aefd0",null).exports,xs=s("d7EF"),Ds=s.n(xs),qs=s("fZjL"),Is=s.n(qs),zs=s("Gu7T"),Ls=s.n(zs),Ps={name:"rangeChoose",components:{quizPanel:ds,quizBtn:fs},computed:{getTypeName:function(){return{0:"题目",1:"填空题",2:"选择题",3:"编程题",4:"问答题",5:"判断题"}[this.problemType]}},props:{problemType:{type:Number,default:0},needAmount:{type:Number,default:0},rangeData:{type:Object,default:function(){return null}}},data:function(){return{ifHadInitData:!1,filterText:"",defaultProps:{children:"children",label:"label"},tagValToLabelList:[],tagsTreeData:[],hasChoosedTagsValue:[],hasChoosedTagsLabel:[],hasChoosedProblemValue:[],hasChoosedProblemDetail:[],chooseType:0,problemList:[],page:1,pagesize:10,total:0}},methods:{problemClickHandler:function(t){var e=t.problem_id,s=this.hasChoosedProblemValue.indexOf(e);if(s>-1)this.hasChoosedProblemDetail.splice(s,1),this.hasChoosedProblemValue.splice(s,1);else{if(this.hasChoosedProblemValue.length===this.needAmount)return void this.$message({message:"您设置了"+this.getTypeName+"的最大数量为"+this.needAmount+"道",type:"warning"});this.hasChoosedProblemDetail.push(t),this.hasChoosedProblemValue.push(e)}},handleCurrentChange:function(t){this.page=t,this.showProblemDetail()},back:function(){this.$emit("back",{type:this.problemType,tagsValue:this.hasChoosedTagsValue,tagsLabel:this.hasChoosedTagsLabel,problemValue:this.hasChoosedProblemValue,problemDetail:this.hasChoosedProblemDetail})},showProblemDetail:function(){var t=this;Ve.getQuizProblemList("/quiz/problems/find_by_tags_type",{type:t.problemType,range:[].concat(Ls()(t.hasChoosedTagsValue)),page:t.page,pagesize:t.pagesize}).then(function(e){t.problemList=e.data.problem_list,t.total=e.data.total,t.ifHadInitData=!0}),this.chooseType=1},getAutoAddProblem:function(){var t=this;if(this.chooseType=0,0!==this.needAmount){if(this.hasChoosedProblemValue.length!==this.needAmount){var e={problemSet_list:[{need_amount:this.needAmount-this.hasChoosedProblemValue.length,type:this.problemType,range:this.hasChoosedTagsValue,ques_list:this.hasChoosedProblemValue}]};Ve.autoAddProblem("/quiz/auto_add",e).then(function(e){e.data.detail[0].ques_list.forEach(function(e){t.hasChoosedProblemValue.push(e.problem_id),t.hasChoosedProblemDetail.push(e)}),e.data.detail[0].ques_list.length<t.needAmount-t.hasChoosedProblemValue.length&&t.$message({message:"后台数据库并未有足够数量的题目！请联系添加！",type:"warning"})})}}else this.$message({message:"请设置题目数量，当前设置为0。",type:"warning"})},tagsChangeHandler:function(){var t=this,e=this.$refs.tagTree.getCheckedNodes();this.hasChoosedTagsValue=[],this.hasChoosedTagsLabel=[],e.forEach(function(e){t.hasChoosedTagsValue.push(e.id),t.hasChoosedTagsLabel.push(e.label)}),1===this.chooseType&&(this.ifHadInitData=!1,this.showProblemDetail()),0!==this.hasChoosedTagsLabel.length&&(this.hasChoosedProblemDetail=this.hasChoosedProblemDetail.filter(function(e){for(var s=0;s<t.hasChoosedTagsLabel.length;s++)if(e.label.indexOf(t.hasChoosedTagsLabel[s])>=0)return e;var i=t.hasChoosedProblemValue.indexOf(e.problem_id);t.hasChoosedProblemValue.splice(i,1)}))},filterTagNode:function(t,e){return!t||-1!==e.label.indexOf(t)},iterEntries:_.a.mark(function t(e){var s,i,a;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=Is()(e),i=0;case 2:if(!(i<s.length)){t.next=9;break}return a=s[i],t.next=6,[a,e[a]];case 6:i++,t.next=2;break;case 9:case"end":return t.stop()}},t,this)}),formatTreeData:function(t,e){var s=!0,i=!1,a=void 0;try{for(var n,o=et()(this.iterEntries(e));!(s=(n=o.next()).done);s=!0){var r=n.value,l=Ds()(r,2),c=l[0],u=l[1],d={id:+c,label:this.tagValToLabelList[c],children:[]};this.formatTreeData(d.children,u),t.push(d)}}catch(t){i=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(i)throw a}}},copyPropsData:function(){this.hasChoosedTagsValue=[].concat(Ls()(this.rangeData.range)),this.hasChoosedTagsLabel=[].concat(Ls()(this.rangeData.rangeLabelList)),this.hasChoosedProblemValue=[].concat(Ls()(this.rangeData.problemList)),this.hasChoosedProblemDetail=[].concat(Ls()(this.rangeData.problemDetail_list))},getTagsTree:function(){var t=this;Ve.getQuestionList("/tags").then(function(e){t.tagValToLabelList=e.data.tag_dict,t.formatTreeData(t.tagsTreeData,e.data.tag_tree),setTimeout(function(){t.$refs.tagTree.setCheckedKeys(t.hasChoosedTagsValue),t.ifHadInitData=!0},500)})}},mounted:function(){this.copyPropsData()},created:function(){this.getTagsTree()},watch:{filterText:function(t){this.$refs.tagTree.filter(t)}}},Rs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"rangeChoose"},[s("div",{staticClass:"rangeChoose_container"},[s("div",{class:{rangeChoose_choosedProblems:!0,rangeChoose_choosedProblems_showRight:1===t.chooseType}},[s("ul",t._l(t.hasChoosedProblemDetail,function(e){return s("li",{key:e.problem_id},[s("span",{staticStyle:{color:"#ff9900","font-weight":"600"}},[t._v(t._s(e.problem_id))]),t._v(" \n          "),s("span",[t._v(t._s(e.title))]),t._v(" "),s("span",{staticClass:"btn_close",on:{click:function(s){t.problemClickHandler(e)}}},[s("i",{staticClass:"icon-chushaixuanxiang"})])])}))]),t._v(" "),s("div",{class:{rangeChoose_container_mid:!0,rangeChoose_container_mid_showRight:1===t.chooseType}},[s("div",{staticClass:"rangeChoose_base"},[s("div",{staticClass:"rangeChoose_backBtn",on:{click:function(e){t.back()}}},[s("quiz-btn",{attrs:{icon:"icon-chushaixuanxiang",radius:"50%",size:"20px",theme:"BACK",width:"30px",height:"30px"}})],1),t._v(" "),s("quiz-panel",{attrs:{title:"范围设置",padding:"10px 10px",height:"100%"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.ifHadInitData,expression:"!ifHadInitData"}]},[s("div",{staticClass:"rangeChoose_treeTags public-scrollStyle"},[s("el-input",{attrs:{size:"mini",placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),s("el-tree",{ref:"tagTree",attrs:{data:t.tagsTreeData,"show-checkbox":"",accordion:"","node-key":"id",props:t.defaultProps,"check-on-click-node":!0,"highlight-current":!0,"filter-node-method":t.filterTagNode},on:{"check-change":t.tagsChangeHandler}})],1)]),t._v(" "),s("div",{staticClass:"rangeChoose_tips"},[t._v(t._s(t.getTypeName)+" · 考题范围如下")]),t._v(" "),s("div",{staticClass:"rangeChoose_showSelected public-scrollStyle"},[t._l(t.hasChoosedTagsLabel,function(e,i){return s("span",{key:i},[t._v("\n              "+t._s(e)),i!==t.hasChoosedTagsLabel.length-1?s("span",[t._v("、")]):t._e()])}),t._v(" "),0===t.hasChoosedTagsLabel.length?s("span",{staticClass:"rangeChoose_showSelected_none"},[t._v("默认全部范围")]):t._e()],2),t._v(" "),s("div",{staticClass:"rangeChoose_operBtns"},[s("div",{staticClass:"rangeChoose_operBtn",on:{click:function(e){t.showProblemDetail()}}},[s("quiz-btn",{attrs:{icon:"content-自主选择试题",size:"16px",radius:"25px",theme:1===t.chooseType?"SURE":"DEFAULT",width:"120px",height:"50px"}})],1),t._v(" "),s("div",{staticClass:"rangeChoose_operBtn",on:{click:function(e){t.getAutoAddProblem()}}},[s("quiz-btn",{attrs:{icon:"content-随机生成试题",size:"16px",radius:"25px",theme:0===t.chooseType?"SURE":"DEFAULT",width:"120px",height:"50px"}})],1)])])],1),t._v(" "),s("div",{staticClass:"rangeChoose_problems"},[s("quiz-panel",{attrs:{title:"自主选择试题",padding:"10px 10px",height:"100%",isHidden:!1}},[s("div",{staticClass:"problems_detail"},[s("div",{staticClass:"problems_detail_table public-scrollStyle"},[s("table",{attrs:{cellspacing:"0"}},[s("tr",[s("th",[t._v("PID")]),t._v(" "),s("th",[t._v("题目标签")]),t._v(" "),s("th",[t._v("题目标题")]),t._v(" "),s("th",[t._v("是否选择")])]),t._v(" "),t._l(t.problemList,function(e){return s("tr",{key:e.problem_id},[s("td",[t._v(t._s(e.problem_id))]),t._v(" "),s("td",t._l(e.label,function(i,a){return s("span",{key:a},[t._v(t._s(i)+"\n                      "),a!==e.label.length-1?s("span",[t._v("、")]):t._e(),s("wbr")])})),t._v(" "),s("td",[t._v(t._s(e.title))]),t._v(" "),s("td",[s("span",{class:{table_btn:!0,table_btn_isChoosed:t.hasChoosedProblemValue.indexOf(e.problem_id)>-1},on:{click:function(s){t.problemClickHandler(e)}}})])])})],2),t._v(" "),0===t.problemList.length?s("span",{staticClass:"noList"},[t._v("该范围暂无考试题，请联系后台添加...")]):t._e()]),t._v(" "),t.total>t.pagesize?s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.page,"page-size":t.pagesize,"pager-count":5,total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()])])],1)])])])])},staticRenderFns:[]};var As=s("VU/8")(Ps,Rs,!1,function(t){s("Uqce")},"data-v-33cf6113",null).exports,Es={name:"previewChoose",components:{quizPanel:ds,quizBtn:fs},props:{quizList:{type:Array,default:function(){return[]}}},data:function(){return{quizId:this.quizList[0].quiz_id}},methods:{chooseHandler:function(){this.$emit("chooseHandler",this.quizId)}},created:function(){}},Fs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"previewChoose"},[s("div",{staticClass:"previewChoose_container"},[s("quiz-panel",{attrs:{title:"选择历史编辑试卷",padding:"10px 10px",height:"100%"}},[s("ul",{staticClass:"previewChoose_container-quizs public-scrollStyle"},t._l(t.quizList,function(e,i){return s("li",{key:e.quiz_id,class:{"previewChoose_quiz-item":!0,"previewChoose_quiz-curItem":t.quizId===e.quiz_id},on:{click:function(s){t.quizId=e.quiz_id}}},[s("span",{staticClass:"index"},[t._v(t._s(i+1))]),t._v(" "),s("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"update-time"},[t._v("上次更新时间："+t._s(e.update_time?e.update_time.replace("T"," "):"无"))])])}))]),t._v(" "),s("div",{staticClass:"previewChoose_sureBtn",on:{click:function(e){t.chooseHandler()}}},[s("quiz-btn",{attrs:{icon:"icon-queding",radius:"50%",size:"25px",theme:"SURE",width:"40px",height:"40px"}})],1)],1)])},staticRenderFns:[]};var $s=s("VU/8")(Es,Fs,!1,function(t){s("3LOE")},"data-v-5ef796f8",null).exports,Os={name:"quiz-dialog",components:{quizPanel:ds,quizBtn:fs},props:{showProperty:{type:String,default:""},title:{type:String},closeTips:{type:String,default:"返回"},width:{type:Number,default:400},height:{type:Number,default:200},radius:{type:String,default:"default"}},computed:{getStyle:function(){return{marginLeft:"calc(50vw - "+this.width/2+"px)",marginTop:"calc(50vh - "+this.height/2+"px)"}},getContentStyle:function(){return{height:this.height-46-60+"px"}}},data:function(){return{parent:null}},methods:{clickHandler:function(){this.$emit("clickHandler")},close:function(){this.parent[this.showProperty]=!this.parent[this.showProperty]}},created:function(){for(var t=this.$parent,e=1;e<=5;e++){if(t.hasOwnProperty(this.showProperty)){this.parent=t;break}if(!t.$parent||5===e){this.parent={showProperty:!1};break}t=t.$parent}}},Ns={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.parent[t.showProperty],expression:"parent[showProperty]"}],staticClass:"quiz-dialog"},[s("div",{staticClass:"quiz-dialog_container",style:t.getStyle},[s("quiz-panel",{attrs:{width:t.width+"px",height:t.height+"px",radius:t.radius,title:t.title,padding:"10px 8px"}},[s("div",{staticClass:"quiz-dialog_content",style:t.getContentStyle},[t._t("default")],2),t._v(" "),s("div",{staticClass:"quiz-dialog_backBtn",attrs:{align:"center"},on:{click:function(e){t.close()}}},[s("quiz-btn",{attrs:{icon:"content-"+t.closeTips,size:"14px",radius:"23px",theme:"BACK",width:"120px",height:"46px"},nativeOn:{click:function(e){t.clickHandler()}}})],1)])],1)])])},staticRenderFns:[]};var Ms={name:"quizAdd",components:{quizPanel:ds,quizBtn:fs,quizInput:_s,quizChoose:ys,previewChoose:$s,quizTable:Ss,quizDialog:s("VU/8")(Os,Ns,!1,function(t){s("/Msj")},"data-v-0895c9b9",null).exports,rangeChoose:As},computed:{getMainPanelPadding:function(){return"10px 15px"},isBanToAddQuiz:function(){var t=this;if(""===this.quizInfo.title.trim())return!0;var e=this.timeSelectList.filter(function(t){return t.selected})[0].value;if(1===e&&""===this.quizInfo.startTime)return!0;if(1===e){var s=(new Date).getTime();if(new Date(this.quizInfo.startTime).getTime()-s<6e5)return!0}return parseInt(this.quizInfo.duration)<parseInt(this.quizInfo.advance)||(!this.choosedTemplate.question_type||!!this.choosedTemplate.question_type.some(function(e){return t.problemRange[e.type-1].problemList.length!==e.question_num}))}},data:function(){return{isShowQuizInfo:!1,isShowMessage:!1,isShowQuizChoose:!1,isCanClickPreviewBtn:!0,isCanClickAddBtn:!0,showRangeChoose:-1,step:1,courseId:-1,quizId:-1,courseInfo:{},quizPreviewList:[],quizInfo:{title:"",course:"",classes:"",startTime:"",duration:120,advance:30,remindTime:5},typeSelectList:[{name:"平时考试",value:1,selected:!1},{name:"期中考试",value:2,selected:!0},{name:"期末考试",value:3,selected:!1}],langSelectList:[{name:"C语言",value:0,selected:!1},{name:"C++",value:1,selected:!0},{name:"JAVA",value:3,selected:!1},{name:"Python",value:6,selected:!1}],timeSelectList:[{name:"定时开启",value:1,selected:!0},{name:"手动开启",value:2,selected:!1}],tipsSelectList:[{name:"不提醒",value:1,selected:!1},{name:"简单提醒",value:2,selected:!1},{name:"详细提醒",value:3,selected:!0}],templateList:[],tablesKey:(new Date).getTime(),choosedTemplate:{},MAXTEMPLATE:8,selectedTemplateId:-1,problemRange:[]}},methods:{backToList:function(){this.$router.push({name:"PersonalCenter",params:{isShow:4},query:{courseId:this.courseId}})},requireToBack:function(){var t=this;this.$confirm("确定不保存直接返回列表页?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.backToList()})},backToPersonCenter:function(){this.$router.push({path:"/personal-center/1"})},updateChoosedTemplate:function(){var t=this;if(-1!==this.selectedTemplateId){for(var e=0;e<this.templateList.length;e++){if(0===this.problemRange.length)return;if(this.templateList[e].template_id===this.selectedTemplateId){var s=JSON.parse(u()(this.templateList[e]));for(var i in this.choosedTemplate=s,this.choosedTemplate)this.choosedTemplate[i]instanceof Array?this.choosedTemplate[i].forEach(function(t,e){for(var a in t)t[a]=parseInt(s[i][e][a])}):this.choosedTemplate[i]=s[i]}}this.choosedTemplate.question_type.forEach(function(e){for(var s=t.problemRange[e.type-1];s.problemList.length>e.question_num;)s.problemList.pop(),s.problemDetail_list.pop()})}},getTypeName:function(t){var e={"填空题":1,"选择题":2,"编程题":3,"问答题":4,"判断题":5};for(var s in e)if(e[s]===t)return s;return"ERROR"},testFulled:function(){var t=this,e=!0;if(this.choosedTemplate.question_type.some(function(e){return t.problemRange[e.type-1].problemList.length!==e.question_num})){var s={problemSet_list:[]};return this.choosedTemplate.question_type.forEach(function(e){s.problemSet_list.push({need_amount:e.question_num-t.problemRange[e.type-1].problemList.length,type:e.type,range:t.problemRange[e.type-1].range,ques_list:t.problemRange[e.type-1].problemList})}),Ve.autoAddProblem("/quiz/auto_add",s).then(function(i){return i.data.detail.forEach(function(i,a){i.ques_list.forEach(function(e){t.problemRange[i.type-1].problemList.push(e.problem_id),t.problemRange[i.type-1].problemDetail_list.push(e)}),i.ques_list.length<s.problemSet_list[a].need_amount&&(e=!1)}),e||t.$message({message:"某些题目的范围设置不足以补足题目，请手动设置！",type:"warning"}),p.a.resolve({isFull:e})})}return p.a.resolve({isFull:e})},setApiQuizInfo:function(t){if(t.quizInfo={type:this.typeSelectList.filter(function(t){return t.selected})[0].value,language:this.langSelectList.filter(function(t){return t.selected})[0].value,duration:parseInt(this.quizInfo.duration),advance:parseInt(this.quizInfo.advance),remind_type:this.tipsSelectList.filter(function(t){return t.selected})[0].value,remind_time:parseInt(this.quizInfo.remindTime),quiz_class:this.courseInfo.class_id.map(function(t){return+t})},""===this.quizInfo.title.trim())return this.$message({message:"没有填写考试标题！",type:"warning",duration:1500}),!1;t.quizInfo.title=this.quizInfo.title;var e=this.timeSelectList.filter(function(t){return t.selected})[0].value;if(1===e&&""===this.quizInfo.startTime)return this.$message({message:"没有填写开考时间！你可设置为手动开启。",type:"warning",duration:1500}),!1;if(1===e){var s=(new Date).getTime();if(new Date(this.quizInfo.startTime).getTime()-s<6e5)return this.$message({message:"开考时间不合理，最早可设置为现在时刻的十分钟后",type:"warning",duration:1500}),!1}return parseInt(this.quizInfo.duration)<parseInt(this.quizInfo.advance)?(this.$message({message:"提前交卷时间的设置不合理，请修改。",type:"warning",duration:1500}),!1):(t.quizInfo.start_time=1===e?this.quizInfo.startTime.length>=19?this.quizInfo.startTime.replace("T"," "):this.quizInfo.startTime.replace("T"," ")+":00":-1,!0)},toQuizPreview:function(t){var e=this;if(this.isCanClickPreviewBtn&&this.isCanClickAddBtn){this.isCanClickPreviewBtn=!t,this.isCanClickAddBtn=t;var s={quiz_id:this.quizId,courses_id:parseInt(this.courseId),quizInfo:null,template_id:this.selectedTemplateId,problemRange:[],problemList:[]};if(!this.setApiQuizInfo(s))return this.isCanClickPreviewBtn=!0,!1;this.testFulled().then(function(i){i.isFull&&(e.problemRange.forEach(function(t){s.problemRange.push({type:t.type,range:t.range}),s.problemList.push({type:t.type,ques_list:t.problemList})}),Ve.postOrPreviewQuiz("/quiz",s,t).then(function(s){if("true"===s.success){if(!t)return void(e.isShowMessage=!e.isShowMessage);e.$router.push({name:"quizPreview",params:{id:s.data.quiz_id},query:{redirect:"/quizAdd/"+e.courseId+"/"+s.data.quiz_id}})}else e.$message({message:"没有成功生成考试数据，请稍后再试！",type:"error",duration:1500})}))}).finally(function(){e.isCanClickPreviewBtn=!0,e.isCanClickAddBtn=!0})}},addQuiz:function(){this.isBanToAddQuiz||this.toQuizPreview(!1)},backToMain:function(t){var e=t.type,s=t.tagsValue,i=t.tagsLabel,a=t.problemValue,n=t.problemDetail;this.showRangeChoose=-1,this.problemRange.map(function(t){return t.type===e&&(t.range=s,t.rangeLabelList=i,t.problemList=a,t.problemDetail_list=n),t})},getSelectedItem:function(t){var e=this[t+"SelectList"][0].value;return this[t+"SelectList"].forEach(function(t){t.selected&&(e=t.value)}),e},updateSelectList:function(t,e){this[t+"SelectList"]=e},clearProblemData:function(){this.problemRange.map(function(t){return t.range=[],t.rangeLabelList=[],t.problemList=[],t.problemDetail_list=[],t})},changeSelectedRange:function(t){this.selectedTemplateId=t,this.updateChoosedTemplate(),this.clearProblemData()},changeStep:function(){this.step=1===this.step?2:1},checkIsHasPerviewQuiz:function(){var t=this;Ve.checkOnlyPreviewQuiz("/quiz/find_priview",this.courseId).then(function(e){if("true"===e.success&&e.data.quiz_id.length>0)t.quizPreviewList=e.data.quiz_id,1===t.quizPreviewList.length?(t.quizId=t.quizPreviewList[0].quiz_id,t.initData(t.quizId)):t.isShowQuizChoose=!0;else{var s=window.sessionStorage,i=JSON.parse(s.getItem("courseInfo"));if("undefined"===i||null==i)return void t.backToPersonCenter();t.courseInfo=i,t.quizInfo.course=t.courseInfo.courses_name,t.quizInfo.classes=t.courseInfo.class_name.toString(),t.isShowQuizInfo=!0}})},initPreviewData:function(t){this.quizId=t,this.initData(this.quizId),this.isShowQuizChoose=!1},getCourseInfo:function(){this.$route.params.courseId||this.backToPersonCenter(),this.courseId=this.$route.params.courseId,this.initProblemRange(),this.getTemplateList()},initProblemRange:function(){this.problemRange=[{type:1,range:[],rangeLabelList:[],problemList:[],problemDetail_list:[]},{type:2,range:[],rangeLabelList:[],problemList:[],problemDetail_list:[]},{type:3,range:[],rangeLabelList:[],problemList:[],problemDetail_list:[]},{type:4,range:[],rangeLabelList:[],problemList:[],problemDetail_list:[]},{type:5,range:[],rangeLabelList:[],problemList:[],problemDetail_list:[]}]},initData:function(t){var e=this;Ve.getPreviewInitData("/quiz/find_detail_by_id",t).then(function(t){"true"===t.success&&(e.courseInfo={courses_name:t.data.quiz_info.course_name,class_name:t.data.quiz_info.className_list,class_id:t.data.quiz_info.classId_list},e.quizInfo.title=t.data.quiz_info.title,e.quizInfo.course=e.courseInfo.courses_name,e.quizInfo.classes=e.courseInfo.class_name.toString(),e.quizInfo.duration=t.data.quiz_info.duration,e.quizInfo.advance=t.data.quiz_info.advance,e.quizInfo.remindTime=t.data.quiz_info.remind_time,new Date(t.data.quiz_info.start_time).getTime()-(new Date).getTime()<new Date(e.courseInfo.duration).getTime()+6e5?e.quizInfo.startTime="":e.quizInfo.startTime=t.data.quiz_info.start_time,[{label:"type",value:t.data.quiz_info.type},{label:"lang",value:t.data.quiz_info.language},{label:"time",value:t.data.quiz_info.start_time&&-1!==t.data.quiz_info.start_time?1:2},{label:"tips",value:t.data.quiz_info.remind_type}].forEach(function(t){e[t.label+"SelectList"].forEach(function(e){e.selected=e.value===t.value})}),e.changeSelectedRange(t.data.template_id),e.problemRange=e.problemRange.map(function(s,i){var a=t.data.detail[i];return s={range:a.tags_value,rangeLabelList:a.tags_label,problemList:a.ques_list.filter(function(t,i){return i<e.choosedTemplate.question_type[s.type-1].question_num}),problemDetail_list:a.ques_detail_list.filter(function(t,i){return i<e.choosedTemplate.question_type[s.type-1].question_num}),type:a.type}}),e.isShowQuizInfo=!0)})},getTemplateList:function(){var t=this;Ve.getTemplateList("/quiz/templates",{}).then(function(e){t.templateList=e.data.template_list,t.selectedTemplateId=0===t.templateList.length?-1:t.templateList[0].template_id,t.updateChoosedTemplate(),t.$route.params.id?(t.quizId=parseInt(t.$route.params.id),t.initData(t.quizId)):t.checkIsHasPerviewQuiz()})},deleteTemplate:function(t){var e=this;Ve.deleteTemplate("/quiz/templates",t).then(function(s){"true"===s.success?(e.templateList=e.templateList.filter(function(e){return e.template_id!==t}),e.selectedTemplateId===t&&(e.selectedTemplateId=0===e.templateList.length?-1:e.templateList[0].template_id,e.updateChoosedTemplate()),e.$message({message:"删除成功！",type:"success",duration:1500})):e.$message({message:s.msg,type:"warning",duration:1500})})},updateTemplate:function(t,e){var s=this;Ve.updateTemplate("/quiz/templates",t).then(function(i){"true"===i.success?(s.templateList.map(function(e){return e.template_id!==t.template_id?e:(e.name=t.name,e.question_type.map(function(e,s){return e.type=t.question_type[s].type,e.question_num=t.question_type[s].question_num,e.type_bonus=t.question_type[s].type_bonus,e}),e.total=t.total,e)}),s.updateChoosedTemplate(),1!==s.step&&(s.tablesKey=(new Date).getTime()),e(),s.$message({message:"编辑成功！",type:"success",duration:1500})):(e(!1),s.$message({message:i.msg,type:"warning",duration:1500}))})},addTemplate:function(){var t=this,e={name:"模板名",question_type:[{type:1,question_num:4,type_bonus:5},{type:2,question_num:4,type_bonus:5},{type:3,question_num:4,type_bonus:5},{type:4,question_num:4,type_bonus:5},{type:5,question_num:4,type_bonus:5}]};Ve.addTemplate("/quiz/templates",e).then(function(s){"true"===s.success?(e.template_id=s.data.template_id,e.total=100,t.templateList.push(e),1===t.templateList.length&&(t.selectedTemplateId=t.templateList[0].template_id,t.updateChoosedTemplate()),t.$message({message:"添加成功！",type:"success",duration:1500})):t.$message({message:"添加失败！可能网络链接不稳定。",type:"error",duration:1500})})}},created:function(){this.getCourseInfo()}},Bs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quizAdd"},[s("div",{staticClass:"leftFrame"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isShowQuizInfo,expression:"!isShowQuizInfo"}],staticClass:"leftFrame_top"},[s("quiz-panel",{attrs:{title:"添加考试",padding:t.getMainPanelPadding,height:"522px"}},[t.isShowQuizInfo?s("div",{staticClass:"leftFrame_form"},[s("quiz-input",{attrs:{fontSize:20,hideUnderline:!0,tip:"点击此处添加考试名"},model:{value:t.quizInfo.title,callback:function(e){t.$set(t.quizInfo,"title",e)},expression:"quizInfo.title"}}),s("br"),t._v(" "),s("quiz-input",{attrs:{label:"当前课程",disabled:!0},model:{value:t.quizInfo.course,callback:function(e){t.$set(t.quizInfo,"course",e)},expression:"quizInfo.course"}}),t._v(" "),s("quiz-input",{attrs:{label:"考试班级",disabled:!0},model:{value:t.quizInfo.classes,callback:function(e){t.$set(t.quizInfo,"classes",e)},expression:"quizInfo.classes"}}),t._v(" "),s("quiz-choose",{attrs:{label:"考试类型",name:"type",dataList:t.typeSelectList,updateFuc:t.updateSelectList}}),t._v(" "),s("quiz-choose",{attrs:{label:"考试语言",name:"lang",dataList:t.langSelectList,updateFuc:t.updateSelectList}}),t._v(" "),s("quiz-choose",{attrs:{label:"考试时间",name:"time",dataList:t.timeSelectList,updateFuc:t.updateSelectList}}),t._v(" "),1===t.getSelectedItem("time")?s("quiz-input",{attrs:{label:"设置自动开考时间",type:"datetime-local"},model:{value:t.quizInfo.startTime,callback:function(e){t.$set(t.quizInfo,"startTime",e)},expression:"quizInfo.startTime"}}):t._e(),t._v(" "),s("quiz-input",{attrs:{label:"考试时长",type:"number",next:"分钟",range:[10,500]},model:{value:t.quizInfo.duration,callback:function(e){t.$set(t.quizInfo,"duration",e)},expression:"quizInfo.duration"}}),t._v(" "),s("quiz-choose",{attrs:{label:"设置提醒",name:"tips",dataList:t.tipsSelectList,updateFuc:t.updateSelectList}}),t._v(" "),1!==t.getSelectedItem("tips")?s("quiz-input",{attrs:{label:"提醒时间",type:"number",pre:"考前",next:"天",range:[0]},model:{value:t.quizInfo.remindTime,callback:function(e){t.$set(t.quizInfo,"remindTime",e)},expression:"quizInfo.remindTime"}}):t._e(),t._v(" "),s("quiz-input",{attrs:{label:"运行提前交卷时间",type:"number",next:"分钟",range:[0,t.quizInfo.duration-5]},model:{value:t.quizInfo.advance,callback:function(e){t.$set(t.quizInfo,"advance",e)},expression:"quizInfo.advance"}}),t._v(" "),s("quiz-dialog",{attrs:{title:"成功提示",closeTips:"返回个人中心",showProperty:"isShowMessage"},on:{clickHandler:t.backToList}},[s("span",[t._v("您设置的试卷已生成，感谢使用。")])])],1):t._e()])],1),t._v(" "),s("div",{staticClass:"leftFrame_bottom"},[s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"40px",theme:"BACK",width:"70px",height:"70px"},nativeOn:{click:function(e){t.requireToBack()}}}),t._v(" "),s("div",{staticClass:"leftFrame_bottom_btn"},[s("quiz-btn",{attrs:{isLoading:!t.isCanClickPreviewBtn,icon:"content-保存并预览",size:"20px",radius:"default 0 0 default",theme:"DEFAULT",width:"360px",height:"70px"},nativeOn:{click:function(e){t.toQuizPreview(!0)}}}),t._v(" "),s("quiz-btn",{attrs:{isLoading:!t.isCanClickAddBtn,icon:"content-生成试卷",size:"20px",radius:"0 default default 0",theme:"SURE",width:"360px",height:"70px",isDisabled:t.isBanToAddQuiz},nativeOn:{click:function(e){return t.addQuiz(e)}}})],1)],1)]),t._v(" "),s("div",{class:1===t.step?"rightFrame":"rightFrame rightFrame_second"},[s("quiz-panel",{attrs:{title:1===t.step?"模板选择":"范围选择",padding:t.getMainPanelPadding,height:"610px",isHidden:!1}},[s("div",{key:t.tablesKey,staticClass:"rightFrame_tables"},[t._l(t.templateList,function(e){return s("div",{key:e.template_id,staticClass:"rightFrame_table",on:{click:function(s){t.changeSelectedRange(e.template_id)}}},[s("quiz-table",{attrs:{dataObj:e,isSelected:t.selectedTemplateId===e.template_id},on:{deleteTemplate:t.deleteTemplate,updateTemplate:t.updateTemplate}})],1)}),t._v(" "),t.templateList.length<t.MAXTEMPLATE?s("div",{staticClass:"rightFrame_addTable_btn",on:{click:function(e){t.addTemplate()}}},[s("i",{staticClass:"el-icon-plus"})]):t._e()],2),t._v(" "),-1!==t.selectedTemplateId?s("div",{staticClass:"rightFrame_nextStep"},[s("div",{staticClass:"rightFrame_nextStep_main"},[s("i",{directives:[{name:"show",rawName:"v-show",value:1===t.step,expression:"step === 1"}],staticClass:"icon-shangyiti"}),t._v(" "),s("div",{staticClass:"rightFrame_nextStep_content"},[s("quiz-table",{key:t.selectedTemplateId,attrs:{dataObj:t.choosedTemplate,isSelected:!0,canBeDeled:!1},on:{updateTemplate:t.updateTemplate}}),t._v(" "),t.isShowQuizInfo?s("div",{staticClass:"rightFrame_setRange"},t._l(t.problemRange,function(e,i){return s("div",{key:i,staticClass:"rightFrame_setRange_item"},[s("div",{staticClass:"rightFrame_setRange_label"},[t.problemRange[e.type-1].problemList.length===t.choosedTemplate.question_type[e.type-1].question_num?s("i",{staticClass:"icon-success",staticStyle:{color:"#7ab441"}}):t._e(),t._v("\n                  "+t._s(t.getTypeName(e.type)))]),t._v(" "),s("div",{staticClass:"rightFrame_setRange_content",attrs:{onselectstart:"return false"},on:{dblclick:function(s){t.showRangeChoose=e.type}}},[t._l(e.rangeLabelList,function(i,a){return s("span",{key:a},[t._v("\n                    "+t._s(i)+"\n                    "),0!==e.rangeLabelList.length&&a!==e.rangeLabelList.length-1?s("span",[t._v("、")]):t._e()])}),t._v(" "),0===e.rangeLabelList.length?s("span",{staticClass:"rightFrame_setRange_tips"},[t._v("双击进入考题范围设置，默认全部")]):t._e()],2)])})):t._e()],1)]),t._v(" "),s("span",{staticClass:"rightFrame_nextStep_btn",on:{click:function(e){t.changeStep()}}},[t._v("\n          "+t._s(1===t.step?"继续设置考试范围，默认全部":"返回模板选择")+"\n        ")])]):t._e()])],1),t._v(" "),-1!=t.showRangeChoose?s("rangeChoose",{attrs:{problemType:t.showRangeChoose,needAmount:parseInt(t.choosedTemplate.question_type[t.showRangeChoose-1].question_num),rangeData:t.problemRange[t.showRangeChoose-1]},on:{back:t.backToMain}}):t._e(),t._v(" "),t.isShowQuizChoose?s("previewChoose",{attrs:{quizList:t.quizPreviewList},on:{chooseHandler:t.initPreviewData}}):t._e()],1)},staticRenderFns:[]};var js=s("VU/8")(Ms,Bs,!1,function(t){s("datP")},"data-v-021d94de",null).exports,Us={name:"preview-item",props:{No:{type:Number,default:1,request:!0},type:{type:Number,default:0,request:!0},detail:{type:Object,default:function(){return{}},request:!0},answer:{},isShowAnswer:{type:Boolean,default:!1}},data:function(){return{selfData:{},orderEngList:"ABCD"}},methods:{formatCode:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t},mapData:function(){var t=this.type.toString(),e=this,s=function(t){return t},i={1:function(){for(var t=s(e.detail.description),i=0;t.indexOf("{}")>=0;)t=e.isShowAnswer?t.replace("{}",'<span class="answerSpan">'+e.detail.answer[i++]+"</span>"):e.answer?t.replace("{}","<span> "+(e.answer[i++]||"&nbsp;")+" </span>"):t.replace("{}","<span> &nbsp; </span>");e.selfData.description=e.formatCode(t)},2:function(){e.selfData.description=e.formatCode(s(e.detail.description)),e.selfData.optionA=e.detail.optionA.replace(/<\/?.+?\/?>/g,""),e.selfData.optionB=e.detail.optionB.replace(/<\/?.+?\/?>/g,""),e.selfData.optionC=e.detail.optionC.replace(/<\/?.+?\/?>/g,""),e.selfData.optionD=e.detail.optionD.replace(/<\/?.+?\/?>/g,"")},3:function(){e.selfData.description=e.formatCode(s(e.detail.description)),e.selfData.input=e.formatCode(s(e.detail.input)),e.selfData.sample_input=e.formatCode(s(e.detail.sample_input)),e.selfData.sample_output=e.formatCode(s(e.detail.sample_output))},4:function(){e.selfData.description=e.formatCode(s(e.detail.description))}};i[t]&&i[t]()}},created:function(){this.selfData=JSON.parse(u()(this.detail)),this.mapData()},watch:{isShowAnswer:function(){this.mapData()}}},Hs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-item"},[s("div",{staticClass:"preview-item_No"},[t._v(t._s(t.No))]),t._v(" "),s("div",{staticClass:"preview-item_main"},[1===t.type?s("div",[s("p",{staticClass:"preview-item_type1_description",domProps:{innerHTML:t._s(t.selfData.description)}})]):t._e(),t._v(" "),2===t.type?s("div",[s("p",{staticClass:"preview-item_type2_description",domProps:{innerHTML:t._s(t.selfData.description)}}),t._v(" "),s("ul",{staticClass:"preview-item_type2_option"},t._l(t.orderEngList,function(e,i){return s("li",{key:i,class:{answerSpan:t.isShowAnswer&&t.selfData.answer.indexOf(e)>=0,option_defaultItem:t.answer&&!t.isShowAnswer,option_chooseCorrect:t.answer&&!t.isShowAnswer&&t.answer.indexOf(e)>=0&&t.selfData.answer.indexOf(e)>=0,option_chooseWrong:t.answer&&!t.isShowAnswer&&t.answer.indexOf(e)>=0&&t.selfData.answer.indexOf(e)<0,option_noChooseCorrect:t.answer&&!t.isShowAnswer&&t.answer.indexOf(e)<0&&t.selfData.answer.indexOf(e)>=0}},[s("b",[t._v(t._s(e)+":")]),t._v("  "),s("span",{domProps:{innerHTML:t._s(t.selfData["option"+e])}})])}))]):t._e(),t._v(" "),3===t.type?s("div",[s("div",{staticClass:"preview-item_type3_title"},[t._v(t._s(t.selfData.title))]),t._v(" "),s("div",{staticClass:"preview-item_type3_memoryAndTime"},[s("i",{staticClass:"icon-project_space"}),t._v(" 空间限制："+t._s(t.selfData.memory_limit)+"\n           \n        "),s("i",{staticClass:"icon-shijian"}),t._v(" 时间限制："+t._s(t.selfData.time_limit)+"\n      ")]),t._v(" "),s("div",{staticClass:"preview-item_type3_part"},[s("h5",[t._v("题目描述")]),t._v(" "),s("div",{staticClass:"preview-item_type3_content",domProps:{innerHTML:t._s(t.selfData.description)}})]),t._v(" "),s("div",{staticClass:"preview-item_type3_part"},[s("h5",[t._v("输入描述")]),t._v(" "),s("div",{staticClass:"preview-item_type3_content",domProps:{innerHTML:t._s(t.selfData.input)}})]),t._v(" "),s("div",{staticClass:"preview-item_type3_part"},[s("h5",[t._v("输出描述")]),t._v(" "),s("div",{staticClass:"preview-item_type3_content",domProps:{innerHTML:t._s(t.selfData.output)}})]),t._v(" "),s("div",{staticClass:"preview-item_type3_part"},[s("h5",[t._v("样本输入")]),t._v(" "),s("div",{staticClass:"preview-item_type3_content",domProps:{innerHTML:t._s(t.selfData.sample_input.replace(/\n/g,"<br>"))}})]),t._v(" "),s("div",{staticClass:"preview-item_type3_part"},[s("h5",[t._v("样本输出")]),t._v(" "),s("div",{staticClass:"preview-item_type3_content",domProps:{innerHTML:t._s(t.selfData.sample_output.replace(/\n/g,"<br>"))}})]),t._v(" "),t.answer&&!t.isShowAnswer?s("div",{staticClass:"preview-item_answerDiv"},[s("h5",{staticClass:"preview-item_answerDiv_title"},[t._v("我的作答")]),t._v(" "),s("textarea",{staticClass:"preview-item_answerDiv_content",attrs:{readonly:"readonly"},domProps:{value:t.answer}})]):t._e()]):t._e(),t._v(" "),4===t.type?s("div",[s("h3",{staticClass:"preview-item_type4_title"},[s("p",{domProps:{innerHTML:t._s(t.selfData.description)}})]),t._v(" "),t.isShowAnswer?s("div",{staticClass:"preview-item_type4_answer"},[s("span",{staticClass:"answerSpan"},[t._v("答：")]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.selfData.answer[0]?t.selfData.answer[0]:"略")}})]):t._e(),t._v(" "),t.answer&&!t.isShowAnswer?s("div",{staticClass:"preview-item_answerDiv"},[s("h5",{staticClass:"preview-item_answerDiv_title"},[t._v("我的作答")]),t._v(" "),s("textarea",{staticClass:"preview-item_answerDiv_content",attrs:{readonly:"readonly"},domProps:{value:t.answer}})]):t._e()]):t._e(),t._v(" "),5===t.type?s("div",[s("div",{staticClass:"preview-item_type5"},[s("p",{domProps:{innerHTML:t._s(t.selfData.description)}}),t._v(" "),s("span",[t._v("（  \n          "),t.answer?[t.isShowAnswer?[t.answer!==t.selfData.answer?s("span",{class:{wrongAnswer:t.answer!==t.selfData.answer}},[t._v(t._s(t.answer))]):t._e(),t._v(" "),s("span",{staticClass:"answerSpan"},[t._v(" "+t._s(t.selfData.answer))])]:[s("span",[t._v(t._s(t.answer))])]]:[t.isShowAnswer?[s("span",{staticClass:"answerSpan"},[t._v(t._s(t.selfData.answer))])]:[s("span",[t._v("  ")])]],t._v("\n          ）")],2)])]):t._e()])])},staticRenderFns:[]};var Qs={name:"quizPreview",components:{quizPanel:ds,quizBtn:fs,previewItem:s("VU/8")(Us,Hs,!1,function(t){s("zDZi")},"data-v-60267702",null).exports},data:function(){return{mode:1,isGetResultData:!1,isShowTable:!1,isShowToTopBtn:!1,isShowAnswer:!1,detailList:{},userAnswer:{},showTypes:[1,2,3,4,5],userTotal:0,typeNameList:{0:"题目",1:"填空题",2:"选择题",3:"编程题",4:"问答题",5:"判断题"},quizInfo:{}}},methods:{toTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=1,s=setInterval(function(){t>20?window.scrollTo(0,t-=20):(window.scrollTo(0,0),clearInterval(s)),e=e<20?e+=2:20},e)},back:function(){this.$router.push({path:this.$route.query.redirect})},getCNOrder:function(t){return"一二三四五六七八"[t-1]},getQuizId:function(){this.quizId=this.$route.params.id},getQuizInfo:function(){var t=this;this.isGetResultData=!1,Ve.getPreviewQuiz("/quiz/preview",this.quizId,!0).then(function(e){"true"===e.success&&(e.data.detail.map(function(t){return 1===t.type&&t.problem_info.map(function(t){return t.description=t.description.replace(/<input.+?\/>/g,"{}"),t}),t}),t.quizInfo=e.data,t.isShowTable=!0,t.setDetailList(),t.$route.params.uid&&(t.mode=2,t.initMode(t.$route.params.uid))),t.isGetResultData=!0})},initMode:function(t){var e=this;return b()(_.a.mark(function s(){var i,a,n;return _.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(1!==e.mode){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,Ve.getOneStudentAnswer("/quiz/teacher_ckeck/student_answers",{quiz_id:e.quizId,student_id:t});case 4:if("false"!==(i=s.sent).success){s.next=7;break}return s.abrupt("return");case 7:a=[],n=0,e.quizInfo.detail.forEach(function(t){var e=i.data.detail[t.type-1].problem_info,s={type:t.type,problem_info:[]};t.problem_info.forEach(function(t){var i={problem_id:t.problem_id,student_answer:[],score:0};e.forEach(function(t){t.problem_id===i.problem_id&&(i.student_answer=t.student_answer,i.score=t.score,n+=i.score)}),s.problem_info.push(i)}),a.push(s)}),e.userAnswer=a,e.userTotal=n;case 12:case"end":return s.stop()}},s,e)}))()},setDetailList:function(){var t={};this.quizInfo.detail&&(this.quizInfo.detail.forEach(function(e){t[e.type]=e}),this.detailList=t)},operShowType:function(t){var e=this.showTypes.indexOf(t);e>=0?this.showTypes.splice(e,1):this.showTypes.push(t)},scrollToTop:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,e=window.outerHeight;this.isShowToTopBtn=t>e/2}},mounted:function(){window.addEventListener("scroll",this.scrollToTop)},created:function(){this.$route.query.redirect||this.$router.push({path:"/personal-center/1"}),this.getQuizId(),this.getQuizInfo()},destroyed:function(){window.removeEventListener("scroll",this.scrollToTop)}},Vs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quizPreview"},[t.isGetResultData?[s("quiz-panel",{attrs:{title:1===t.mode?"考试预览":"考试结果页",padding:"10px 15px",height:"[80vh, auto]"}},[s("h3",{staticClass:"quizPreview_title"},[t._v(t._s(t.quizInfo.title)),2===t.mode?s("span",[t._v(" · 我的答题卷")]):t._e()]),t._v(" "),t.isShowTable?s("table",{staticClass:"quizPreview_table",attrs:{cellspacing:"0"}},[s("tr",[s("th",[t._v("题目类型")]),t._v(" "),t._l(t.quizInfo.detail,function(e){return s("th",{key:e.type,class:{quizPreview_tr_selected:t.showTypes.indexOf(e.type)>=0},on:{click:function(s){t.operShowType(e.type)}}},[t._v(t._s(t.typeNameList[e.type]))])}),t._v(" "),s("th",[t._v(t._s(1===t.mode?"总分值":"我的总分"))])],2),t._v(" "),s("tr",[s("td",[t._v("分值 / 题")]),t._v(" "),t._l(t.quizInfo.detail,function(e){return s("td",{key:e.type},[t._v(t._s(e.value)+"分")])}),t._v(" "),s("td",{staticStyle:{"font-size":"18px"},attrs:{rowspan:1===t.mode?2:3}},[1===t.mode?s("span",[t._v(t._s(t.quizInfo.total))]):t._e(),t._v(" "),2===t.mode?s("span",[t._v(t._s(t.userTotal))]):t._e(),t._v(" 分\n          ")])],2),t._v(" "),s("tr",[s("td",[t._v("题数")]),t._v(" "),t._l(t.quizInfo.detail,function(e){return s("td",{key:e.type},[t._v(t._s(e.amount)+"道")])})],2),t._v(" "),2===t.mode?s("tr",[s("td",[t._v("得分")]),t._v(" "),t._l(t.userAnswer,function(e){return s("td",{key:e.type},[t._v("\n            "+t._s(e.problem_info.reduce(function(t,e){return t+e.score},0))+"分")])})],2):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"quizPreview_problemDetail"},t._l(t.detailList,function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showTypes.indexOf(e.type)>=0,expression:"showTypes.indexOf(item.type)>=0"}],key:e.type,staticClass:"quizPreview_problemDetail_item"},[s("h5",{staticClass:"quizPreview_problemDetail_title"},[t._v(t._s(t.getCNOrder(i))+"、"+t._s(t.typeNameList[e.type])+"："+t._s(e.amount*e.value)+"分\n            （共"+t._s(e.amount)+"题，每题"+t._s(e.value)+"分）"),3===e.type&&t.isShowAnswer?s("span",{staticStyle:{color:"#e03232","font-size":"10px"}},[t._v("* 答案略")]):t._e()]),t._v(" "),t._l(e.problem_info,function(i,a){return s("div",{key:a,staticClass:"quizPreview_problemDetail_container"},[1===t.mode||2===t.mode&&t.userAnswer[e.type-1]?[s("preview-item",{attrs:{type:e.type,No:a+1,detail:i,answer:2===t.mode?1===e.type||2===e.type?t.userAnswer[e.type-1].problem_info[a].student_answer:5===e.type?0===t.userAnswer[e.type-1].problem_info[a].student_answer.length?"":t.userAnswer[e.type-1].problem_info[a].student_answer:t.userAnswer[e.type-1].problem_info[a].student_answer instanceof Array?"":t.userAnswer[e.type-1].problem_info[a].student_answer:null,isShowAnswer:t.isShowAnswer}}),t._v(" "),2===t.mode?s("div",{staticClass:"quizPreview_score"},[s("span",{class:{"score-full":t.userAnswer[e.type-1].problem_info[a].score===e.value,"score-part":t.userAnswer[e.type-1].problem_info[a].score<e.value,"score-even":0===t.userAnswer[e.type-1].problem_info[a].score}},[t._v("\n              "+t._s(t.userAnswer[e.type-1].problem_info[a].score)+"分")])]):t._e()]:t._e()],2)})],2)}))]),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("div",{staticClass:"quizPreview_fixedRight"},[s("div",{staticClass:"quizPreview_btns",attrs:{onselectstart:"return false"}},[s("quiz-btn",{attrs:{icon:"content-显示<br>答案",size:"12px",radius:"default",theme:t.isShowAnswer?"DEFAULT":"FORBID",width:"45px",height:"45px"},nativeOn:{click:function(e){t.isShowAnswer=!t.isShowAnswer}}}),t._v(" "),t.isShowToTopBtn?s("quiz-btn",{attrs:{icon:"icon-zuiding",size:"30px",radius:"default",theme:"BLACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.toTop()}}}):t._e(),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"20px",radius:"default",theme:"BACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.back()}}})],1)])])]:t._e()],2)},staticRenderFns:[]};var Ws=s("VU/8")(Qs,Vs,!1,function(t){s("zok1")},"data-v-5a7ff6a8",null).exports,Js=s("pFYg"),Ks=s.n(Js),Gs={props:{initTime:{type:String,default:(new Date).toString(),request:!0},duration:{type:Number,default:0,request:!0},advance:{type:Number,default:0,request:!0},isBeginTimer:{type:Boolean,default:!1}},name:"quiz-timer",computed:{getFormatTime:function(){return this.isFirstBegin?this.formatTime(this.atTimer):this.formatTime(Math.abs(this.atTimer)-60*this.duration*1e3)}},data:function(){return{beginTime:"",atTimer:0,timer:null,isFirstBegin:!1,ishadTip:!1,isEnd:!1}},methods:{enterTimerHandler:function(){this.$emit("enterTimerHandler")},notBeginTimerHandler:function(){this.$emit("notBeginTimerHandler")},duringTimerHandler:function(){this.$emit("duringTimerHandler",this.atTimer)},endTimerHander:function(){this.$emit("endTimerHander")},tipsTimerHander:function(){this.$emit("tipsTimerHander",this.atTimer)},initHadFinishHandler:function(){this.$emit("initHadFinishHandler")},startTimer:function(){var t=this;if(!this.timer){var e=new Date,s=e;this.timer=setInterval(function(){e.setTime(e.getTime()+1e3),s=60*t.duration*1e3+t.beginTime-e.getTime(),t.beginTime-e.getTime()>0?t.notBeginTimerHandler():t.isFirstBegin||(t.enterTimerHandler(),t.isFirstBegin=!0),!t.ishadTip&&s<60*t.advance*1e3&&(t.tipsTimerHander(),t.ishadTip=!0),s<0?(t.endTimerHander(),t.endTimer()):(t.atTimer=s,t.duringTimerHandler())},1e3)}},endTimer:function(){this.timer&&(clearInterval(this.timer),this.isEnd=!0)},formatTime:function(t){if(t<=0)return"";var e=t,s="",i="";return s+=0===(i=parseInt(e/864e5))?"":i+"天",e%=864e5,s+=0===(i=parseInt(e/36e5))?"":i+"小时",e%=36e5,s+=0===(i=parseInt(e/6e4))?"":i+"分钟",e%=6e4,s+=parseInt(e/1e3)+"秒"}},created:function(){if("-1"!==this.initTime){var t=new Date;if(this.beginTime=new Date(this.initTime).getTime(),this.atTimer=60*this.duration*1e3+this.beginTime-t.getTime(),this.atTimer<=0)return this.isEnd=!0,void this.initHadFinishHandler();this.isBeginTimer?this.startTimer():this.endTimer()}},destroyed:function(){clearInterval(this.timer)},watch:{isBeginTimer:function(){this.isBeginTimer?this.startTimer():this.endTimer()}}},Ys={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"quiz-timer"},[this.isEnd?this._e():[this._v(this._s(this.getFormatTime))]],2)},staticRenderFns:[]};var Xs=s("VU/8")(Gs,Ys,!1,function(t){s("jFd5")},"data-v-725cf5da",null).exports,Zs={name:"quizStart",components:{quizPanel:ds,quizBtn:fs,quizInput:_s,quizTimer:Xs},data:function(){return{isFull:!1,isEnd:!1,isSubmitting:!1,isTiping:!1,isSaving:!1,isShowTimer:!1,isBeginTimer:!1,isOpenAnswer:!1,isMarking:!1,step:1,quizId:-1,quizInfo:{},quizStartTips:null,quizEndTips:null,orderList:"一二三四五",problemType:{1:"填空题",2:"选择题",3:"编程题",4:"问答题",5:"判断题"},curType:1,curProblemNo:1,endTimer:5,timeout:null,saveProblemList:[],status:["Waiting...","Waiting...","Compiling...","Running","Accept","Presenting Error","Wrong Answer","Time Limit Exceed","Memory Limit Exceed","Output Limit Exceed","Runtime Error","Compile Error"],screenType:""}},computed:{getHeaderStyle:function(){return{top:this.isFull?"0px":"60px"}},getContainerStyle:function(){return{paddingTop:this.isFull?"0px":"50px"}},getSameHeight:function(){return{minHeight:this.isFull?"calc(100vh - 170px)":"calc(100vh - 220px)"}},isCurMark:function(){return this.quizInfo.detail[this.curType-1].problem_info[this.curProblemNo-1].isMark},isCanClick:function(){return 1===this.quizInfo.status||3===this.quizInfo.status},getTimeStatus:function(){return"-1"!==this.quizInfo.start_time?{0:"离考试开始还剩：",1:"离考试结束还剩：",2:"考试已结束，等待教师批阅。",3:"考试已结束，成绩已公布。"}[this.quizInfo.status]:"等待教师手动开启"},getMainPanelPadding:function(){return"10px 10px"}},methods:l()({},Object(ht.c)(["TOGGLE_HEADER"]),{changeCurStep:function(t){2===t?(this.isOpenStudentList=!1,this.operScreen(!0)):this.operScreen(!1),this.step=t},operScreen:function(t){if(this.isFull!==t)if(t){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},getResultStyle:function(t){return 0===t||1===t?"#8ecc45":2===t?"#888":3===t?"#888":4===t?"#8ecc45":5===t?"#f577d0":6===t?"#d43039":7===t?"#6495ed":8===t?"#6495ed":9===t?"#284cad":10===t?"#ff6c3f":"#843f10"},toQuizList:function(){this.$router.push({name:"PersonalCenter",params:{isShow:4}}),this.operScreen(!1)},advanceSubmit:function(){var t=this;this.$confirm("提前交卷后不可再进入考试，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"我觉得需要再检查一会",type:"warning"}).then(function(){t.endTimerHandler(!0)})},endTimerHandler:function(){this.saveAnswerData(!0)},tipsTimerHandler:function(t){this.isTiping=!0},preProblem:function(){if(this.curProblemNo<=1){for(var t=this.curType-1;t-1>=0;t--)if(0!==this.quizInfo.detail[t-1].problem_info.length)return this.curType=t,void(this.curProblemNo=this.quizInfo.detail[this.curType-1].problem_info.length)}else this.curProblemNo=this.curProblemNo-1},nextProblem:function(){var t=this.quizInfo.detail[this.curType-1].problem_info;if(this.curProblemNo>=t.length){for(var e=this.curType+1;e-1<this.quizInfo.detail.length;e++)if(0!==this.quizInfo.detail[e-1].problem_info.length)return this.curType=e,void(this.curProblemNo=1)}else this.curProblemNo=this.curProblemNo+1},markProblem:function(){if(!this.isMarking){var t=this,e=this.quizInfo.detail[this.curType-1].problem_info[this.curProblemNo-1];this.isMarking=!0;var s=null;e.isMark?Ve.cancelMarkProblem("/quiz/ismark",{quiz_id:this.quizId,problem_id:e.problem_id,item_id:this.curProblemNo}).then(function(i){"true"===i.success&&(e.isMark=!1,s=setTimeout(function(){t.isMarking=!1,clearTimeout(s)},100))}):Ve.markProblem("/quiz/ismark",{quiz_id:this.quizId,problem_id:e.problem_id,item_id:this.curProblemNo}).then(function(i){"true"===i.success&&(e.isMark=!0,s=setTimeout(function(){t.isMarking=!1,clearTimeout(s)},100))})}},doAnswer:function(t){var e=this.quizInfo.detail[this.curType-1].problem_info[this.curProblemNo-1],s=e.student_answer.indexOf(t);({2:function(){s>=0?e.student_answer.splice(s,1):e.isMulti?e.student_answer.push(t):(e.student_answer.pop(),e.student_answer.push(t))},5:function(){e.student_answer=e.student_answer===t?"":t}})[this.curType]()},toDetail:function(t,e){this.curType=t,this.curProblemNo=e},ifAnswer:function(t){return"object"===(void 0===t?"undefined":Ks()(t))?!(t instanceof Array)||0!==t.length&&t.some(function(t){return t.replace(/\s+/g,"")}):t.replace(/^ +&/g,"")},getQuizTips:function(){this.quizStartTips=["考试开始后，计时不停止，考试过程中异常退出答题界面，可在时间结束前重新进入继续作答。","考试过程中如出现断电、断网等突发情况导致窗口关闭，网络中断前的答题内容会自动保存，但不排除部分丢失的情况。","考试期间请勿交流考试相关内容，一经发现，取消该次考试成绩。","考试期间请勿浏览其他页面网页，所有非考试操作将视为作弊行为，一经发现，取消该次考试成绩。","结束后请各位考生务必等待系统提示“考试数据成功上传”后才关闭浏览器，否则将视为异常离考状态，考试数据将不做效。","结束后，考生需要等待教师评阅，在成绩公布后如需要查看成绩等信息可常到个人中心下的考试列表中点击“考试详情”查看。","再次提醒，考试结束后系统会自动保存并提交，但小几率会出现网络不良的情况，因此建议各位考生一定要在等待系统提示“考试数据成功上传”后方才离开考场。如若长时间没有看到该提示，可以手动点击保存答题数据按钮。",0===this.quizInfo.advance?"本次考试不允许提前交卷。":"本次考试允许在考试结束前"+this.quizInfo.advance+"分钟内提前交卷。"],this.quizEndTips=["考试结束后，系统自动保存并提交。","考试结束并等待结果公布后，考生可在考试列表页中找到并进入该考试的数据详情页，其中包含本次考试的成绩排行榜以及相关的考试信息。","考试结束并等待结果公布后，考生可查看自己的答题结果，结果页中包含本次考试的正确答案（不包含编程题），同时考生可以在结果页中查看自己的错题并添加进自己的错题集中。不仅如此，更可以在结果页下与其他同学一同讨论解疑。"]},getQuizId:function(){this.quizId=this.$route.params.id},getStudentAnswer:function(){var t=this;Ve.getStudentAnswer("/quiz/detail",this.quizId).then(function(e){e.data.detail.forEach(function(e){var s=t.quizInfo.detail[e.type-1].problem_info.find(function(t){return t.problem_id===e.problem_info.problem_id});s&&(s.student_answer=e.problem_info.student_answer,s.isMark=1===e.problem_info.isMark)})})},getQuizData:function(){var t=this;this.isShowTimer=!1,this.isBeginTimer=!1,Ve.getQuizInfo("/quiz/preview",this.quizId,!1).then(function(e){e.data.start_time=e.data.start_time.replace("T"," "),e.data.detail=e.data.detail.map(function(t){return t.problem_info=t.problem_info.map(function(e){return 1===t.type&&(e.description=e.description.replace(/<input.+?\/>/g,"{}")),2===t.type&&(e.description=e.description.replace(/<input.+?\/>/g,"{}"),e.optionA=e.optionA.replace(/<\/?.+?\/?>/g,""),e.optionB=e.optionB.replace(/<\/?.+?\/?>/g,""),e.optionC=e.optionC.replace(/<\/?.+?\/?>/g,""),e.optionD=e.optionD.replace(/<\/?.+?\/?>/g,"")),3===t.type&&(e.result=-1),e.student_answer=[],e.isMark=!1,e}),t}),t.quizInfo=e.data,t.isShowTimer=!0,t.isBeginTimer=!0,t.getQuizInitProblemType(),t.getQuizTips(),t.getStudentAnswer()})},getQuizInitProblemType:function(){for(var t=0;t<=4;t++)if(0!==this.quizInfo.detail[t].problem_info.length)return void(this.curType=this.quizInfo.detail[t].type)},debounce:function(t,e){this.isSaving=!0;var s=this.quizInfo.detail[this.curType-1].problem_info[this.curProblemNo-1];this.saveProblemList=null===this.timeout?[]:this.saveProblemList.filter(function(t){return t.problem_id!==s.problem_id});var i=[];if(1===this.curType){for(var a=0;a<s.student_answer.length;a++){var n=s.student_answer[a];i.push(null==n?"":a.toString())}0===s.student_answer.length&&i.push("")}this.saveProblemList.push({problem_id:s.problem_id,item_id:this.curProblemNo,type:this.curType,answer:1===this.curType?i:s.student_answer}),null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(t,e)},saveAnswerData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ve.saveStudentAnswer("/quiz/detail",{quiz_id:this.quizId,answer_list:this.saveProblemList},e?1:0).then(function(s){if("false"!==s.success){if(e){t.isEnd=e,t.isTiping=!1,t.isShowTimer=!1,t.quizInfo.status=2,t.changeCurStep(3);var i=setInterval(function(){0===t.endTimer&&(t.toQuizList(),clearInterval(i)),t.endTimer--},1e3)}}else t.$message({message:"答案数据自动保存失败，请稍后手动保存！",type:"warning",showClose:!0,duration:1500})}).finally(function(){t.isSaving=!1,t.timeout=null})},sumbitCode:function(t){var e=this,s=this.quizInfo.detail[this.curType-1].problem_info[this.curProblemNo-1];if(""!==s.student_answer&&null!=s.student_answer&&0!==s.student_answer.length)if(this.isSubmitting)this.$message.warning("仍在判题中，勿重复操作！");else{var i={problem_id:t,protype:3,source:s.student_answer,language:this.quizInfo.language};this.isSubmitting=!0,Ve.postAnswer("/problems/submit",i).then(function(){Ve.getQuestionResult("/problems/submit",t).then(function(t){s.result=t.data.result,e.isSubmitting=!1})})}else this.$message.warning("答案不能为空！")},srceenChangeHandler:function(){this.isFull=document.fullscreen,this.TOGGLE_HEADER(!document.fullscreen)}}),mounted:function(){var t=document.documentElement;t.requestFullscreen?this.screenType="fullscreenchange":t.mozRequestFullScreen?this.screenType="mozfullscreenchange":t.webkitRequestFullScreen?this.screenType="webkitfullscreenchange":t.msRequestFullscreen&&(this.screenType="msfullscreenchange"),this.screenType&&document.addEventListener(this.screenType,this.srceenChangeHandler)},created:function(){this.getQuizId(),this.getQuizData()},watch:{quizInfo:{deep:!0,handler:function(){this.isMarking||2!==this.step||this.debounce(this.saveAnswerData,1e3)}}},destroyed:function(){this.screenType&&document.removeEventListener(this.screenType,this.srceenChangeHandler)}},ti={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"mainContainer",staticClass:"quizStart"},[s("div",{staticClass:"quizStart_header",style:t.getHeaderStyle},[s("h3",{staticClass:"quizStart_header_title"},[t._v(t._s(t.quizInfo.title))]),t._v(" "),s("div",{staticClass:"quizStart_header_rightFlame"},[s("span",{staticClass:"quizStart_rightFlame_status"},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.isTiping,expression:"isTiping"}],staticClass:"quizStart_icon-tip icon-tixing"}),t._v(t._s(t.getTimeStatus))]),t._v(" "),t.isShowTimer?s("quiz-timer",{staticClass:"quizStart_rightFlame_time",attrs:{initTime:t.quizInfo.start_time,duration:t.quizInfo.duration,advance:t.quizInfo.advance,isBeginTimer:t.isBeginTimer},on:{notBeginTimerHandler:function(e){t.quizInfo.status=0},enterTimerHandler:function(e){t.quizInfo.status=1},endTimerHander:t.endTimerHandler,tipsTimerHander:t.tipsTimerHandler}}):t._e(),t._v(" "),2===t.step&&t.isTiping?s("span",{staticClass:"quizStart_rightFlame_btn",on:{click:function(e){t.advanceSubmit()}}},[t._v("提前交卷")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"quizStart_container",style:t.getContainerStyle},[1===t.step?[s("div",{staticClass:"quizStart_step1"},[s("quiz-panel",{attrs:{padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizStart_step1_container",style:t.getSameHeight},[s("h4",[t._v("考前须知")]),t._v(" "),s("div",{staticClass:"quizStart_step1_content"},t._l(t.quizStartTips,function(e,i){return s("p",{key:i},[t._v(t._s(i+1)+". "+t._s(e))])})),t._v(" "),s("div",{class:{quizStart_step1_btns:!0,quizStart_step1_btns_canClick:t.isCanClick}},[0===t.quizInfo.status?s("span",[t._v("等待开考")]):t._e(),t._v(" "),1===t.quizInfo.status?s("span",{on:{click:function(e){t.changeCurStep(2)}}},[t._v("进入考试")]):t._e(),t._v(" "),2===t.quizInfo.status?s("span",[t._v("正在批阅")]):t._e(),t._v(" "),3===t.quizInfo.status?s("span",{on:{click:function(e){t.toQuizList()}}},[t._v("查看成绩")]):t._e()])])])],1)]:2===t.step?[s("div",{staticClass:"quizStart_step2"},[s("div",{staticClass:"quizStart_step2_menu"},[s("quiz-panel",{attrs:{title:"答题进度",padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizStart_step2_menu_container",style:t.getSameHeight},t._l(t.quizInfo.detail,function(e,i){return s("div",{key:e.type,staticClass:"quizStart_step2_menuItem"},[s("h5",{staticClass:"label"},[t._v("\n                  "+t._s(t.orderList[i])+"、"+t._s(t.problemType[e.type])+" (共 "+t._s(e.problem_info.length)+" 题)\n                ")]),t._v(" "),s("div",{staticClass:"problemBtns"},t._l(e.problem_info,function(i,a){return s("span",{key:i.problem_id,class:{isAnswered:t.ifAnswer(i.student_answer),isAnswer_beMarked:t.ifAnswer(i.student_answer)&&i.isMark,noAnswer_beMarked:!t.ifAnswer(i.student_answer)&&i.isMark},on:{click:function(s){t.toDetail(e.type,a+1)}}},[t._v(t._s(a+1))])}))])}))])],1),t._v(" "),s("div",{staticClass:"quizStart_step2_detail"},[s("quiz-panel",{attrs:{title:"题目详情",padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizStart_step2_detail_container",style:t.getSameHeight},t._l(t.quizInfo.detail[t.curType-1].problem_info,function(e,i){return s("div",{key:e.problem_id},[t.curProblemNo===i+1?[s("h5",{staticClass:"label"},[t._v("\n                    "+t._s(t.problemType[t.curType])+" \n                    "+t._s(t.curProblemNo)+" \n                    ( "+t._s(t.quizInfo.detail[t.curType-1].value)+" 分)\n                  ")]),t._v(" "),s("div",{staticClass:"problemDetail"},[1===t.curType?s("div",{staticClass:"problemDetail_type1"},[s("div",{staticClass:"problemDetail_title",attrs:{onselectstart:"return false"}},t._l(e.description.split("{}"),function(i,a){return s("span",{key:a},[s("span",[t._v(t._s(i))]),t._v(" "),a!==e.description.split("{}").length-1?s("span",[s("quiz-input",{attrs:{lineHeight:"2",hideUnderline:!0,openAnimation:!1},model:{value:t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer[a],callback:function(e){t.$set(t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer,a,e)},expression:"quizInfo.detail[curType-1].problem_info[curProblemNo-1].student_answer[idx]"}})],1):t._e()])}))]):2===t.curType?s("div",{staticClass:"problemDetail_type2"},[s("div",{staticClass:"problemDetail_title",attrs:{onselectstart:"return false"}},[s("span",[t._v("( "+t._s(e.isMulti?"多选题":"单选题")+" )")]),t._v(" "),t._l(e.description.split("{}"),function(i,a){return s("span",{key:a},[s("span",{domProps:{innerHTML:t._s(i)}}),t._v(" "),a!==e.description.split("{}").length-1?s("span",[t._v("________")]):t._e()])})],2),t._v(" "),s("ul",{staticClass:"chooseList"},[s("li",{class:e.student_answer.indexOf("A")>=0?"beChoosed":"",on:{click:function(e){t.doAnswer("A")}}},[s("b",[t._v("A:")]),t._v("  "+t._s(e.optionA))]),t._v(" "),s("li",{class:e.student_answer.indexOf("B")>=0?"beChoosed":"",on:{click:function(e){t.doAnswer("B")}}},[s("b",[t._v("B:")]),t._v("  "+t._s(e.optionB))]),t._v(" "),s("li",{class:e.student_answer.indexOf("C")>=0?"beChoosed":"",on:{click:function(e){t.doAnswer("C")}}},[s("b",[t._v("C:")]),t._v("  "+t._s(e.optionC))]),t._v(" "),s("li",{class:e.student_answer.indexOf("D")>=0?"beChoosed":"",on:{click:function(e){t.doAnswer("D")}}},[s("b",[t._v("D:")]),t._v("  "+t._s(e.optionD))])])]):3===t.curType?s("div",{staticClass:"problemDetail_type3"},[s("h5",{staticClass:"type3_title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"type3_limit",attrs:{onselectstart:"return false;"}},[s("span",[s("i",{staticClass:"icon-project_space"}),t._v(" 空间限制："+t._s(e.memory_limit))]),t._v(" "),s("span",[s("i",{staticClass:"icon-shijian"}),t._v(" 时间限制："+t._s(e.time_limit))]),t._v(" "),t.isOpenAnswer?s("span",{staticClass:"type3_btn_submit",on:{click:function(s){t.sumbitCode(e.problem_id)}}},[t._v("提交")]):t._e(),t._v(" "),s("span",{class:{type3_btn:!0,type3_open_btn:t.isOpenAnswer},on:{click:function(e){t.isOpenAnswer=!t.isOpenAnswer}}},[t.isOpenAnswer?[t._v("返回")]:t._e(),t._v(" "),t.isOpenAnswer?t._e():[t._v("答题")]],2)]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("题目描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("输入描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.input)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("输出描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.output)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("样本输入")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.sample_input.replace(/\n/g,"<br>"))}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("样本输出")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.sample_output.replace(/\n/g,"<br>"))}})]),t._v(" "),s("div",{class:{type3_Answer:!0,type3_Answer_open:t.isOpenAnswer}},[s("div",{staticClass:"type3_Answer_header"},[s("span",[t._v("答题代码")])]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer,expression:"quizInfo.detail[curType-1].problem_info[curProblemNo-1].student_answer"}],domProps:{value:t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer},on:{input:function(e){e.target.composing||t.$set(t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1],"student_answer",e.target.value)}}}),t._v(" "),t.isSubmitting?s("span",{staticClass:"type3_Answer_result",style:{color:t.getResultStyle(0)}},[t._v("正在判题中...")]):t._e(),t._v(" "),t.isSubmitting||-1===t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].result?t._e():s("span",{staticClass:"type3_Answer_result",style:{color:t.getResultStyle(t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].result)}},[t._v("\n                            "+t._s(t.status[t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].result]))])])]):4===t.curType?s("div",{staticClass:"problemDetail_type4"},[s("div",{staticClass:"problemDetail_title",attrs:{onselectstart:"return false"}},[s("span",{domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),s("div",{staticClass:"problemDetail_input"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.ifAnswer(t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer),expression:"!ifAnswer (quizInfo.detail[curType-1].problem_info[curProblemNo-1].student_answer)"}],staticClass:"doubleClickToInput",attrs:{onselectstart:"return false;"},on:{dblclick:function(e){t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer="答："}}},[t._v("双击此处输入您的答案")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer,expression:"quizInfo.detail[curType-1].problem_info[curProblemNo-1].student_answer"}],domProps:{value:t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1].student_answer},on:{input:function(e){e.target.composing||t.$set(t.quizInfo.detail[t.curType-1].problem_info[t.curProblemNo-1],"student_answer",e.target.value)}}})])]):s("div",{staticClass:"problemDetail_type5"},[s("div",{staticClass:"problemDetail_title",attrs:{onselectstart:"return false"}},[s("span",{domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),s("ul",{staticClass:"chooseList"},[s("li",{class:"T"===e.student_answer?"beChoosed":"",on:{click:function(e){t.doAnswer("T")}}},[s("b",[t._v("正确")])]),t._v(" "),s("li",{class:"F"===e.student_answer?"beChoosed":"",on:{click:function(e){t.doAnswer("F")}}},[s("b",[t._v("错误")])])])])])]:t._e()],2)}))])],1)])]:[s("div",{staticClass:"quizStart_step3"},[s("quiz-panel",{attrs:{padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizStart_step3_container",style:t.getSameHeight},[s("h4",[t._v("考后提醒")]),t._v(" "),s("div",{staticClass:"quizStart_step3_content"},t._l(t.quizEndTips,function(e,i){return s("p",{key:i},[t._v(t._s(i+1)+". "+t._s(e))])})),t._v(" "),s("div",{staticClass:"quizStart_step3_btns"},[s("span",[t._v("提交成功")])])])])],1)],t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("div",{staticStyle:{position:"absolute",display:"inline-block"}},[s("div",{staticClass:"quizStart_rightBtns"},[2!==t.step?s("quiz-btn",{attrs:{icon:"icon-shuaxin2",size:"20px",radius:"default",width:"45px",height:"45px"},nativeOn:{click:function(e){t.getQuizData()}}}):t._e(),t._v(" "),2===t.step?[s("quiz-btn",{attrs:{icon:"content-考前<br>须知",size:"12px",radius:"default",theme:"FORBID",width:"45px",height:"45px"},nativeOn:{click:function(e){t.changeCurStep(1)}}}),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-shangyiti",size:"20px",radius:"default",width:"45px",height:"45px"},nativeOn:{click:function(e){t.preProblem()}}}),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-xiayiti",size:"20px",radius:"default",width:"45px",height:"45px"},nativeOn:{click:function(e){t.nextProblem()}}}),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-biaoji1",size:"20px",radius:"default",theme:t.isCurMark?"CHOOSE":"FORBID",width:"45px",height:"45px"},nativeOn:{click:function(e){t.markProblem()}}}),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-baocun",size:"20px",radius:"default",theme:"SURE",width:"45px",height:"45px"},nativeOn:{click:function(e){t.debounce(t.saveAnswerData,500)}}})]:t._e(),t._v(" "),3===t.step?s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"20px",radius:"default",theme:"BACK",width:"45px",height:"45px"}}):t._e()],2)])]),t._v(" "),2===t.step&&t.isSaving?s("span",{staticClass:"quizStart_saveTip"},[t._v("保存答案中")]):t._e()],2),t._v(" "),t.step>1&&t.isEnd?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isEnd,expression:"isEnd"}],staticClass:"quizStart_examEnd",attrs:{"element-loading-text":"正在保存考试数据并在 "+t.endTimer+" 秒后返回个人中心页","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}}):t._e()])},staticRenderFns:[]};var ei=s("VU/8")(Zs,ti,!1,function(t){s("mX6V")},"data-v-14ac46f9",null).exports,si={name:"quizCheck",components:{quizPanel:ds,quizBtn:fs,quizInput:_s},data:function(){return{isShowTips:!1,isMorning:!0,isShowTitle:-1,isOpenStudentList:!1,step:1,quizId:-1,quizInfo:{},userAnswer:{},student_list:[],currentNo:-1,changeDate:(new Date).getTime(),quizCheckStartTips:[],curType:1,curProblemNo:-1,orderList:"一二三四五",orderEngList:"ABCD",problemType:{1:"填空题",2:"选择题",3:"编程题",4:"问答题",5:"判断题"},status:["Waiting...","Waiting...","Compiling...","Running","Accept","Presenting Error","Wrong Answer","Time Limit Exceed","Memory Limit Exceed","Output Limit Exceed","Runtime Error","Compile Error","正在判题中..."]}},computed:{getMainPanelPadding:function(){return"10px 10px"},getNotCorrected:function(){return this.student_list.reduce(function(t,e){return t+(e.isCorrected?0:1)},0)}},methods:{changeCurStep:function(t){2===t&&(this.isOpenStudentList=!1),this.step=t},changeCurStudent:function(t){this.currentNo>=this.student_list.length||(this.student_list[this.currentNo].isAttended||this.student_list[this.currentNo].isCorrected?this.getNextStudentData(t):this.saveCheckData(t))},backToList:function(){this.$router.push({name:"PersonalCenter",params:{isShow:4}})},initData:function(){this.isShowTitle=-1,this.curType=1,this.curProblemNo=-1},getResultStyle:function(t){return 0===t||1===t||12===t?"#8ecc45":2===t?"#888":3===t?"#888":4===t?"#8ecc45":5===t?"#f577d0":6===t?"#d43039":7===t?"#6495ed":8===t?"#6495ed":9===t?"#284cad":10===t?"#ff6c3f":"#843f10"},getQuizId:function(){this.quizId=this.$route.params.id},getQuizData:function(){var t=this;Ve.getQuizInfo("/quiz/preview",this.quizId,!0).then(function(e){e.data.start_time=e.data.start_time.replace("T"," "),e.data.detail=e.data.detail.map(function(t){return t.problem_info=t.problem_info.map(function(e){return 1===t.type&&(e.description=e.description.replace(/<input.+?\/>/g,"{}")),2===t.type&&(e.description=e.description.replace(/<input.+?\/>/g,"{}"),e.optionA=e.optionA.replace(/<\/?.+?\/?>/g,""),e.optionB=e.optionB.replace(/<\/?.+?\/?>/g,""),e.optionC=e.optionC.replace(/<\/?.+?\/?>/g,""),e.optionD=e.optionD.replace(/<\/?.+?\/?>/g,"")),e}),t}),t.quizInfo=e.data,t.isShowTips=!0,t.getCheckTips(),t.getStudentList()})},isFilledAnswer:function(t){for(var e=0;e<this.userAnswer.length;e++){for(var s={type:this.userAnswer[e].type,problem_info:[]},i=0;i<this.userAnswer[e].problem_info.length;i++){var a=this.userAnswer[e].problem_info[i];if(""===a.score)return!1;s.problem_info.push({problem_id:a.problem_id,score:+a.score})}t.push(s)}return!0},saveCheckData:function(t){var e=this;return b()(_.a.mark(function s(){var i;return _.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(e.currentNo<e.student_list.length)){s.next=14;break}if(i=[],e.isFilledAnswer(i)){s.next=6;break}return e.changeCurStep(2),e.$message({message:"您未完全为该考生评分，不允许保存现有评分！",type:"warning",duration:1500}),s.abrupt("return");case 6:return s.next=8,Ve.saveCheckData("/quiz/teacher_ckeck/teacher_grade",{quiz_id:parseInt(e.quizId),user_id:e.student_list[e.currentNo].user_id,result:i});case 8:if("false"!==s.sent.success){s.next=12;break}return e.$message({message:"保存数据失败，请重新尝试！",type:"warning",duration:1500}),s.abrupt("return");case 12:e.$message({message:e.currentNo+1+"号考卷保存批改数据成功！",type:"success",duration:1500}),e.student_list[e.currentNo].isCorrected=!0;case 14:t>=0?e.getNextStudentData(t):e.changeCurStep(1);case 15:case"end":return s.stop()}},s,e)}))()},getNextStudentData:function(t){this.currentNo=t,this.getStudentAnswer(),this.initData()},announceGrade:function(){var t=this;return b()(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.announceGradeData("/quiz/teacher_ckeck/announce_results",t.quizId);case 2:"true"===e.sent.success?(t.$message({message:"公布成绩成功！",type:"success",duration:1500}),t.quizInfo.status=3):t.$message({message:"公布成绩失败，请稍后再试！",type:"error",duration:1500});case 4:case"end":return e.stop()}},e,t)}))()},getStudentAnswer:function(){var t=this;return b()(_.a.mark(function e(){var s,i;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.currentNo>=t.student_list.length)){e.next=3;break}return t.changeCurStep(1),e.abrupt("return");case 3:return e.next=5,Ve.getOneStudentAnswer("/quiz/teacher_ckeck/student_answers",{quiz_id:t.quizId,student_id:t.student_list[t.currentNo].user_id});case 5:if("false"!==(s=e.sent).success){e.next=8;break}return e.abrupt("return");case 8:i=[],t.quizInfo.detail.forEach(function(e){var a=s.data.detail[e.type-1].problem_info,n={type:e.type,problem_info:[]};e.problem_info.forEach(function(s){var i={problem_id:s.problem_id,student_answer:e.type>=3?"":[],score:t.student_list[t.currentNo].isAttended?-1:0};a.forEach(function(t){t.problem_id===i.problem_id&&(i.student_answer=t.student_answer,i.score=t.score)}),n.problem_info.push(i)}),i.push(n)}),t.userAnswer=i.map(function(e){var s=0,i=0,a=t.quizInfo.detail[e.type-1];return e.problem_info.map(function(n,o){if(-1!==n.score)return n;if(s=0,1===e.type||2===e.type){for(var r in n.student_answer)if(1===e.type)i=a.value/a.problem_info[o].answer.length,a.problem_info[o].answer.indexOf(n.student_answer[r])>=0&&(s+=i);else if(2===e.type){if(i=a.value/a.problem_info[o].answer.length,!(a.problem_info[o].answer.indexOf(n.student_answer[r])>=0)){s=0;break}s+=i}s=Math.floor(s)}else 3===e.type?(s="",n.result=-1,0!==n.student_answer.length?(n.result=12,Ve.postAnswer("/problems/submit",{problem_id:n.problem_id,protype:3,source:n.student_answer,language:t.quizInfo.language}).then(function(){Ve.getQuestionResult("/problems/submit",n.problem_id).then(function(s){t.userAnswer[e.type-1].problem_info[o].result=s.data.result})})):s=0):4===e.type?s=0!==n.student_answer.length?"":0:5===e.type&&(i=a.value,a.problem_info[o].answer===n.student_answer&&(s+=i));return n.score=s,n}),e}),t.changeDate=(new Date).getTime();case 12:case"end":return e.stop()}},e,t)}))()},getStudentList:function(){var t=this;Ve.getStudentAnswerList("/quiz/teacher_ckeck/student_paper_list",this.quizId).then(function(e){if("true"===e.success){if(e.data.answer_sheet.forEach(function(e,s){t.student_list.push(e),-1!==t.currentNo||e.isCorrected||(t.currentNo=s)}),t.currentNo=-1===t.currentNo?t.student_list.length:t.currentNo,t.currentNo>=t.student_list.length)return void t.changeCurStep(1);t.getStudentAnswer()}})},getCheckTips:function(){this.quizCheckStartTips=["因采用匿名改卷机制，改卷期间无法得知答卷学生信息，只能得知待改份数。","所有考试皆采用机器评分与人工评分相结合，其中，由于选择题，填空题，判断题有确切答案，所以此三种类型会先进行机器评分，而编程题与问答题需要教师手动评分，编程题会带有运行结果。","由于改卷是个长时间的工作，本平台同时提供了夜间模式与日间模式两个界面UI，尽可能为各位教师提供一个好的改卷体验。",'在评分项一栏内有各种颜色的圆球，分别有以下含义：<span style="color: rgb(161, 204, 69)">绿色</span>-机器已评分，满分项；<span style="color: rgb(255, 153, 0)">橙色</span>-机器已评分，失分项；<span style="color: rgb(255, 51, 129)">红色</span>-机器已评分，未答项；<span style="color: rgb(102, 102, 122)">灰色</span>-编程题与问答题，不进行机器评分，需要用户手动评分，评分后，若满分则变为绿色，否则为橙色。',"单击圆球进行评分，单击圆球前的数字展示该题，单击题目类型（如“填空题”），展示此类所有题目。","缺考的学生教师可直接点击批改结束跳过，同时对其的所有评分不作效。","若评改部分后退出重进，可接着评改，但也可按本页下“从第一项开始进入”从第一项开始批改。"]}},created:function(){this.getQuizId(),this.getQuizData()}},ii={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{quizCheck:!0,blackTheme:2===t.step&&!t.isMorning}},[s("div",{staticClass:"bgTheme"}),t._v(" "),s("div",{staticClass:"quizCheck_header"},[s("h3",{staticClass:"quizCheck_header_title"},[t._v(t._s(t.quizInfo.title)+" | 教师改卷环节 - "+t._s(t.currentNo+1)+"号考卷")]),t._v(" "),s("span",{staticClass:"quizCheck_header_rightFlame"},[t.getNotCorrected||3!==t.quizInfo.status?t._e():s("span",[t._v("考试已公布成绩")]),t._v(" "),t.getNotCorrected||2!==t.quizInfo.status?t._e():s("span",[t._v("全部批改完成，待公布成绩")]),t._v(" "),t.getNotCorrected&&2===t.quizInfo.status&&-1!==t.currentNo?s("span",[t._v("剩余： "+t._s(t.getNotCorrected)+" 份未批改")]):t._e()])]),t._v(" "),s("div",{staticClass:"quizCheck_container"},[1===t.step?[s("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isShowTips,expression:"!isShowTips"}],staticClass:"quizCheck_step1"},[s("quiz-panel",{attrs:{padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizCheck_step1_container"},[s("h4",[t._v("改卷前须知要点")]),t._v(" "),s("div",{staticClass:"quizCheck_step1_content"},t._l(t.quizCheckStartTips,function(e,i){return s("p",{key:i},[t._v(t._s(i+1)+". \n                "),s("span",{domProps:{innerHTML:t._s(e)}})])})),t._v(" "),s("div",{class:{quizCheck_step1_btns:!0}},[t.getNotCorrected&&0===t.currentNo?s("span",{on:{click:function(e){t.changeCurStep(2)}}},[t._v("前往改卷")]):t._e(),t._v(" "),t.getNotCorrected&&0!==t.currentNo?s("span",{on:{click:function(e){t.changeCurStep(2)}}},[t._v("继续批改")]):t._e(),t._v(" "),t.getNotCorrected||2!==t.quizInfo.status?t._e():s("span",{on:{click:function(e){t.announceGrade()}}},[t._v("公布成绩")]),t._v(" "),t.getNotCorrected||3!==t.quizInfo.status?t._e():s("span",[t._v("成绩已公布")]),t._v(" "),!t.getNotCorrected&&2===t.quizInfo.status&&t.currentNo>=0&&t.currentNo<t.student_list.length?s("span",{staticClass:"quizCheck_step1_subBtns",on:{click:function(e){t.changeCurStep(2)}}},[t._v("继续批改")]):t._e()])])])],1)]:2===t.step?[s("div",{key:t.changeDate,staticClass:"quizCheck_step2"},[s("div",{staticClass:"quizCheck_step2_detail"},[s("quiz-panel",{attrs:{title:-1===t.curProblemNo?"机器评定错题展示":"自选试题展示",padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizCheck_step2_detail_container"},t._l(t.quizInfo.detail[t.curType-1].problem_info,function(e,i){return s("div",{key:e.problem_id},[-1===t.curProblemNo&&(parseFloat(t.userAnswer[t.curType-1].problem_info[i].score)<t.quizInfo.detail[t.curType-1].value||""===t.userAnswer[t.curType-1].problem_info[i].score)||t.curProblemNo===i?[s("h5",{staticClass:"label"},[t._v("\n                    "+t._s(t.problemType[t.curType])+" \n                    "+t._s(i+1)+" \n                    ( "+t._s(t.quizInfo.detail[t.curType-1].value)+" 分)\n                  ")]),t._v(" "),1===t.curType?s("div",{staticClass:"problemDetail_type1"},[s("div",{staticClass:"problemDetail_title"},t._l(e.description.split("{}"),function(a,n){return s("span",{key:n},[s("span",{domProps:{innerHTML:t._s(a)}}),t._v(" "),n!==e.description.split("{}").length-1?s("span",[s("span",{staticClass:"problemDetail_input"},[t._v("\n                            "+t._s(t.userAnswer[t.curType-1].problem_info[i].student_answer[n])+"\n                            "),t.userAnswer[t.curType-1].problem_info[i].student_answer[n]!==t.quizInfo.detail[t.curType-1].problem_info[i].answer[n]?[s("span",{staticClass:"problemDetail_input_answer"},[t._v("（"+t._s(t.quizInfo.detail[t.curType-1].problem_info[i].answer[n])+"）")])]:t._e()],2)]):t._e()])}))]):2===t.curType?s("div",{staticClass:"problemDetail_type2"},[s("div",{staticClass:"problemDetail_title"},[s("span",[t._v("( "+t._s(e.isMulti?"多选题":"单选题")+" )")]),t._v(" "),t._l(e.description.split("{}"),function(a,n){return s("span",{key:n},[s("span",{domProps:{innerHTML:t._s(a)}}),t._v(" "),n!==e.description.split("{}").length-1?s("span",[t._v("\n                          ____"+t._s(t.userAnswer[t.curType-1].problem_info[i].student_answer.toString())+"\n                          "),s("span",{staticClass:"correctAnswer"},[t._v("\n                            ("+t._s(t.quizInfo.detail[t.curType-1].problem_info[i].answer.toString())+")")]),t._v("____\n                        ")]):t._e()])})],2),t._v(" "),s("ul",{staticClass:"chooseList"},t._l(t.orderEngList,function(a,n){return s("li",{key:n,class:{chooseList_defaultItem:!0,chooseList_chooseCorrect:t.userAnswer[t.curType-1].problem_info[i].student_answer.indexOf(a)>=0&&t.quizInfo.detail[t.curType-1].problem_info[i].answer.indexOf(a)>=0,chooseList_chooseWrong:t.userAnswer[t.curType-1].problem_info[i].student_answer.indexOf(a)>=0&&t.quizInfo.detail[t.curType-1].problem_info[i].answer.indexOf(a)<0,chooseList_noChooseCorrect:t.userAnswer[t.curType-1].problem_info[i].student_answer.indexOf(a)<0&&t.quizInfo.detail[t.curType-1].problem_info[i].answer.indexOf(a)>=0}},[s("b",[t._v(t._s(a)+":")]),t._v("  "),s("span",{domProps:{innerHTML:t._s(e["option"+a])}})])}))]):3===t.curType?s("div",{staticClass:"problemDetail_type3"},[s("h5",{staticClass:"type3_title"},[s("span",{domProps:{innerHTML:t._s(e.title)}})]),t._v(" "),s("div",{staticClass:"type3_limit",attrs:{onselectstart:"return false;"}},[s("span",[s("i",{staticClass:"icon-project_space"}),t._v(" 空间限制："+t._s(e.memory_limit))]),t._v(" "),s("span",[s("i",{staticClass:"icon-shijian"}),t._v(" 时间限制："+t._s(e.time_limit))]),t._v(" "),s("span",{class:{type3_btn:!0,type3_open_btn:t.isShowTitle!==i},on:{click:function(e){t.isShowTitle=t.isShowTitle===i?-1:i}}},[t.isShowTitle!==i?[t._v("查看题目")]:t._e(),t._v(" "),t.isShowTitle===i?[t._v("查看代码")]:t._e()],2)]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.isShowTitle===i?s("div",[s("div",{staticClass:"type3_content"},[s("span",[t._v("题目描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("输入描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.input)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("输出描述")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.output)}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("样本输入")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.sample_input.replace(/\n/g,"<br>"))}})]),t._v(" "),s("div",{staticClass:"type3_content"},[s("span",[t._v("样本输出")]),t._v(" "),s("p",{domProps:{innerHTML:t._s(e.sample_output.replace(/\n/g,"<br>"))}})])]):t._e()]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.isShowTitle!==i?s("div",[s("div",{staticClass:"type3_Answer"},[s("div",{staticClass:"type3_Answer_header"},[s("span",{staticClass:"type3_Answer_label"},[t._v("答题代码")])]),t._v(" "),s("textarea",{staticClass:"type3_Answer_content",attrs:{readonly:"true"},domProps:{innerHTML:t._s(t.userAnswer[t.curType-1].problem_info[i].student_answer||"该考生没有作答。")}}),t._v(" "),-1!==t.userAnswer[t.curType-1].problem_info[i].result?s("span",{staticClass:"type3_Answer_result",style:{color:t.getResultStyle(t.userAnswer[t.curType-1].problem_info[i].result)}},[t._v("\n                          "+t._s(t.status[t.userAnswer[t.curType-1].problem_info[i].result]))]):t._e()])]):t._e()])],1):4===t.curType?s("div",{staticClass:"problemDetail_type4"},[s("div",{staticClass:"problemDetail_title"},[s("span",{domProps:{innerHTML:t._s(e.description)}})]),t._v(" "),s("div",{staticClass:"problemDetail_input"},[s("span",{staticClass:"inputLabel"},[t._v("考生答案")]),t._v(" "),s("textarea",{staticClass:"inputContent",attrs:{readonly:"true"},domProps:{innerHTML:t._s(t.userAnswer[t.curType-1].problem_info[i].student_answer||"该考生没有作答。")}})])]):s("div",{staticClass:"problemDetail_type5"},[s("div",{staticClass:"problemDetail_title"},[s("span",[s("span",{domProps:{innerHTML:t._s(e.description)}}),t._v("（ "+t._s(t.userAnswer[t.curType-1].problem_info[i].student_answer[0]||"")+" ）")]),t._v(" "),s("span",{staticClass:"correctAnswer"},[t._v(t._s(t.quizInfo.detail[t.curType-1].problem_info[i].answer))])]),t._v(" "),s("ul",{staticClass:"chooseList"},[s("li",{class:{chooseList_defaultItem:!0,chooseList_chooseCorrect:"T"===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"T"===t.quizInfo.detail[t.curType-1].problem_info[i].answer,chooseList_chooseWrong:"T"===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"F"===t.quizInfo.detail[t.curType-1].problem_info[i].answer,chooseList_noChooseCorrect:""===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"T"===t.quizInfo.detail[t.curType-1].problem_info[i].answer}},[s("b",[t._v("正确")])]),t._v(" "),s("li",{class:{chooseList_defaultItem:!0,chooseList_chooseCorrect:"F"===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"F"===t.quizInfo.detail[t.curType-1].problem_info[i].answer,chooseList_chooseWrong:"F"===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"T"===t.quizInfo.detail[t.curType-1].problem_info[i].answer,chooseList_noChooseCorrect:""===t.userAnswer[t.curType-1].problem_info[i].student_answer&&"F"===t.quizInfo.detail[t.curType-1].problem_info[i].answer}},[s("b",[t._v("错误")])])])])]:t._e()],2)}))])],1),t._v(" "),s("div",{staticClass:"quizCheck_step2_score"},[s("quiz-panel",{attrs:{title:"评分项一览",padding:t.getMainPanelPadding,width:"290px"}},[s("div",{staticClass:"quizCheck_step2_score_container"},t._l(t.quizInfo.detail,function(e,i){return s("div",{key:e.type,staticClass:"quizStart_step2_menuItem"},[s("h5",{staticClass:"label"},[t._v("\n                  "+t._s(t.orderList[i])+"、\n                  "),s("span",{class:{curType:t.curType===e.type},on:{click:function(s){t.curType=e.type,t.curProblemNo=-1}}},[t._v("\n                      "+t._s(t.problemType[e.type])+" (共 "+t._s(e.problem_info.length)+" 题, 每题 "+t._s(e.value)+" 分)")])]),t._v(" "),s("div",{staticClass:"problemInput"},t._l(e.problem_info,function(a,n){return s("div",{key:a.problem_id,class:{scoreIpt:!0,scoreIpt_correct:parseInt(t.userAnswer[i].problem_info[n].score)===e.value,scoreIpt_wrong:0===parseInt(t.userAnswer[i].problem_info[n].score),scoreIpt_partCorrect:parseInt(t.userAnswer[i].problem_info[n].score)>0&&parseInt(t.userAnswer[i].problem_info[n].score)<e.value}},[s("span",{staticClass:"problemNo",on:{click:function(s){t.curType=e.type,t.curProblemNo=n}}},[s("span",{staticClass:"problemNo_main"},[t._v(t._s(n+1))])]),t._v(" "),s("div",{staticClass:"problemMain"},[s("quiz-input",{attrs:{type:"number",floatLen:1,range:[0,e.value],lineHeight:"30px",fontColor:"#fff",openAnimation:!1,hideUnderline:!0},model:{value:t.userAnswer[i].problem_info[n].score,callback:function(e){t.$set(t.userAnswer[i].problem_info[n],"score",e)},expression:"userAnswer[index].problem_info[idx].score"}})],1)])}))])}))])],1)])]:t._e(),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("div",{staticStyle:{position:"absolute",display:"inline-block"}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenStudentList,expression:"isOpenStudentList"}],staticClass:"quizCheck_studentList"},[s("quiz-panel",{attrs:{height:"calc(100vh - 230px)",topLine:!1}},[s("h5",[t._v("考卷列表")]),t._v(" "),s("ul",{staticClass:"quizCheck_studentList-container"},t._l(t.student_list,function(e,i){return s("li",{key:e.user_id,class:{quizCheck_beCorrected:e.isCorrected,quizCheck_curStudent:t.currentNo===i},on:{click:function(e){t.changeCurStudent(i)}}},[s("span",[t._v("\n                  "+t._s(i+1)+"\n                  "),e.isAttended?t._e():[t._v("[缺考]")]],2)])}))])],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"quizCheck_rightBtns"},[t.isOpenStudentList?t._e():[1===t.step?s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"20px",radius:"default",theme:"BACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.backToList()}}}):t._e(),t._v(" "),2===t.step?[s("quiz-btn",{attrs:{icon:"content-须知<br>要点",size:"12px",radius:"default",theme:"FORBID",width:"45px",height:"45px"},nativeOn:{click:function(e){t.changeCurStep(1)}}}),t._v(" "),t.currentNo<t.student_list.length?s("quiz-btn",{attrs:{icon:"content-批改<br>结束",size:"12px",radius:"default",theme:"BACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.saveCheckData(t.currentNo+1)}}}):t._e(),t._v(" "),t.isMorning?s("quiz-btn",{attrs:{icon:"icon-yejianmoshi-",size:"25px",radius:"default",theme:"BLACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.isMorning=!t.isMorning}}}):t._e(),t._v(" "),t.isMorning?t._e():s("quiz-btn",{attrs:{icon:"icon-rijianmoshi",size:"25px",radius:"default",theme:"SURE",width:"45px",height:"45px"},nativeOn:{click:function(e){t.isMorning=!t.isMorning}}})]:t._e()],t._v(" "),s("quiz-btn",{attrs:{icon:"icon-yonghu",size:"25px",radius:"default",theme:t.isOpenStudentList?"BACK":"BLACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.isOpenStudentList=!t.isOpenStudentList}}})],2)],1)])],2)])},staticRenderFns:[]};var ai=s("VU/8")(si,ii,!1,function(t){s("TjFv")},"data-v-6a4811b2",null).exports,ni={name:"quizDetail",components:{Information:H,quizPanel:ds,quizTable:Ss,quizBtn:fs,quizTimer:Xs},computed:{getTimeStatus:function(){return null==this.quizInfo.start_time?"等待教师手动开启":{0:"离考试开始还剩：",1:"离考试结束还剩：",2:"考试已结束，等待教师批阅。",3:"考试已结束，成绩已公布。"}[this.quizInfo.status]},getMainPanelPadding:function(){return"10px 15px"}},data:function(){return{quizId:-1,info:{},isInitData:!1,isShowRange:!1,isShowUserInfo:!1,isShowReportCard:!1,isShowTimer:!1,isBeginTimer:!1,quizInfo:{},quizResult:{},quizRangeList:{},quizRank:[],quizDetailRank:[],partRange:[],curClass:"全部班级",classList:[{id:-1,name:"全部班级"}],showerId:"",defaultImage:s("IT0F"),tableHeadList:["序号","学生姓名","学号","所在班级","选择题","填空题","编程题","问答题","判断题","总成绩"]}},methods:{sortData:function(t){var e={1:"nick",2:"code",3:"className",9:"mark"}[t];if(!(this.quizDetailRank.length<2)&&e){var s=this.quizDetailRank[0][e],i=this.quizDetailRank[this.quizDetailRank.length-1][e];this.quizDetailRank.sort(function(t,a){return s>i?t[e]-a[e]:a[e]-t[e]})}},backQuizList:function(){this.$router.push({name:"PersonalCenter",params:{isShow:4}})},export2Excel:function(){var t=this;new Promise(function(t){t()}).then(function(){Te(t.tableHeadList,ke("#reportCard_table"),t.quizInfo.title)}.bind(null,s)).catch(s.oe)},getInfo:function(t){this.showerId=null,this.isShowUserInfo=!0,this.showerId=t},openReportCard:function(){0===this.quizDetailRank.length&&this.getDetailRankData(),this.isShowReportCard=!0},changeRankList:function(){-1===this.curClass?this.getDetailRankData():this.getDetailRankData(this.curClass)},toQuizPreview:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={id:this.quizId};"1"===this.info.identity&&t&&(e.uid=this.info.uid),this.$router.push({name:"quizPreview",params:e,query:{redirect:"/quizDetail/"+this.quizId}})},getProTypeName:function(t){return{1:"填空题",2:"选择题",3:"编程题",4:"问答题",5:"判断题"}[t]},getProgressBarLength:function(t,e){return{width:Math.round(e/t*100)+"%"}},getQuizStartTime:function(t){return null==t?"等待手动开启":t.replace("T"," ")},getQuizType:function(t){return{1:"平时考试",2:"期中考试",3:"期末考试"}[t]},getQuizLang:function(t){return{0:"C语言",1:"C++",3:"Java语言",6:"Python语言"}[t]},getRemindType:function(t){return{1:"不提醒",2:"简洁提醒",3:"详细提醒"}[t]},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Ve.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.getQuizId(),t.getQuizInfo()})}},getRankData:function(){var t=this;return b()(_.a.mark(function e(){var s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.getResultRank("/quiz/rank",{quizId:t.quizId,size:8});case 2:s=e.sent,t.quizRank=s.data.rank_list;case 4:case"end":return e.stop()}},e,t)}))()},getDetailRankData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return b()(_.a.mark(function s(){var i;return _.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Ve.getResultRankDetail("/quiz/students",t.quizId,e);case 2:i=s.sent,t.quizDetailRank=i.data.score_list;case 4:case"end":return s.stop()}},s,t)}))()},getQuizId:function(){this.quizId=this.$route.params.id},getQuizInfo:function(){var t=this;return b()(_.a.mark(function e(){var s,i,a,n,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.getQuizDetailInfo("/quiz",t.quizId);case 2:if("false"!==(s=e.sent).success){e.next=6;break}return t.$router.push({path:"/personal-center/1"}),e.abrupt("return");case 6:i=s.data,t.quizInfo=i.quiz_info.quiz_info,t.quizInfo.classId_list.forEach(function(e,s){t.classList.push({id:e,name:t.quizInfo.className_list[s]})}),t.isBeginTimer=null!=t.quizInfo.start_time,t.isShowTimer=!0,t.quizResult=0===i.quiz_info.result.length?null:i.quiz_info.result,t.quizRangeList={id:i.quiz_info.range_list.id,name:i.quiz_info.range_list.title},t.quizRangeList.question_type=i.quiz_info.range_list.detail.map(function(t){return{type:t.type,question_num:t.amount,type_bonus:t.value,range:t.range}}),2===t.quizInfo.remind_type&&t.quizRangeList.question_type.forEach(function(e){e.range.forEach(function(e){t.partRange.indexOf(e)<0&&t.partRange.push(e)})}),"2"===t.info.identity?t.isShowRange=!0:null!=t.quizInfo.start_time&&(a=(new Date).getTime(),n=new Date(t.quizInfo.start_time).getTime(),o=24*t.quizInfo.remind_time*60*60*1e3,(t.quizInfo.result>=2||n-a<=o)&&(t.isShowRange=!0)),t.isInitData=!0,3===t.quizInfo.status&&(t.getRankData(),t.getDetailRankData());case 18:case"end":return e.stop()}},e,t)}))()}},created:function(){this.getListInfo()}},oi={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"quizDetail"},[s("div",{staticClass:"quizDetail_header"},[s("h3",{staticClass:"quizDetail_header_title"},[t._v(t._s(t.isInitData?t.quizInfo.title:"Loading..."))]),t._v(" "),t.isShowTimer?s("div",{staticClass:"quizDetail_header_rightFlame"},[s("span",{staticClass:"quizDetail_rightFlame_status"},[t._v(t._s(t.getTimeStatus))]),t._v(" "),s("quiz-timer",{staticClass:"quizDetail_rightFlame_time",attrs:{initTime:t.quizInfo.start_time,duration:t.quizInfo.duration,advance:t.quizInfo.advance,isBeginTimer:t.isBeginTimer},on:{notBeginTimerHandler:function(e){t.quizInfo.status=0},enterTimerHandler:function(e){t.quizInfo.status=1},endTimerHander:function(e){t.quizInfo.status=2}}})],1):t._e()]),t._v(" "),s("div",{staticClass:"quizDetail_container"},[s("ul",[s("li",{directives:[{name:"loading",rawName:"v-loading",value:!t.isInitData,expression:"!isInitData"}]},[s("quiz-panel",{attrs:{title:"考试信息",width:"300px",height:"530px",padding:t.getMainPanelPadding}},[s("div",{staticClass:"quizDetail_container_baseInfo"},[s("p",{staticClass:"infoItem"},[t._v("考试课程："),s("span",[t._v(t._s(t.quizInfo.course_name))])]),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("考试班级：\n              "),t._l(t.quizInfo.className_list,function(e,i){return s("span",{key:i},[t._v(t._s(e)+"\n                "),i!==t.quizInfo.className_list.length-1?[t._v("、")]:t._e()],2)})],2),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("考试类型："),s("span",[t._v(t._s(t.getQuizType(t.quizInfo.type)))])]),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("考试语言："),s("span",[t._v(t._s(t.getQuizLang(t.quizInfo.language)))])]),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("开考时间："),s("span",[t._v(t._s(t.getQuizStartTime(t.quizInfo.start_time)))])]),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("考试时长："),s("span",[t._v(t._s(t.quizInfo.duration)+"分钟")])]),t._v(" "),s("p",{staticClass:"infoItem"},[t._v("允许提前交卷时间："),s("span",[t._v(t._s(t.quizInfo.advance)+"分钟")])]),t._v(" "),"1"===t.info.identity?[s("p",{staticClass:"infoItem"},[t._v("出卷人："),s("span",[t._v(t._s(t.quizInfo.manager))])])]:t._e(),t._v(" "),"2"===t.info.identity?[s("p",{staticClass:"infoItem"},[t._v("设置范围提醒："),s("span",[t._v(t._s(t.getRemindType(t.quizInfo.remind_type)))])]),t._v(" "),1!==t.quizInfo.remind_type?s("p",{staticClass:"infoItem"},[t._v("提醒时间："),s("span",[t._v("考前"+t._s(t.quizInfo.remind_time)+"天")])]):t._e()]:t._e(),t._v(" "),3===t.quizInfo.status?[s("p",{staticClass:"infoItem"},[t._v("参与考试人数："),s("span",[t._v(t._s(t.quizResult.attendants)+"人( 缺考"+t._s(t.quizResult.absentee)+"人 )")])]),t._v(" "),s("div",{staticClass:"quizDetail_baseInfo_resultStat"},[s("span",{staticClass:"label"},[t._v("分数段人数统计")]),t._v(" "),s("ul",{staticClass:"quizDetail_resultStat_container"},t._l(t.quizResult.scoreLevels,function(e,i){return s("li",{key:i},[s("span",[t._v(t._s(e.level))]),t._v(" "),s("div",{staticClass:"progress-bar"},[s("span",{staticClass:"solid-bar",style:t.getProgressBarLength(t.quizResult.attendants+t.quizResult.absentee,e.amount)})]),t._v(" "),s("span",[t._v(t._s(e.amount)+"人")])])}))])]:[s("div",{staticClass:"quizDetail_baseInfo_resultStat"},[s("h5",{staticClass:"notBeginTips"},[t._v("考试尚未开始，无更多信息")])])]],2)])],1),t._v(" "),t.isShowRange?s("li",[s("quiz-panel",{attrs:{title:"考试范围",width:"300px",height:"530px",padding:t.getMainPanelPadding}},[t.isInitData?s("div",{staticClass:"quizDetail_container_quizRange"},[s("quiz-table",{attrs:{dataObj:t.quizRangeList,isSelected:!0,isOnlyRead:!0}}),t._v(" "),1===t.quizInfo.remind_type?s("div",{staticClass:"quizDetail_quizRange_part"},[s("h5",{staticClass:"quizDetail_quizRange_partLabel",staticStyle:{"text-align":"center"}},[t._v("该考试不提醒考试范围")])]):t._e(),t._v(" "),2===t.quizInfo.remind_type?s("div",{staticClass:"quizDetail_quizRange_part"},[s("h5",{staticClass:"quizDetail_quizRange_partLabel"},[t._v("重点关注以下知识要点")]),t._v(" "),s("div",{staticClass:"quizDetail_quizRange_partContent"},[t.partRange.length>0?t._l(t.partRange,function(e,i){return s("span",{key:i},[t._v("\n                  "+t._s(e)+"\n                  "),0!==e.length&&i!==t.partRange.length-1?s("span",[t._v("、")]):t._e()])}):[s("span",{staticClass:"allRange"},[t._v("全部")])]],2)]):t._e(),t._v(" "),3===t.quizInfo.remind_type?s("div",{staticClass:"quizDetail_quizRange_detail"},t._l(t.quizRangeList.question_type,function(e,i){return s("div",{key:i,staticClass:"quizDetail_quizRange_detailItem"},[s("div",{staticClass:"quizDetail_quizRange_detailLabel"},[t._v(t._s(t.getProTypeName(e.type)))]),t._v(" "),s("div",{staticClass:"quizDetail_quizRange_detailContent"},[e.range.length>0?t._l(e.range,function(i,a){return s("span",{key:a},[t._v("\n                    "+t._s(i)+"\n                    "),0!==e.range.length&&a!==e.range.length-1?s("span",[t._v("、")]):t._e()])}):[s("span",{staticClass:"allRange"},[t._v("全部")])]],2)])})):t._e()],1):t._e()])],1):t._e(),t._v(" "),3===t.quizInfo.status?s("li",[s("quiz-panel",{attrs:{title:"排行榜",width:"300px",height:"530px",padding:t.getMainPanelPadding}},[s("ul",{staticClass:"quizDetail_container_rankList"},t._l(t.quizRank,function(e,i){return s("li",{key:i},[s("div",{staticClass:"index"},[0===i?s("span",{staticStyle:{color:"rgb(248, 208, 28)"}},[s("i",{staticClass:"icon-diyi"})]):1===i?s("span",{staticStyle:{color:"rgb(190, 197, 204)"}},[s("i",{staticClass:"icon-dier"})]):2===i?s("span",{staticStyle:{color:"rgb(208, 153, 106)"}},[s("i",{staticClass:"icon-disan"})]):s("span",[t._v(t._s(i+1))])]),t._v(" "),s("div",{staticClass:"userInfo"},[s("img",{attrs:{src:e.avatarUrl?e.avatarUrl:t.defaultImage}}),t._v(" "),s("div",{staticClass:"middleHelper"}),t._v(" "),s("span",{staticClass:"nickAndScore"},[s("span",{staticClass:"nick",on:{click:function(s){t.getInfo(e.uid)}}},[t._v(t._s(e.nick))]),t._v(" "),s("span",{staticClass:"score"},[-1===e.score?[t._v("缺考")]:[t._v(t._s(e.score)+"分")]],2)])])])}))])],1):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowReportCard,expression:"!isShowReportCard"}],staticStyle:{"text-align":"right"}},[s("div",{staticStyle:{position:"absolute",display:"inline-block"}},[s("div",{staticClass:"quizDetail_rightBtns"},["1"===t.info.identity&&3===t.quizInfo.status?s("quiz-btn",{attrs:{icon:"content-我<br>的<br>答<br>题",size:"16px",radius:"default",theme:"FORBID",width:"45px",height:"100px"},nativeOn:{click:function(e){t.toQuizPreview(!0)}}}):t._e(),t._v(" "),"2"===t.info.identity?s("quiz-btn",{attrs:{icon:"content-查<br>看<br>试<br>卷",size:"16px",radius:"default",theme:"FORBID",width:"45px",height:"100px"},nativeOn:{click:function(e){t.toQuizPreview()}}}):t._e(),t._v(" "),"2"===t.info.identity&&3===t.quizInfo.status?s("quiz-btn",{attrs:{icon:"content-成绩<br>详情",size:"12px",radius:"default",theme:"BLACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.openReportCard()}}}):t._e(),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"20px",radius:"default",theme:"BACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.backQuizList()}}})],1)])])]),t._v(" "),s("transition",{attrs:{name:"table-fade"}},[t.isShowReportCard?s("div",{staticClass:"quizDetail_reportCard"},[s("div",{staticClass:"quizDetail_reportCard_container"},[s("quiz-panel",{attrs:{height:"520px",padding:t.getMainPanelPadding,topLine:!1}},[s("div",{staticClass:"quizDetail_reportCard_header"},[s("h3",[t._v("详细成绩单\n            "),s("span",{staticClass:"classChoose"},[s("el-select",{attrs:{placeholder:"请选择班级"},on:{change:function(e){t.changeRankList()}},model:{value:t.curClass,callback:function(e){t.curClass=e},expression:"curClass"}},t._l(t.classList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])]),t._v(" "),s("div",{staticClass:"quizDetail_reportCard_table"},[s("table",{attrs:{id:"reportCard_table",cellspacing:"0"}},[s("tr",t._l(t.tableHeadList,function(e,i){return s("th",{key:i,style:i<=3||9===i?"cursor: pointer;":"cursor: default;",attrs:{onselectstart:"return false;"},on:{click:function(e){t.sortData(i)}}},[t._v(t._s(e))])})),t._v(" "),t._l(t.quizDetailRank,function(e,i){return s("tr",{key:e.code},[s("td",[t._v(t._s(i+1))]),t._v(" "),s("td",[t._v(t._s(e.nick))]),t._v(" "),s("td",[t._v(t._s(e.code))]),t._v(" "),s("td",[t._v(t._s(e.className))]),t._v(" "),-1!==e.mark?[s("td",[t._v(t._s(e.score_detail.problem_XZ))]),t._v(" "),s("td",[t._v(t._s(e.score_detail.problem_TK))]),t._v(" "),s("td",[t._v(t._s(e.score_detail.problem_BC))]),t._v(" "),s("td",[t._v(t._s(e.score_detail.problem_WD))]),t._v(" "),s("td",[t._v(t._s(e.score_detail.problem_PD))]),t._v(" "),s("td",[t._v(t._s(e.mark))])]:[t._l(5,function(t){return s("td",{key:t})}),t._v(" "),s("td",[s("span",{staticStyle:{color:"rgb(255, 0, 0)"}},[t._v("缺考")])])]],2)}),t._v(" "),t.quizDetailRank.length<15?t._l(15-t.quizDetailRank.length,function(e){return s("tr",{key:e},t._l(10,function(t){return s("td",{key:t})}))}):t._e()],2)])]),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("div",{staticStyle:{position:"absolute",display:"inline-block"}},[s("div",{staticClass:"quizDetail_rightBtns"},["2"===t.info.identity&&3===t.quizInfo.status?s("quiz-btn",{attrs:{icon:"icon-daochu",size:"20px",radius:"default",theme:"BLACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.export2Excel()}}}):t._e(),t._v(" "),s("quiz-btn",{attrs:{icon:"icon-fanhui2",size:"20px",radius:"default",theme:"BACK",width:"45px",height:"45px"},nativeOn:{click:function(e){t.isShowReportCard=!1}}})],1)])])],1)]):t._e()]),t._v(" "),s("el-dialog",{attrs:{title:"学生信息",visible:t.isShowUserInfo,width:"60%"},on:{"update:visible":function(e){t.isShowUserInfo=e}}},[s("Information",{attrs:{information:t.showerId}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.isShowUserInfo=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.isShowUserInfo=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ri=s("VU/8")(ni,oi,!1,function(t){s("RQO4")},"data-v-5638590a",null).exports;var li={postCreatedTest:function(t,e){return Vi(t,e).then(function(t){return p.a.resolve(t.data)})}},ci={data:function(){return{testPid:"",testTitle:"",testType:"",problemTypes:[{value:1,label:"填空题"},{value:2,label:"选择题"},{value:3,label:"编程题"},{value:4,label:"问答题"},{value:5,label:"判断题"},{label:"全部类型"}],value3:!1,testForm:{name:"",starDate:new Date,endDate:"",problem:[]},tableData:[],questionData:[],headerStyle:{backgroundColor:"red"},total:0,testPage:1,typeObj:{},coursesID:""}},methods:{backCourseTest:function(){this.$router.push({name:"PersonalCenter",params:{isShow:2},query:{showCourseTest:!1,coursesID:this.coursesID}})},searchProblem:function(){var t={title:this.testTitle,problemId:this.testPid,type:this.testType};this.typeObj=t,1!==this.testPage&&(this.testPage=1),this.getProblems(t,this.testPage)},checkProblems:function(t){if(null!=this.notify&&this.notify.close(),!0===t.select)this.testForm.problem.push(t);else for(var e=0;e<this.testForm.problem.length;e++)t.PID===this.testForm.problem[e].PID&&this.testForm.problem.splice(e,1)},deleteProblem:function(t){for(var e=0;e<this.testForm.problem.length;e++)t.PID===this.testForm.problem[e].PID&&(this.testForm.problem.splice(e,1),t.select=!1);for(var s=0;s<this.tableData.length;s++)t.PID===this.tableData[s].PID&&(this.tableData[s].select=!1)},getQuestionData:function(t){null!=this.notify&&this.notify.close();var e=this;yt.getQuestionDetail("/problems/detail",t).then(function(s){e.questionData=s.data;for(var i="",a=0;a<e.questionData.tagnames.length;a++)i+='<li style="display: inline-block;background-color: #6495ed;min-width: 24px;height: 24px;line-height: 24px;border-radius: 12px;margin: 5px 2px;color: white;padding: 0 10px;cursor: default;">'+e.questionData.tagnames[a]+"</li>";e.notify=e.$notify({title:"第"+e.questionData.problem_id+"题 | "+e.questionData.info.title,position:"bottom-left",dangerouslyUseHTMLString:!0,duration:12e3,customClass:"questionDetail",message:'<div id="questionDetail" style="cursor: pointer;"><ul class="content-top" style="width: 100%; text-align: center;">'+i+'</ul><div class="content-middle" style="width: 100%; max-height: 68vh; overflow: auto; margin-top: 20px;color: #333;padding: 5px 10px;margin-bottom: 10px;font-size: 14px;line-height: 20px;white-space: pre-wrap;"><p>'+e.questionData.info.description+'</p></div><div class="content-bottom" style="text-align: right; font-size: 10px;">已提交'+e.questionData.submit+"次&nbsp;&nbsp;已通过"+e.questionData.accepted+"次</div></div>"}),e.notify.onClick=function(){e.oProblemDetail(t)}})},showDetail:function(t){this.getQuestionData(t.PID)},getProblems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this;yt.getProblemsList("/problems",e,10,t,s,i.coursesID).then(function(t){i.total=t.total,i.tableData=i.filterTableDateList(t.data),i.judgmentIsSelect()})},filterTableDateList:function(t){for(var e=[],s=0;s<t.length;s++){var i={};i.PID=t[s].problem_id,i.title=t[s].title,i.label=t[s].tagnames,i.passRate=t[s].submit?(t[s].accepted/t[s].submit*100).toFixed(2):"0.00",i.select=!1,i.wasUsed=t[s].was_used,e.push(i)}return e},createdTest:function(){var t=this,e=[],s=window.sessionStorage.getItem("userInfo");if(null!==s.uid||void 0!==s.uid)var i=JSON.parse(s).uid;for(var a=0;a<this.testForm.problem.length;a++)e.push(this.testForm.problem[a].PID);var n="["+e+"]",o=this.timeFormat(this.testForm.endDate),r={exam_name:this.testForm.name,stop_time:o,courses_id:this.coursesID,uid:i,problem_list:n};li.postCreatedTest("/courses/exams",r).then(function(e){"true"===e.success&&(t.$message({message:"测验创建成功,即将返回测验页面",type:"success"}),setTimeout(function(){t.backCourseTest()},300))})},judgmentIsSelect:function(){for(var t=0;t<this.tableData.length;t++)for(var e=0;e<this.testForm.problem.length;e++)this.tableData[t].PID===this.testForm.problem[e].PID&&(this.tableData[t].select=!0)},handleSizeChange:function(t){},handleCurrentChange:function(t){this.getProblems(this.typeObj,t),this.testPage=t},getCourseID:function(){this.coursesID=this.$route.query.courses_id},timeFormat:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},oProblemDetail:function(t){var e=this.$router.resolve({path:"/library/questionDetail",query:{PID:t}}).href;window.open(e,"_blank")}},created:function(){this.getCourseID(),this.getProblems()},beforeDestroy:function(){null!=this.notify&&this.notify.close()}},ui={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTest"},[s("div",{staticClass:"addTest-head"},[s("el-button",{staticClass:"back",attrs:{type:"primary",round:"",size:"small"},on:{click:t.backCourseTest}},[t._v("返回")]),t._v(" "),s("span",[t._v("添加测验")])],1),t._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"}},[s("el-col",{attrs:{span:7}},[s("div",{staticClass:"addTest-info"},[s("el-form",{attrs:{model:t.testForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"测试名称"}},[s("el-input",{attrs:{placeholder:"请填写测试名称"},model:{value:t.testForm.name,callback:function(e){t.$set(t.testForm,"name",e)},expression:"testForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"起始时间"}},[s("el-col",{attrs:{span:24}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.testForm.starDate,callback:function(e){t.$set(t.testForm,"starDate",e)},expression:"testForm.starDate"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"截止时间"}},[s("el-col",{attrs:{span:24}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择时间"},model:{value:t.testForm.endDate,callback:function(e){t.$set(t.testForm,"endDate",e)},expression:"testForm.endDate"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"已选择题目"}},[s("el-col",{attrs:{span:24}},[t.testForm.problem.length<=0||void 0===t.testForm.problem?s("el-input",{attrs:{placeholder:"请在右边框选择题目",disabled:""}}):t._e()],1)],1),t._v(" "),t._l(t.testForm.problem,function(e,i){return t.testForm.problem.length>0?s("div",{key:i,staticClass:"problem-list"},[s("span",[t._v(t._s(e.PID))]),t._v(" "),s("span",[t._v(t._s(e.title))]),t._v(" "),s("i",{staticClass:"el-icon-error deleteIcon",on:{click:function(s){t.deleteProblem(e)}}})]):t._e()})],2)],1),t._v(" "),s("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.createdTest}},[t._v("创建测验")])],1)]),t._v(" "),s("el-col",{attrs:{span:16,offset:1}},[s("div",{staticClass:"addtest-sreach"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:6,offset:3}},[s("el-input",{attrs:{size:"small",placeholder:"请输入题目编号"},model:{value:t.testPid,callback:function(e){t.testPid=e},expression:"testPid"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{size:"small",placeholder:"请输入题目标题"},model:{value:t.testTitle,callback:function(e){t.testTitle=e},expression:"testTitle"}})],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-select",{attrs:{size:"small",placeholder:"请选择题目类型"},model:{value:t.testType,callback:function(e){t.testType=e},expression:"testType"}},t._l(t.problemTypes,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"statusButton"},[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.searchProblem}},[t._v("搜索")])],1)])],1)],1),t._v(" "),s("div",{staticClass:"table-area question-bank-table-area"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-row-style":t.headerStyle,stripe:""},on:{"row-click":t.showDetail}},[s("el-table-column",{attrs:{label:"已测试",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.wasUsed?s("i",{staticClass:"icon-success",staticStyle:{color:"#075f60"}}):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{property:"PID",label:"PID",width:"100px",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{label:"标签",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.label,function(e,i){return s("span",{key:i,staticClass:"type"},[t._v(t._s(e))])})}}])}),t._v(" "),s("el-table-column",{attrs:{property:"title","show-overflow-tooltip":"",label:"题目标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"problem-title",domProps:{innerHTML:t._s(e.row.title)}})]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"通过率",width:"104px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:e.row.passRate>=80?"green":e.row.passRate>=40?"blue":"red"},[t._v(t._s(e.row.passRate)+"%")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"选择题目",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{on:{change:function(s){t.checkProblems(e.row)}},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:e.row.select,callback:function(s){t.$set(e.row,"select",s)},expression:"scope.row.select"}})]}}])})],1),t._v(" "),s("div",{staticClass:"addTest-pagination"},[s("el-pagination",{attrs:{"page-size":10,background:"","current-page":t.testPage,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var di=s("VU/8")(ci,ui,!1,function(t){s("djK7")},"data-v-d58b97f0",null).exports,pi={props:{showCatalog:{type:Boolean,default:!1}},data:function(){return{searchTip:"热门搜索",searchKey:this.$route.query.search,hotTags_list:[],tags_counts:0,tags_maxPage:3,tags_currentPage:1,tags_size:7}},computed:{getCursor:function(){if(""!==this.searchKey)return{cursor:"pointer"}}},methods:{changeTips:function(t){this.searchKey&&""!==this.searchKey&&(this.searchTip=t?"返回全部":"热门搜索")},searchAll:function(){this.searchKey="",this.$router.push({name:"postSearch",params:{type:0,page:1}}),this.searchTip="热门搜索"},backToIndex:function(){this.searchKey="",this.$router.push({path:"/forums"})},gotoSearch:function(t){this.searchKey=t,this.search()},search:function(){null==this.searchKey||""===this.searchKey?this.searchAll():this.$router.push({name:"postSearch",params:{type:0,page:1},query:{search:this.searchKey}})},getTags:function(t,e){var s=this;Wt.getHotTagsList("/forum/hot_search",{page:t,pagesize:e}).then(function(t){s.hotTags_list=t.data.hot_search_list,s.tags_counts=t.total})},changeTags:function(){Math.floor(this.tags_counts/this.tags_size)===this.tags_currentPage?this.tags_currentPage=1:0===this.tags_counts?this.tags_currentPage=1:this.tags_currentPage++,this.getTags(this.tags_currentPage,this.tags_size)}},created:function(){this.getTags(this.tags_currentPage,this.tags_size)}},hi={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-container"},[s("div",{staticClass:"search-bar"},[t.showCatalog?s("p",{staticClass:"catalog"},[s("span",{staticClass:"backToIndex",staticStyle:{cursor:"pointer"},on:{click:t.backToIndex}},[t._v("讨论区")]),t._v("\n       > \n      "),t.$route.query.search&&void 0!==t.$route.query.search&&""!==t.$route.query.search?[s("span",{staticStyle:{color:"#FF9900"}},[t._v("搜索“"+t._s(t.$route.query.search)+"”")])]:[s("span",[t._v("搜索页")])]],2):t._e(),s("p"),s("div",{staticClass:"search-input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],attrs:{type:"text",placeholder:"请输入关键词"},domProps:{value:t.searchKey},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-search",on:{click:t.search}})])]),t._v(" "),s("div",{staticClass:"tags-bar"},[s("ul",{staticClass:"tags-list",attrs:{onselectstart:"return false"}},[s("li",{staticClass:"title",style:t.getCursor,on:{click:t.searchAll,mouseover:function(e){t.changeTips(!0)},mouseleave:function(e){t.changeTips(!1)}}},[s("span",[t._v(t._s(t.searchTip))])]),t._v(" "),t._l(t.hotTags_list,function(e,i){return s("li",{key:i,staticClass:"tag",on:{click:function(s){t.gotoSearch(e)}}},[s("span",[t._v(t._s(e))])])}),t._v(" "),s("li",{staticClass:"change-btn",on:{click:t.changeTags}},[s("span",[t._v("换一批")])])],2)])])},staticRenderFns:[]};var fi=s("VU/8")(pi,hi,!1,function(t){s("Nt3/")},"data-v-7e96598b",null).exports,mi={props:{whilePage:{type:Number,default:0},postDetail:{type:Object}},computed:{getIdentity:function(){return"1"===this.infoData.identity?"学生":"2"===this.infoData.identity?"教师":"3"===this.infoData.identity?"管理员":"注册用户"}},data:function(){return{info:{},host:Bi,postsStats:{},rightEssayMax:8,hasLogined:!1,infoData:{replyMsg_list:[]},postsList:[],defaultImage:s("IT0F")}},methods:{toPublish:function(){this.$router.push({path:"/postPublish"})},toLogin:function(){0===this.whilePage?this.$router.push({name:"login",query:{redirect:"/forums"}}):1===this.whilePage&&this.$router.push({name:"login",query:{redirect:"/postDetail/"+this.postDetail.post_id}})},toLike:function(){1===this.whilePage&&this.hasLogined&&this.$emit("toLike",!0)},toMyPosts:function(){this.$router.push({name:"PersonalCenter",params:{isShow:"8"}})},toMyMessage:function(){this.$router.push({name:"PersonalCenter",params:{isShow:"9"}})},toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},toSearchPage:function(t){this.$router.push({name:"postSearch",params:{type:t}})},getDate:function(t){var e=new Date(t.replace("T"," ")),s=new Date,i=s.getFullYear()-e.getFullYear(),a=s.getMonth()-e.getMonth(),n=s.getDate()-e.getDate(),o=i>0?i+"年前":0===i&&a>0?a+"月前":0===i&&0===a?n+"天前":t.replace("T"," "),r=s.getTime()-e.getTime();return r<6e4?Math.floor(r/1e3)+"秒前":r<36e5?Math.floor(r/6e4)+"分钟前":r<864e5?Math.floor(r/36e5)+"小时前":o},toRegister:function(){this.$router.push({path:"/login",query:{show:-1}})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Wt.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.hasLogined=!0,t.getInfoData()})}this.getRightContent()},getInfoData:function(){var t=this;Wt.getInfoData("/forum/my_info",{}).then(function(e){t.infoData=e.data})},getPostStats:function(){var t=this;Wt.getPostStats("/forum/stupid_count",{}).then(function(e){t.postsStats=e.data})},getRightContent:function(){if(0!==this.whilePage||!this.hasLogined){var t=this,e={type:0===t.whilePage?3:1,page:1,pageSize:this.rightEssayMax+1};Wt.getPostsList("/forum/posts",e).then(function(e){t.postsList=e.data.post_list})}}},created:function(){this.getListInfo(),this.getPostStats()}},gi={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rightFrame"},[s("div",{staticClass:"infoBox"},[0===t.whilePage&&t.hasLogined?[s("div",{staticClass:"userInfo-box"},[s("img",{attrs:{src:t.infoData.avatarUrl?t.host+t.infoData.avatarUrl:t.defaultImage}}),t._v(" "),s("div",{staticClass:"content"},[s("h5",[t._v(t._s(t.infoData.nick))]),t._v(" "),s("span",[t._v(t._s(t.getIdentity))])])])]:t._e(),t._v(" "),s("div",{staticClass:"itemsBox"},[0===t.whilePage&&t.hasLogined?[s("div",{staticClass:"item myPosts cursor-pointer",on:{click:t.toMyPosts}},[s("h5",[t._v(t._s(t.infoData.myPost_count))]),s("span",[t._v("我的帖子")])]),t._v(" "),s("div",{staticClass:"item myReplys cursor-default"},[s("h5",[t._v(t._s(t.infoData.myReply_count))]),s("span",[t._v("我的回复")])]),t._v(" "),s("div",{staticClass:"item myMsgs cursor-pointer",on:{click:t.toMyMessage}},[s("h5",[s("span",{class:t.infoData.ifNewMsg?"newMsg":""},[t._v(t._s(t.infoData.myMsg_count))])]),s("span",[t._v("我的信息")])])]:0!==t.whilePage||t.hasLogined?1===t.whilePage&&null!=t.postDetail?[s("div",{class:t.postDetail.if_liked&&t.hasLogined?"item item-hasLike cursor-default":"item cursor-default"},[s("h5",{staticClass:"cursor-default"},[t._v(t._s(t.postDetail.likes))]),s("span",[t._v(t._s(t.postDetail.if_liked&&t.hasLogined?"已点赞":"点赞"))])]),t._v(" "),s("div",{staticClass:"item cursor-default"},[s("h5",[t._v(t._s(t.postDetail.replies))]),s("span",[t._v("回复")])]),t._v(" "),s("div",{staticClass:"item cursor-default"},[s("h5",[t._v(t._s(t.postDetail.views))]),s("span",[t._v("浏览")])])]:t._e():[s("div",{staticClass:"item cursor-default"},[s("h5",[t._v(t._s(t.postsStats.post_count))]),s("span",[t._v("总帖子数")])]),t._v(" "),s("div",{staticClass:"item cursor-default"},[s("h5",[t._v(t._s(t.postsStats.best_post_count))]),s("span",[t._v("总精华数")])])]],2),t._v(" "),s("div",{staticClass:"btnsBox"},[0===t.whilePage&&t.hasLogined?[s("button",{staticClass:"btn btn-orange",on:{click:t.toPublish}},[t._v("发布帖子")])]:t._e(),t._v(" "),t.hasLogined?t._e():[s("button",{staticClass:"btn btn-grey",on:{click:t.toLogin}},[t._v("前往登录")]),t._v(" "),s("button",{staticClass:"btn btn-orange",on:{click:t.toRegister}},[t._v("马上注册")])],t._v(" "),1===t.whilePage&&t.hasLogined?[s("button",{class:t.postDetail.if_liked?"btn btn-green":"btn btn-grey",on:{click:t.toLike}},[t._v(t._s(t.postDetail.if_liked?"取消点赞":"为他点赞"))])]:t._e()],2)],2),t._v(" "),0===t.whilePage&&t.hasLogined?s("div",{staticClass:"msgBox myMsg-box"},[s("h5",{staticClass:"title"},[t._v("我的信息")]),t._v(" "),s("ul",{staticClass:"msgBox-content"},t._l(t.infoData.replyMsg_list,function(e,i){return i<t.rightEssayMax?s("li",{key:i},[s("div",{staticClass:"body editorShow ud-editor-rightFrame",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),s("div",{staticClass:"footer"},[s("span",[s("img",{attrs:{src:e.avatarUrl?t.host+e.avatarUrl:t.defaultImage}}),s("span",{staticClass:"username"},[t._v(t._s(e.nick))])]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(t.getDate(e.date)))])])]):t._e()})),t._v(" "),t.infoData.replyMsg_list.length>t.rightEssayMax?[s("span",{staticClass:"more",on:{click:t.toMyMessage}},[t._v("查看更多")])]:[s("span",{staticClass:"more nomore"},[t._v("无更多消息")])]],2):t._e(),t._v(" "),0!==t.whilePage||t.hasLogined?t._e():s("div",{staticClass:"msgBox noticeMsg-box"},[s("h5",{staticClass:"title"},[t._v("系统公告")]),t._v(" "),s("ul",{staticClass:"msgBox-content"},t._l(t.postsList,function(e,i){return i<t.rightEssayMax?s("li",{key:i},[s("div",{staticClass:"body editorShow ud-editor-rightFrame",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),s("div",{staticClass:"footer"},[s("span",{staticClass:"username"},[t._v("OJ平台管理员")]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(t.getDate(e.publish_date)))])])]):t._e()})),t._v(" "),t.postsList.length>t.rightEssayMax?[s("span",{staticClass:"more",on:{click:function(e){t.toSearchPage(3)}}},[t._v("查看更多")])]:[s("span",{staticClass:"more nomore"},[t._v("无更多消息")])]],2),t._v(" "),1===t.whilePage?s("div",{staticClass:"msgBox hotPosts-box"},[s("h5",{staticClass:"title"},[t._v("更多热帖")]),t._v(" "),s("ul",{staticClass:"msgBox-content"},t._l(t.postsList,function(e,i){return i<t.rightEssayMax?s("li",{key:i},[s("div",{staticClass:"body"},[s("div",{staticClass:"title",staticStyle:{cursor:"pointer"},on:{click:function(s){t.toPostDetail(e.post_id)}}},[2===e.type?s("span",[t._v("精华 | ")]):3===e.type?s("span",[t._v("公告 | ")]):4===e.type?s("span",[t._v("指南 | ")]):s("span",[t._v("普通 | ")]),t._v(" "),s("span",{staticClass:"main"},[t._v(t._s(e.title))])])]),t._v(" "),s("div",{staticClass:"footer"},[s("span",[s("img",{attrs:{src:e.author.avatarUrl?t.host+e.author.avatarUrl:t.defaultImage}}),s("span",{staticClass:"username"},[t._v(t._s(e.author.nick))])]),t._v(" "),s("span",{staticClass:"date"},[t._v(t._s(e.publish_date.split("T")[0]))])])]):t._e()})),t._v(" "),t.postsList.length>t.rightEssayMax?[s("span",{staticClass:"more",on:{click:function(e){t.toSearchPage(0)}}},[t._v("查看更多")])]:[s("span",{staticClass:"more nomore"},[t._v("无更多消息")])]],2):t._e()])},staticRenderFns:[]};var _i=s("VU/8")(mi,gi,!1,function(t){s("LLqS")},"data-v-42a08924",null).exports,vi={name:"forums",components:{searchBar:fi,rightFrame:_i},data:function(){return{ifLock:!1,password:"",tabList:[{name:"最新帖子",type:0},{name:"最热帖子",type:1},{name:"精华帖子",type:2},{name:"新手指南",type:4}],currentTabType:0,postsList:[],topPostsList:[],postsTotal:0,loading:!0,page:1,pageSize:20,info:{},host:Bi,noLogin:!0,defaultImage:s("IT0F")}},methods:{unLocked:function(){"hhh333---"===this.password&&(this.ifLock=!1)},refresh:function(){location.reload()},changeTab:function(t){this.currentTabType=t,this.page=1,this.getPostsList()},toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},handleCurrentChange:function(t){this.page=t,this.getPostsList()},giveLike:function(t,e,s){var i=window.sessionStorage.getItem("userInfo");if("undefined"===i||null===i||void 0===i)return!1;var a=this;this.postsList[s].is_liked=!this.postsList[s].is_liked,e?Wt.delGiveLike("/forum/like",t).then(function(t){"true"===t.success&&a.postsList[s].likes--}):Wt.postGiveLike("/forum/like",t).then(function(t){"true"===t.success&&a.postsList[s].likes++})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Wt.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.expandTabItem(),t.noLogin=!1})}},expandTabItem:function(){this.tabList.push({name:"系统公告",type:3}),this.showNoticeMsg=!1},getTopPostsList:function(){var t=this;Wt.getTopPostsList("/forum/posts/top",{}).then(function(e){t.topPostsList=e.data.post_list})},getPostsList:function(t){window.scrollTo(0,0),this.loading=!0;var e=this,s={type:e.currentTabType,page:e.page,pageSize:e.pageSize};1===arguments.length&&(s.search=t),Wt.getPostsList("/forum/posts",s).then(function(t){e.postsList=t.data.post_list,e.postsTotal=t.total;for(var s=0;s<e.topPostsList.length;s++)e.topPostsList[s].is_top=!0,e.postsList.unshift(e.topPostsList[s]);e.loading=!1})}},created:function(){this.getListInfo(),this.getTopPostsList(),this.getPostsList()},watch:{$route:function(){"forums"===this.$route.name&&(this.page=1,this.getPostsList())}}},bi={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"forums"}},[t.ifLock?t._e():["forums"===t.$route.name||"postSearch"===t.$route.name?s("search-bar",{attrs:{showCatalog:"postSearch"===t.$route.name}}):t._e(),t._v(" "),s("transition",[s("router-view")],1),t._v(" "),"forums"===t.$route.name?s("div",{staticClass:"container"},[s("div",{staticClass:"left-module"},[s("ul",{staticClass:"tab-items"},t._l(t.tabList,function(e,i){return s("li",{key:i,class:t.currentTabType===e.type?"currentTab":""},[s("span",{on:{click:function(s){t.changeTab(e.type)}}},[t._v(t._s(e.name))]),t._v(" "),i<t.tabList.length-1?[t._v("\n               /  \n            ")]:t._e()],2)})),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tab-content"},[s("ul",t._l(t.postsList,function(e,i){return s("li",{key:i,class:e.is_top?"top-post-item":""},[s("div",{staticClass:"post-body-left"},[s("img",{attrs:{src:e.author.avatarUrl?t.host+e.author.avatarUrl:t.defaultImage}})]),t._v(" "),s("div",{staticClass:"post-body-middle"},[s("h3",{staticClass:"title"},[s("span",{staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(e.title)},on:{click:function(s){t.toPostDetail(e.post_id)}}}),t._v(" "),e.is_top?s("span",{staticClass:"tags tags-top"},[t._v("置顶")]):t._e(),t._v(" "),2===e.type?s("span",{staticClass:"tags tags-essence"},[t._v("精华")]):t._e(),t._v(" "),3===e.type?s("span",{staticClass:"tags tags-notice"},[t._v("系统公告")]):t._e(),t._v(" "),4===e.type?s("span",{staticClass:"tags tags-guide"},[t._v("新手指南")]):t._e(),t._v(" "),t._l(e.labels,function(e,i){return s("span",{key:i,staticClass:"tags"},[t._v(t._s(e))])})],2),t._v(" "),s("h5",{staticClass:"authorAndDate"},[t._v(t._s(3===e.type?"OJ平台管理员":e.author.nick)+" |  "+t._s(e.publish_date.replace("T"," ")))])]),t._v(" "),s("div",{class:t.noLogin?"post-body-right noLogin":"post-body-right"},[s("div",{staticClass:"good-tips",staticStyle:{color:"#8ECC45"},on:{click:function(s){t.giveLike(e.post_id,e.is_liked,i)}}},[!t.noLogin&&e.is_liked?[s("h5",{staticClass:"hasGood"},[t._v(t._s(e.likes))]),s("span",[t._v("已点赞")])]:[s("h5",[t._v(t._s(e.likes))]),s("span",[t._v("点赞")])]],2),t._v(" "),s("div",{staticClass:"reply-tips",staticStyle:{color:"#FF9900"}},[s("h5",[t._v(t._s(e.replies))]),s("span",[t._v("回复")])]),t._v(" "),s("div",{staticClass:"see-tips",staticStyle:{color:"#868686"}},[s("h5",[t._v(t._s(e.views))]),s("span",[t._v("浏览")])])])])})),t._v(" "),t.postsTotal<=t.pageSize?s("span",{staticClass:"noList"},[t._v("无更多帖子，请尝试"),s("span",{staticClass:"refresh-btn",on:{click:t.refresh}},[t._v("刷新")]),t._v("页面")]):t._e()]),t._v(" "),t.postsTotal>t.pageSize?s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"pager-count":9,total:t.postsTotal},on:{"current-change":t.handleCurrentChange}})],1):t._e()]),t._v(" "),s("div",{staticClass:"right-module"},[s("rightFrame")],1)]):t._e()],t._v(" "),t.ifLock?s("div",{staticClass:"lock"},[s("div",{staticClass:"tips"},[t._v("建设中，请输入密码：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.unLocked(e):null},input:function(e){e.target.composing||(t.password=e.target.value)}}})]):t._e()],2)},staticRenderFns:[]};var yi=s("VU/8")(vi,bi,!1,function(t){s("iPPQ")},"data-v-40db2b65",null).exports,wi={name:"postSearch",data:function(){return{tabList:[{name:"全部帖子",type:0},{name:"精华帖子",type:2},{name:"系统公告",type:3},{name:"新手指南",type:4}],loading:!0,currentTabType:this.$route.params.type,postsList:[],postsTotal:0,page:this.$route.params.page,pageSize:20,searchKey:this.$route.query.search,info:{},ifLogin:!1,host:Bi,defaultImage:s("IT0F")}},methods:{refresh:function(){location.reload()},toPostDetail:function(t){this.$router.push({name:"postDetail",params:{id:t}})},changeTab:function(t){this.currentTabType=t,this.getPostsList()},handleCurrentChange:function(t){this.page=t,this.getPostsList()},giveLike:function(t,e,s){var i=window.sessionStorage.getItem("userInfo");if("undefined"===i||null===i||void 0===i)return!1;var a=this;this.postsList[s].is_liked=!this.postsList[s].is_liked,e?Wt.delGiveLike("/forum/like",t).then(function(t){"true"===t.success&&a.postsList[s].likes--}):Wt.postGiveLike("/forum/like",t).then(function(t){"true"===t.success&&a.postsList[s].likes++})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Wt.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.ifLogin=!0})}},getPostsList:function(){this.loading=!0;var t=this,e={type:t.currentTabType,page:t.page,pageSize:t.pageSize};""!==this.searchKey&&void 0!==this.searchKey&&(e.search=this.searchKey),Wt.getPostsList("/forum/posts",e).then(function(e){t.postsList=e.data.post_list,t.postsTotal=e.total,""!==t.searchKey&&void 0!==t.searchKey&&t.tipWord(),t.loading=!1})},tipWord:function(){for(var t=function(t){var e=new RegExp("[\\\\]","g");return t.replace(e,"[\\\\\\\\]")},e=function(t){for(var e=[t],s=t.length-1;t.length>2&&s>=2;s--)for(var i=0;i<=t.length-s;i++)e.push(t.slice(i,i+s));return e},s=function(s,i,a,n){for(var o=e(s),r=0;r<o.length;r++)if(-1!==i[a].indexOf(o[r])){var l=new RegExp(t(o[r]),"g");i[a]=i[a].replace(l,'<span style="color: '+n+';">'+o[r]+"</span>"),s=s.replace(l,""),o=e(s),r=0}},i=0;i<this.postsList.length;i++)s(this.searchKey,this.postsList[i],"title","#8ECC45")}},created:function(){this.getListInfo(),this.getPostsList()},watch:{$route:function(){"postSearch"===this.$route.name&&(this.currentTabType=this.$route.params.type||0,this.searchKey=this.$route.query.search,this.getPostsList())}},components:{searchBar:fi}},Ci={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"postSearch"}},[s("div",{staticClass:"container"},[s("ul",{staticClass:"tab-items"},t._l(t.tabList,function(e,i){return s("li",{key:i,class:t.currentTabType===e.type?"currentTab":""},[s("span",{on:{click:function(s){t.changeTab(e.type)}}},[t._v(t._s(e.name))]),t._v(" "),i<t.tabList.length-1?[t._v("\n           /  \n        ")]:t._e()],2)})),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tab-content tab-content-loading"},[s("ul",t._l(t.postsList,function(e,i){return s("li",{key:i},[s("div",{staticClass:"post-body-middle"},[s("h3",{staticClass:"title"},[s("span",{staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(e.title)},on:{click:function(s){t.toPostDetail(e.post_id)}}}),t._v(" "),2===e.type?s("span",{staticClass:"tags tags-essence"},[t._v("精华")]):t._e(),t._v(" "),3===e.type?s("span",{staticClass:"tags tags-notice"},[t._v("系统公告")]):t._e(),t._v(" "),4===e.type?s("span",{staticClass:"tags tags-guide"},[t._v("新手指南")]):t._e(),t._v(" "),t._l(e.labels,function(e,i){return s("span",{key:i,staticClass:"tags"},[t._v(t._s(e))])})],2),t._v(" "),s("h5",{staticClass:"authorAndDate"},[t._v(t._s(3===e.type?"OJ平台管理员":e.author.nick)+" |  "+t._s(e.publish_date.replace("T"," ")))])]),t._v(" "),s("div",{class:t.ifLogin?"post-body-right":"post-body-right noLogin"},[s("div",{staticClass:"good-tips",staticStyle:{color:"#8ECC45"},on:{click:function(s){t.giveLike(e.post_id,e.is_liked,i)}}},[t.ifLogin&&e.is_liked?[s("h5",{staticClass:"hasGood"},[t._v(t._s(e.likes))]),s("span",[t._v("已点赞")])]:[s("h5",[t._v(t._s(e.likes))]),s("span",[t._v("点赞")])]],2),t._v(" "),s("div",{staticClass:"reply-tips",staticStyle:{color:"#FF9900"}},[s("h5",[t._v(t._s(e.replies))]),s("span",[t._v("回复")])]),t._v(" "),s("div",{staticClass:"see-tips",staticStyle:{color:"#868686"}},[s("h5",[t._v(t._s(e.views))]),s("span",[t._v("浏览")])])])])})),t._v(" "),t.postsTotal<=t.pageSize?s("span",{staticClass:"noList"},[t._v("无更多帖子，请尝试"),s("span",{staticClass:"refresh-btn",on:{click:t.refresh}},[t._v("刷新")]),t._v("页面")]):t._e()]),t._v(" "),t.postsTotal>t.pageSize?s("div",{staticClass:"public-pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"pager-count":9,total:t.postsTotal},on:{"current-change":t.handleCurrentChange}})],1):t._e()])])},staticRenderFns:[]};var ki=s("VU/8")(wi,Ci,!1,function(t){s("bqo0")},"data-v-ed30c9e6",null).exports,Ti={name:"postPublish",components:{wangEditor:Xt},data:function(){return{keyWord:[],saveContent:"",post:{title:"",save_date:"",labels:[],content:"",type:0,if_epic_post:!1},postText:"",info:{},ifPublish:!1}},methods:{backToIndex:function(){this.$router.push({path:"/forums"})},catchData:function(t,e){this.post.content=t,this.postText=e},setType:function(t){this.post.type=this.post.type===t?0:t},resetContent:function(){this.post={title:"",save_date:"",labels:[],content:"",type:0,if_epic_post:!1},this.saveContent=""},addLabel:function(){var t=this,e=this.keyWord,s="",i=function(){t.$message.warning({message:s,type:"error",duration:1e3})};if(null===e||""===e||e.match(/^\s*$/))return s="标签不能为空或全空格！",i(),!1;if(e.length>10)return s="长度不能超过10个字符！",i(),!1;for(var a in this.post.labels)if(this.post.labels[a]===e)return s="标签重复！",i(),!1;return new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？ ]").test(e)?(s="不允许含有特殊字符！",i(),!1):3===this.post.labels.length?(s="最多设置3个自定义标签！",i(),!1):(this.keyWord=null,void this.$set(this.post.labels,this.post.labels.length,e))},delLabel:function(t){this.$delete(this.post.labels,t)},WidthCheck:function(t,e){for(var s=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);if(a>=1&&a<=126||a>=65376&&a<=65439?s++:s+=2,s>e)return!0}return!1},saveOrPublish:function(t){if(this.post.content.length<2e3){var e=this.postText;if(e=(e=e.replace(/&nbsp;/g,"")).replace(/<br>/g,""),""===this.post.title||""===e)return this.$message.warning({message:"标题和帖子内容皆不能为空！",type:"error",duration:1800}),!1;if(this.WidthCheck(this.post.title,50))return this.$message.warning({message:"标题过长，超过限制长度！",type:"error",duration:1800}),!1;if(!/.*[\u4e00-\u9fa5]+.*$/.test(e)&&!/[0-9a-z]/.test(e))return this.$message.warning({message:"全空格或未输入有意义内容！",type:"error",duration:1800}),!1}else{if(this.post.content.length>32768)return this.$message.warning({message:"内容太长！若是直接复制桌面文档，请改为右键纯文本粘贴！",type:"error",duration:1800}),!1;if(this.post.content.length>2e3){if(""===this.post.title)return this.$message.warning({message:"标题不能为空！",type:"error",duration:1800}),!1;if(this.WidthCheck(this.post.title,50))return this.$message.warning({message:"标题过长，超过限制长度！",type:"error",duration:1800}),!1}}this.ifPublish=!0;var s=this;Wt.publishPost("/forum/posts/publish",{title:s.post.title,content:s.post.content,labels:s.post.labels,type:s.post.type,if_save:t,if_epic_post:this.post.if_epic_post}).then(function(e){t?"true"===e.success?(s.ifPublish=!1,s.$message.success({message:"帖子保存成功！",type:"success",duration:1200})):(s.ifPublish=!1,s.$message.success({message:"网络信号差！请稍后再试！",type:"warning",duration:1200})):("true"===e.success?(s.ifPublish=!1,s.$router.push({path:"/forums"}),s.$message.success({message:"发布成功！",type:"success",duration:1800}),s.ifPublish=!1):(s.ifPublish=!1,s.$message.success({message:"网络信号差！请稍后再试！",type:"warning",duration:1200})),Wt.publishPost("/forum/posts/publish",{title:"",content:"",labels:[],type:0,if_save:!0,if_epic_post:!1}).then(function(t){}))})},getPostSave:function(){var t=this;Wt.getPostSave("/forum/posts/publish",{}).then(function(e){""!==e.data.title&&(t.post=e.data,t.saveContent=e.data.content)})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Wt.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info})}else this.$router.push({path:"/login"})}},created:function(){this.getListInfo(),this.getPostSave()}},Si={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"postPublish"}},[s("div",{staticClass:"postHead"},[s("p",{staticClass:"postHead-left",on:{click:t.backToIndex}},[t._v("讨论区")]),t._v(" "),s("p",{staticClass:"postHead_block"},[t._v(">")]),t._v(" "),s("p",{staticClass:"postHead-right"},[t._v("发布贴子")]),t._v(" "),s("div",{staticClass:"btn-save",on:{click:function(e){t.saveOrPublish(!0)}}},[t._v("编辑保存")]),t._v(" "),""!==t.post.save_date?s("div",{staticClass:"btn-reset",on:{click:function(e){t.resetContent()}}},[t._v("清空内容")]):t._e()]),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.ifPublish,expression:"ifPublish"}],staticClass:"postBody",attrs:{"element-loading-text":"拼命执行中"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"title",attrs:{type:"text",placeholder:"请输入帖子标题"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._v(" "),"3"!==t.info.identity?[s("button",{class:t.post.if_epic_post?"btn btn-applyForGood":"btn",on:{click:function(e){t.post.if_epic_post=!t.post.if_epic_post}}},[t._v("申精")])]:t._e(),t._v(" "),"3"===t.info.identity?[s("button",{class:3===t.post.type?"btn btn-setType":"btn",on:{click:function(e){t.setType(3)}}},[t._v("通告")]),t._v(" "),s("button",{class:4===t.post.type?"btn btn-setType":"btn",on:{click:function(e){t.setType(4)}}},[t._v("指南")])]:t._e(),t._v(" "),t.WidthCheck(t.post.title,50)?s("span",{staticClass:"overTips"},[t._v("超过字符限制")]):t._e(),t._v(" "),s("div",{staticClass:"labelAndTime"},[s("span",{staticClass:"labelAndTime-title"},[t._v("贴子关键词")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],attrs:{id:"label-input",type:"text",placeholder:"请输入标签"},domProps:{value:t.keyWord},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addLabel(e):null},input:function(e){e.target.composing||(t.keyWord=e.target.value)}}}),s("button",{on:{click:t.addLabel}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("ul",t._l(t.post.labels,function(e,i){return s("li",{key:i,staticClass:"labels"},[t._v(t._s(e)),s("button",{on:{click:function(e){t.delLabel(i)}}},[s("i",{staticClass:"el-icon-close"})])])})),t._v(" "),""!==t.post.save_date?s("p",{staticClass:"time"},[t._v("上次保存时间:    "+t._s(t.post.save_date.replace("T"," ")))]):t._e()]),t._v(" "),s("div",{staticClass:"editor"},[s("wangEditor",{attrs:{catchData:t.catchData,content:t.saveContent,editorType:1}})],1),t._v(" "),s("div",{staticClass:"btn-publish",on:{click:function(e){t.saveOrPublish(!1)}}},[t._v("确定发布")])],2)])},staticRenderFns:[]};var xi=s("VU/8")(Ti,Si,!1,function(t){s("D3KZ")},"data-v-c15650c4",null).exports,Di={name:"postDetail",components:{rightFrame:_i,wangEditor:Xt},data:function(){return{info:{},searchKey:"",postDetail:{author:{nick:"",user_id:"",avatarUrl:""},content:"",if_liked:!1,is_top:!1,labels:[],likes:0,next_post:{title:"",post_id:-1},post_id:28,pre_post:{title:null,post_id:null},publish_date:"",replies:0,title:"",type:0,views:0},replyId:-1,childReplyList:[],ifLogin:!1,loading:!0,replyList:[],page:1,pagesize:10,rootRepliesTotal:0,childPage:1,childPagesize:5,childRepliesTotal:0,showEditor:!1,showEditorNoFirst:-1,showEditorNoSecond:-1,editorContent:"",editorText:"",host:Bi,defaultImage:s("IT0F")}},methods:{catchData:function(t,e){this.editorContent=t,this.editorText=e},toPublish:function(){this.$router.push({path:"/postPublish"})},toLogin:function(t){1===t?this.$router.push({name:"login",query:{redirect:"/postDetail/"+this.postDetail.post_id}}):2===t&&this.$router.push({name:"login",query:{redirect:"/postPublish"}})},toSearch:function(){this.$router.push({name:"postSearch",params:{type:0,page:1},query:{search:this.searchKey}})},toReplyPost:function(){if(!this.ifLogin)return!1;this.showEditorNoFirst=-1,this.showEditorNoSecond=-1,this.showEditor=!this.showEditor},toTopPost:function(t){var e=this;e.postDetail.is_top?Wt.delPostTop("/forum/posts/top",t).then(function(t){"true"===t.success?(e.$message({message:"帖子取消置顶成功！",type:"success",duration:1e3}),e.postDetail.is_top=!1):e.$message({message:"帖子取消置顶失败！",type:"error",duration:1e3})}):Wt.putPostTop("/forum/posts/top",t).then(function(t){"true"===t.success?(e.$message({message:"帖子置顶成功！",type:"success",duration:1e3}),e.postDetail.is_top=!0):e.$message({message:"帖子置顶失败！最多只允许三个帖子置顶！",type:"error",duration:1e3})})},openRootEditor:function(t){if(!this.ifLogin)return!1;this.showEditor=!1,this.showEditorNoSecond=-1,this.showEditorNoFirst=this.showEditorNoFirst===t?-1:t},openChildEditor:function(t){if(!this.ifLogin)return!1;this.showEditor=!1,this.showEditorNoFirst=-1,this.showEditorNoSecond=this.showEditorNoSecond===t?-1:t},delMsg:function(t,e){var s=this;this.$confirm("此操作将永久删除该评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Wt.deleteReply("/forum/posts/send_reply",t).then(function(t){"true"===t.success&&(s.$message({type:"success",message:"删除成功!"}),2===e&&(s.childPage=1,s.getChildReplies()),s.getRootReplies())})}).catch(function(){})},ifLike:function(t){t&&this.giveLike(this.postDetail.post_id,this.postDetail.if_liked)},highlight:function(t){for(var e=t.split("<pre><code>"),s=e[0],i="",a=1;a<e.length;a++){i+='<span class="codeContain"><pre class="line-numbers"><code class="language-clike">';var n=e[a].split("</code></pre>"),o=n[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<br>/g,"\n"),r=(o=Vt.a.highlight(o,Vt.a.languages.clike,"clike")).split("\n");o="";for(var l=0;l<r.length;l++)o+='<span class="line-numbers-rows">'+r[l]+" </span>";i+=o,i+='</code></pre><button class="copyContent-btn" style="cursor: pointer">复制</button></span>',i+=n[1]}return s+i},backToIndex:function(){this.$router.push({path:"/forums"})},toNewPost:function(t){this.$router.push({name:"postDetail",params:{id:t}}),this.getPostDetail()},handleCurrentChange:function(t){this.page=t,this.replyId=-1,this.childPage=1,this.childReplyList=[],this.getRootReplies()},handleChildCurrentChange:function(t){this.childPage=t,this.getChildReplies()},giveLike:function(t,e){var s=window.sessionStorage.getItem("userInfo");if("undefined"===s||null===s||void 0===s)return!1;var i=this;this.postDetail.if_liked=!this.postDetail.if_liked,e?Wt.delGiveLike("/forum/like",t).then(function(t){"true"===t.success&&i.postDetail.likes--}):Wt.postGiveLike("/forum/like",t).then(function(t){"true"===t.success&&i.postDetail.likes++})},sendReply:function(t,e){if(this.editorContent.length<1e3){var s=this.editorText;if(""===(s=(s=s.replace(/&nbsp;/g,"")).replace(/<br>/g,""))||void 0===this.editorContent)return this.$message({message:"回复内容不能为空！",type:"error",showClose:!0,duration:1800}),!1;if(!/.*[\u4e00-\u9fa5]+.*$/.test(s)&&!/[0-9a-z]/.test(s))return this.$message({message:"未输入有意义内容！",type:"error",showClose:!0,duration:1800}),!1}else if(this.editorContent.length>32768)return this.$message.warning({message:"内容太长！若是直接复制桌面文档，请改为右键纯文本粘贴！",type:"error",duration:1800}),!1;var i=this;Wt.sendReply("/forum/posts/send_reply",{params:{post_id:t,target_id:-1===e?null:e,content:i.editorContent}}).then(function(t){"true"===t.success&&(i.getRootReplies(),i.getChildReplies(),i.showEditor=!1,i.showEditorNoFirst=-1,i.showEditorNoSecond=-1,i.$message({message:"成功发送回复信息！",type:"success",showClose:!0,duration:1e3}))})},getPostDetail:function(){this.loading=!0;var t=this;this.postDetail.post_id=this.$route.params.id,""!==this.post_id&&void 0!==this.postDetail.post_id&&null!==this.postDetail.post_id&&Wt.getPostDetail("/forum/posts/detail",{post_id:t.postDetail.post_id}).then(function(e){"object"!==(void 0===e?"undefined":Ks()(e))?(t.$message({type:"error",message:"没有该文章！",duration:"2000"}),t.$router.push({path:"/forums"})):(t.postDetail=e.data,t.loading=!1,t.getRootReplies(),t.ifLogin&&t.setHadRead())})},getRootReplies:function(){var t=this;Wt.getRootReplies("/forum/posts/root_replies",{post_id:t.postDetail.post_id,page:t.page,pagesize:t.pagesize}).then(function(e){t.replyList=e.data.reply_list,t.rootRepliesTotal=e.total})},openChildReplies:function(t){this.replyId=this.replyId===t?-1:t,-1!==this.replyId&&(this.childPage=1,this.getChildReplies())},getChildReplies:function(){var t=this;if(-1===t.replyId)return!1;Wt.getChildReplies("/forum/posts/child_replies",{reply_id:t.replyId,page:t.childPage,pagesize:t.childPagesize}).then(function(e){t.childReplyList=e.data.child_replies_list,t.childRepliesTotal=e.total})},setHadRead:function(){Wt.postReadPost("/forum/posts/view",this.postDetail.post_id).then(function(t){})},getListInfo:function(){var t=this,e=window.sessionStorage.getItem("userInfo");if("undefined"!==e&&null!==e&&void 0!==e){var s=JSON.parse(e).uid;Wt.getInfoList("/users/detail",s).then(function(e){t.info=e.data.user_info,t.ifLogin=!0,t.setHadRead()})}}},created:function(){this.getListInfo(),this.getPostDetail()}},qi={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"postDetail"}},[s("div",{staticClass:"header"},[s("div",{staticClass:"header-left"},[s("p",{staticClass:"postHead-left",on:{click:t.backToIndex}},[t._v("讨论区")]),t._v(" "),s("p",{staticClass:"postHead_block"},[t._v(">")]),t._v(" "),s("p",{staticClass:"postHead-right"},[t._v("发布贴子")])]),t._v(" "),s("div",{staticClass:"header-right"},[t.ifLogin?s("div",{staticClass:"btn-publish",on:{click:t.toPublish}},[t._v("发布帖子")]):t._e(),t._v(" "),t.ifLogin?t._e():s("div",{staticClass:"btn-publish",on:{click:function(e){t.toLogin(2)}}},[t._v("登录发布")]),t._v(" "),s("div",{staticClass:"search-input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],attrs:{type:"text",placeholder:"请输入关键词"},domProps:{value:t.searchKey},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.toSearch(e):null},input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),t._v(" "),s("i",{staticClass:"el-icon-search",on:{click:t.toSearch}})])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"left-module"},[s("div",{staticClass:"left-module-top"},[s("div",{staticClass:"user_info",staticStyle:{width:"unset"}},[s("img",{attrs:{src:t.postDetail.author.avatarUrl?t.host+t.postDetail.author.avatarUrl:t.defaultImage}}),t._v(" "),s("span",{staticClass:"user-name",staticStyle:{"max-width":"unset"}},[t._v(t._s(3===t.postDetail.type?"OJ平台管理员":t.postDetail.author.nick))])]),t._v(" "),s("div",{staticClass:"module-top"},[s("h3",{staticClass:"title"},[s("span",{on:{click:function(e){t.toPostDetail(t.postDetail.post_id)}}},[t._v(t._s(t.postDetail.title))]),t._v(" "),2===t.postDetail.type?s("span",{staticClass:"tags tags-essence"},[t._v("精华")]):t._e(),t._v(" "),3===t.postDetail.type?s("span",{staticClass:"tags tags-notice"},[t._v("系统公告")]):t._e(),t._v(" "),4===t.postDetail.type?s("span",{staticClass:"tags tags-guide"},[t._v("新手指南")]):t._e()]),t._v(" "),s("div",{staticClass:"tagKey"},[t._l(t.postDetail.labels,function(e,i){return s("span",{key:i,staticClass:"tags tags-key"},[t._v(t._s(e))])}),t._v(" "),0===t.postDetail.labels.length?s("span",{staticClass:"tags tags-key"},[t._v("普通帖子")]):t._e(),t._v(" "),s("h5",{staticClass:"authorAndDate"},[t._v(t._s(t.postDetail.publish_date.replace("T"," ")))])],2),t._v(" "),s("div",{staticClass:"mainContent editorShow",domProps:{innerHTML:t._s(t.highlight(t.postDetail.content))}})]),t._v(" "),s("div",{staticClass:"block"}),t._v(" "),null!==t.postDetail.pre_post.title?s("div",{staticClass:"btn-prePost"},[s("div",{staticClass:"btn",on:{click:function(e){t.toNewPost(t.postDetail.pre_post.post_id)}}},[t._v("上一篇帖子")]),t._v(" "),s("h5",[t._v(t._s(t.postDetail.pre_post.title))])]):t._e(),t._v(" "),null===t.postDetail.next_post.title||t.loading?t._e():s("div",{staticClass:"btn-nextPost"},[s("div",{staticClass:"btn",on:{click:function(e){t.toNewPost(t.postDetail.next_post.post_id)}}},[t._v("下一篇帖子")]),t._v(" "),s("h5",[t._v(t._s(t.postDetail.next_post.title))])]),t._v(" "),t.ifLogin?s("div",{staticClass:"btn-opers"},[s("button",{class:t.postDetail.if_liked?"btn-green btn-to-grey":"btn-grey btn-to-green",on:{click:function(e){t.giveLike(t.postDetail.post_id,t.postDetail.if_liked)}}},[s("i",{staticClass:"icon-zan"})]),t._v(" "),s("button",{class:t.showEditor?"btn-grey btn-to-orange":"btn-orange btn-to-grey",on:{click:function(e){t.toReplyPost()}}},[s("i",{staticClass:"icon-huifu"})]),t._v(" "),"3"===t.info.identity?s("button",{class:t.postDetail.is_top?"btn-orange btn-to-grey":"btn-grey btn-to-orange",on:{click:function(e){t.toTopPost(t.postDetail.post_id)}}},[s("i",{staticClass:"icon-stick-copy"})]):t._e()]):t._e()]),t._v(" "),s("transition",{attrs:{name:"editor-fade"}},[t.showEditor?s("div",{staticClass:"left-module-middle"},[s("span",{staticClass:"tip"},[t._v("回复帖子")]),t._v(" "),s("div",{staticClass:"editor ud-editor-message"},[s("wangEditor",{attrs:{catchData:t.catchData,height:"165px",editorType:2}}),t._v(" "),s("button",{staticClass:"btn-reply",on:{click:function(e){t.sendReply(t.postDetail.post_id,-1)}}},[t._v("回复他")])],1),t._v(" "),s("div",{staticClass:"block",staticStyle:{height:"10px"}})]):t._e()]),t._v(" "),0!==t.postDetail.replies?s("span",{staticClass:"stats"},[t._v("共有 "+t._s(t.postDetail.replies)+" 个回复")]):t._e(),t._v(" "),s("div",{staticClass:"left-module-bottom"},[0===t.replyList.length?s("h5",{staticClass:"noMore"},[t._v("暂时无人评论")]):t._e(),t._v(" "),0!==t.replyList.length?s("ul",{staticClass:"replylist"},t._l(t.replyList,function(e,i){return s("li",{key:i,staticClass:"replylist-item"},[s("span",{staticClass:"whichFloor"},[t._v(t._s((t.page-1)*t.pagesize+i+1)+"楼")]),t._v(" "),s("div",{staticClass:"reply-content editorShow ud-editor-message"},[s("p",{domProps:{innerHTML:t._s(t.highlight(e.content))}})]),t._v(" "),s("div",{staticClass:"replylist-bottom"},[s("span",{staticClass:"date"},[t._v("\n                发表于  "+t._s(e.publish_data.replace("T"," "))+"  \n                "),t.info.user_id===e.author.user_id?s("i",{staticClass:"el-icon-delete btn-del",on:{click:function(s){t.delMsg(e.reply_id,1)}}}):t._e()]),t._v(" "),t.ifLogin?[0!==e.replies?s("button",{class:t.showEditorNoFirst!==i?"btn btn-orange":"btn btn-grey",on:{click:function(e){t.openRootEditor(i)}}},[t._v(t._s(t.showEditorNoFirst!==i?"回复("+e.replies+")":"取消"))]):t._e(),t._v(" "),0===e.replies?s("button",{class:t.showEditorNoFirst!==i?"btn btn-orange":"btn btn-grey",on:{click:function(e){t.openRootEditor(i)}}},[t._v(t._s(t.showEditorNoFirst!==i?"回复":"取消"))]):t._e()]:[s("button",{staticClass:"btn btn-grey",on:{click:function(e){t.toLogin(1)}}},[t._v("登录回复")])],t._v(" "),0!==e.replies?s("button",{staticClass:"btn btn-open-childReplies btn-green",on:{click:function(s){t.openChildReplies(e.reply_id)}}},[t._v(t._s(e.reply_id===t.replyId?"关闭评论":"展开评论"))]):t._e()],2),t._v(" "),s("transition",{attrs:{name:"editor-fade"}},[t.showEditorNoFirst===i?s("div",{staticClass:"editor replyEditor ud-editor-message"},[s("wangEditor",{attrs:{catchData:t.catchData,height:"200px",editorType:2}}),t._v(" "),s("button",{staticClass:"btn-reply",on:{click:function(s){t.sendReply(t.postDetail.post_id,e.reply_id)}}},[t._v("回复他")])],1):t._e()]),t._v(" "),s("transition",{attrs:{name:"ul-fade"}},[e.reply_id===t.replyId?s("div",{staticClass:"childReplyList"},[s("ul",[t._l(t.childReplyList,function(i,a){return s("li",{key:a},[s("div",{staticClass:"childReplylist-item"},[s("img",{attrs:{src:i.author.avatarUrl?t.host+i.author.avatarUrl:t.defaultImage}}),t._v(" "),s("div",{staticClass:"text"},[s("span",{staticClass:"childReplylist-name"},[t._v(t._s(i.author.nick)),i.target_object?s("span",[t._v("  "),s("span",{staticStyle:{color:"rgba(255, 153, 0, 1)"}},[t._v("回复")]),t._v("  "+t._s(i.target_object.nick))]):t._e()]),t._v(" "),s("div",{staticClass:"childReplylist-content editorShow ud-editor-message"},[s("p",{domProps:{innerHTML:t._s(t.highlight(i.content))}})]),t._v(" "),s("span",{staticClass:"childReplylist-date"},[t._v("\n                        发表于  "+t._s(i.publish_date.replace("T"," "))+"  \n                        "),t.info.user_id===e.author.user_id?s("i",{staticClass:"el-icon-delete btn-del",on:{click:function(e){t.delMsg(i.reply_id,2)}}}):t._e()])]),t._v(" "),t.ifLogin?s("button",{class:t.showEditorNoSecond!==a?"btn btn-orange":"btn btn-grey",on:{click:function(e){t.openChildEditor(a)}}},[t._v(t._s(t.showEditorNoSecond!==a?"回复":"取消"))]):t._e()]),t._v(" "),s("transition",{attrs:{name:"editor-fade"}},[t.showEditorNoSecond===a?s("div",{staticClass:"editor replyEditor ud-editor-message"},[s("wangEditor",{attrs:{catchData:t.catchData,height:"200px",editorType:2}}),t._v(" "),s("button",{staticClass:"btn-reply",on:{click:function(e){t.sendReply(t.postDetail.post_id,i.reply_id)}}},[t._v("回复他")])],1):t._e()])],1)}),t._v(" "),t.childRepliesTotal>=t.childPagesize?s("div",{staticClass:"childReplies-pagination"},[s("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.childPage,"page-size":t.childPagesize,"pager-count":5,total:t.childRepliesTotal},on:{"current-change":t.handleChildCurrentChange}})],1):t._e()],2)]):t._e()]),t._v(" "),s("div",{staticClass:"user_info"},[s("img",{attrs:{src:e.author.avatarUrl?t.host+e.author.avatarUrl:t.defaultImage}}),t._v(" "),s("span",{staticClass:"user-name"},[t._v(t._s(3===e.type?"OJ平台管理员":e.author.nick))])])],1)})):t._e()]),t._v(" "),t.rootRepliesTotal>=t.pagesize?s("div",{staticClass:"rootReplies-pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.page,"page-size":t.pagesize,"pager-count":9,total:t.rootRepliesTotal},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1),t._v(" "),s("div",{staticClass:"right-module"},[s("rightFrame",{attrs:{whilePage:1,postDetail:t.postDetail},on:{toLike:t.ifLike}})],1)])])},staticRenderFns:[]};var Ii=s("VU/8")(Di,qi,!1,function(t){s("24bH")},"data-v-0a170213",null).exports;a.default.use(m.a);var zi=new m.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:K},{path:"/rank",name:"rank",component:Z},{path:"/about",name:"about",component:rt},{path:"/status",name:"status",component:pt},{path:"/login",name:"login",component:_t},{path:"/library",component:bt,children:[{path:"/",name:"questionBank",component:Nt},{path:"questionDetail",name:"questionDetail",component:Ht}]},{path:"/questionSolve",name:"questionSolve",component:ie},{path:"/competition",name:"competition",component:re},{path:"/test",name:"test",component:de},{path:"/competitionRank",name:"competitionRank",component:me},{path:"/personal-center/:isShow",name:"PersonalCenter",component:os},{path:"/addTest",name:"addTest",component:di},{path:"/forums",name:"forums",component:yi,children:[{path:"/postSearch/:type/:page?",name:"postSearch",component:ki},{path:"/postPublish",name:"postPublish",component:xi},{path:"/postDetail/:id",name:"postDetail",component:Ii}]},{path:"/quiz",name:"quiz",component:ls,children:[{path:"/quizAdd/:courseId/:id?",name:"quizAdd",component:js},{path:"/quizPreview/:id/:uid?",name:"quizPreview",component:Ws},{path:"/quizStart/:id",name:"quizStart",component:ei},{path:"/quizCheck/:id",name:"quizCheck",component:ai},{path:"/quizDetail/:id",name:"quizDetail",component:ri}]}]});zi.beforeEach(function(t,e,s){var i=window.sessionStorage.getItem("userInfo");if("undefined"!==i&&null!==i&&void 0!==i){if("/index"===t.fullPath||"/"===t.fullPath)return void s();var a=JSON.parse(i).nick;if(!(0===a.indexOf("GPNU_")?/^[-\w\u4e00-\u9fa5]{2,20}$/:/^[-\w\u4e00-\u9fa5]{2,14}$/).test(a))return void s("/index")}else if(["personal-center","quizDetail","quizAdd","quizPreview","quizStart","quizCheck"].indexOf(t.fullPath.split("/")[1])>=0)return void s("/login?redirect="+t.fullPath);s()});var Li,Pi=zi,Ri=function(t){return t.user},Ai=function(t){return t.header},Ei=function(t){return t.footer},Fi={user:{},header:!0,footer:!0},$i=s("bOdI"),Oi=s.n($i),Ni=(Li={},Oi()(Li,"SET_USER",function(t,e){t.user=e}),Oi()(Li,"TOGGLE_HEADER",function(t,e){t.header=e}),Oi()(Li,"TOGGLE_FOOTER",function(t,e){t.footer=e}),Li);a.default.use(ht.a);var Mi=new ht.a.Store({state:Fi,getters:i,mutations:Ni}),Bi="";function ji(t,e){return new p.a(function(s,i){f.a.get(Bi+t,{params:e,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/json"},emulateJSON:!0}).then(function(t){return s(t)})})}function Ui(t,e){return new p.a(function(s,i){f.a.put(Bi+t,{params:e,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/json"},emulateJSON:!0}).then(function(t){return s(t)})})}function Hi(t,e){return new p.a(function(s,i){f.a.delete(Bi+t,{params:e,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/json"},emulateJSON:!0}).then(function(t){return s(t)})})}function Qi(t,e){return new p.a(function(s,i){f.a.post(Bi+t,{params:e,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/json"},emulateJSON:!0}).then(function(t){return s(t)})})}function Vi(t,e){return new p.a(function(s,i){f()({method:"post",url:Bi+t,data:e,xhrFields:{withCredentials:!0},transformRequest:[function(t){var e="";for(var s in t)e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s])+"&";return e=e.slice(0,-1)}]}).then(function(t){return s(t)})})}function Wi(t,e){return new p.a(function(s,i){f()({method:"delete",url:Bi+t,data:e,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){var e="";for(var s in t)e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s])+"&";return e=e.slice(0,-1)}]}).then(function(t){return s(t)})})}function Ji(t,e){return new p.a(function(s,i){f()({method:"put",url:Bi+t,data:e,xhrFields:{withCredentials:!0},transformRequest:[function(t){var e="";for(var s in t)e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s])+"&";return e=e.slice(0,-1)}]}).then(function(t){return s(t)})})}function Ki(t,e){return new p.a(function(s,i){f()({method:"post",url:Bi+t,data:u()(e),headers:{"ConTent-Type":"application/json; charset=utf-8"},xhrFields:{withCredentials:!0},dataType:"json"}).then(function(t){return s(t)})})}function Gi(t,e){return new p.a(function(s,i){f()({method:"put",url:Bi+t,data:u()(e),headers:{"ConTent-Type":"application/json; charset=utf-8"},xhrFields:{withCredentials:!0},dataType:"json"}).then(function(t){return s(t)})})}f.a.interceptors.response.use(function(t){return 80001===t.data.status&&(sessionStorage.clear(),Mi.commit("SET_USER",{}),Pi.push({path:"/login"})),t},function(t){return p.a.resolve(t.response)});var Yi={data:function(){return{User:{},navs:[{title:"首页",path:"/index"},{title:"题库",path:"/library"},{title:"竞赛",path:"/competition"},{title:"状态",path:"/status"},{note:"课程",name:"PersonalCenter",params:{isShow:"2"}},{title:"排行榜",path:"/rank"},{title:"讨论区",path:"/forums"},{title:"荣誉墙",path:"/about"}],defaultImage:s("IT0F")}},computed:l()({},Object(ht.b)({headerIndex:"getHeaderIndex",user:"user"}),{getTitle:function(){return"1"===this.User.identity?"我的课程":"2"===this.User.identity?"我的教学":""},getUserId:function(){return this.user.uid},getAvatarUrl:function(){return this.User.avatarurl?Bi+this.User.avatarurl:this.defaultImage}}),methods:l()({},Object(ht.c)(["SET_USER"]),{toRegister:function(){this.$router.push({path:"/login",query:{show:-1}})},exit:function(){var t=this;ft.logout("/users/logout").then(function(e){e.success?(sessionStorage.clear(),t.SET_USER({}),t.User={},t.$router.push({path:"/index"})):t.$message({message:"服务器错误",type:"error",duration:1e3,showClose:!0})})}}),watch:{getUserId:{handler:function(){"undefined"!==this.user&&"string"==typeof this.user?this.User=JSON.parse(this.user):this.user.uid&&(this.User=this.user)},immediate:!0}},mounted:function(){}},Xi={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("div",{staticStyle:{width:"1170px",margin:"0 auto"}},[i("img",{staticClass:"logo",attrs:{src:s("6PsS"),alt:""}}),t._v(" "),i("ul",{staticClass:"nav-list"},t._l(t.navs,function(e,s){return"课程"!==e.note||"课程"===e.note&&""!==t.getTitle?i("li",{key:s},[null!==e.name&&""!==e.name&&void 0!==e.name?["课程"===e.note&&t.User.uid?i("router-link",{attrs:{tag:"a",to:{name:e.name,params:e.params}}},[i("span",[t._v(t._s(t.getTitle))])]):t._e()]:[i("router-link",{attrs:{tag:"a",to:e.path}},[i("span",[t._v(t._s(e.title))])])]],2):t._e()})),t._v(" "),t.User.uid?t._e():i("div",{staticClass:"login"},[i("router-link",{staticClass:"UserName",attrs:{to:"/login",tag:"a"}},[t._v("登录")]),t._v(" "),i("a",{staticClass:"header-quit-register",attrs:{to:"/login"},on:{click:t.toRegister}},[t._v("注册")])],1),t._v(" "),t.User.uid?i("div",{staticClass:"login"},[i("router-link",{staticClass:"avatar",attrs:{tag:"span",to:"/personal-center/1"}},[i("img",{attrs:{src:t.getAvatarUrl}})]),t._v(" "),i("a",{staticClass:"header-quit-register",attrs:{href:"#"},on:{click:t.exit}},[t._v("退出")])],1):t._e()])])},staticRenderFns:[]};var Zi={name:"App",components:{myHeader:s("VU/8")(Yi,Xi,!1,function(t){s("8gAi")},"data-v-ef99c09e",null).exports,myFooter:N},data:function(){return{inlineUser:{}}},computed:l()({},Object(ht.b)({showHeader:"getHeaderToggle",showFooter:"getFooterToggle"})),methods:l()({},Object(ht.c)(["SET_USER"]),{getUserInfo:function(){var t=window.sessionStorage;this.inlineUser=t.getItem("userInfo")||{},this.SET_USER(this.inlineUser)}}),created:function(){this.getUserInfo();var t=this;window.document.body.onclick=function(e){if("copyContent-btn"===e.target.className){var s=e.target.previousSibling,i=document.createElement("textarea");i.value=s.innerText,document.body.appendChild(i),i.select(),document.execCommand("Copy"),document.body.removeChild(i),t.$message({message:"复制成功！",type:"success",duration:1e3})}}}},ta={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("my-header",{class:{hide:void 0!==this.showHeader&&!this.showHeader}}),this._v(" "),e("transition",{attrs:{mode:"out-in"}},[e("router-view")],1)],1)},staticRenderFns:[]};var ea=s("VU/8")(Zi,ta,!1,function(t){s("94gv")},null,null).exports;a.default.config.productionTip=!1,a.default.prototype.$http=f.a,a.default.use(o.a),Pi.afterEach(function(t,e,s){window.scrollTo(0,0)});var sa=new a.default({el:"#app",router:Pi,store:Mi,render:function(t){return t(ea)}});a.default.use({vRouter:sa})},"Nt3/":function(t,e){},OHpe:function(t,e){},"P/ti":function(t,e){},PqjM:function(t,e){},Qt0N:function(t,e){},ROCT:function(t,e){},RQO4:function(t,e){},TjFv:function(t,e){},Uqce:function(t,e){},VVwl:function(t,e){},"Wfb/":function(t,e){},XMfH:function(t,e){},bqo0:function(t,e){},"c/ao":function(t,e){},chP8:function(t,e){},datP:function(t,e){},djK7:function(t,e){},"dl+s":function(t,e){},eB4M:function(t,e){},fA9g:function(t,e){},ggZH:function(t,e){},h4Hz:function(t,e){},iPPQ:function(t,e){},jFd5:function(t,e){},kh3Z:function(t,e){},kh5X:function(t,e){},lMHN:function(t,e){},mX6V:function(t,e){},p6jT:function(t,e){},qH5x:function(t,e){},qbE4:function(t,e){},rgtS:function(t,e){},sNId:function(t,e){},tSUP:function(t,e){},tYky:function(t,e){},tvR6:function(t,e){},uxEE:function(t,e,s){t.exports=s.p+"static/img/login_bg.5b8d00b.jpg"},"y+Rs":function(t,e){},ys6u:function(t,e){},zDZi:function(t,e){},zok1:function(t,e){},zyEe:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1d3103ee75a8f5cffb75.js.map